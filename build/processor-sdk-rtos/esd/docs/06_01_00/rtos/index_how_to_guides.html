

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.1. Target &mdash; Processor SDK RTOS Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Processor SDK RTOS Documentation" href="../index.html"/>
        <link rel="up" title="10. How to Guides" href="How_to_Guides.html"/>
        <link rel="next" title="11. Frequently Asked Questions" href="FAQ.html"/>
        <link rel="prev" title="10. How to Guides" href="How_to_Guides.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Processor SDK RTOS
          

          
          </a>

          
            
            
              <div class="version">
                06_01_00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Release_Specific.html">2. Release Specific</a></li>
<li class="toctree-l1"><a class="reference internal" href="Board_EVM_Abstration.html">3. Board/EVM Abstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Foundational_Components.html">4. Foundational Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="DSP_Software.html">5. DSP Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="Device_Drivers.html">6. Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="PRU_ICSS.html">7. PRU-ICSS Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="Compilers.html">8. Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples_and_Demonstrations.html">9. Examples and Demonstrations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="How_to_Guides.html">10. How to Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">10.1. Target</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-ipc-examples-on-am572x">10.1.1. Run IPC Examples on AM572x</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dra7xx-am572xx-ipc-examples">10.1.1.1. DRA7xx/AM572xx IPC Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#run-ipc-examples-on-am65xx">10.1.2. Run IPC Examples on AM65XX</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#am65xx-ipc-examples">10.1.2.1. AM65xx IPC Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taking-the-c66x-out-of-reset-with-linux-running-on-the-arm-a15">10.1.3. Taking the C66x Out Of Reset with Linux Running on the ARM A15</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-take-the-c66x-dsp-out-of-reset-with-linux-running-on-a15">10.1.3.1. How to take the C66x DSP out of reset with Linux running on A15</a></li>
<li class="toctree-l4"><a class="reference internal" href="#target-configuration">10.1.3.2. Target Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rtos-customization-using-an-external-input-to-trigger-an-interrupt-on-am57x">10.1.4. RTOS Customization: using an external input to trigger an interrupt on AM57x</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hardware">10.1.4.1. Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#software">10.1.4.2. Software</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-software-development">10.1.4.3. Application software development</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test">10.1.4.4. Test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#run-applications-from-ddr-on-r5-cores">10.1.5. Run applications from DDR on R5 cores</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#run-bios-applications-from-ddr-on-r5">10.1.5.1. Run BIOS Applications from DDR on R5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-baremetal-applications-from-ddr-on-r5">10.1.5.2. Run Baremetal Applications from DDR on R5</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#host">10.2. Host</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup">10.2.1. Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setup-ccs-for-evm-and-processor-sdk-rtos">10.2.1.1. Setup CCS for EVM and Processor-SDK RTOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-environment-when-installing-to-a-custom-path">10.2.1.2. Update environment when installing to a custom path</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prevent-beaglebone-board-reset-on-jtag-connect">10.2.1.3. Prevent BeagleBone board reset on JTAG Connect</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rebuild-drivers-from-pdk-directory">10.2.1.4. Rebuild drivers from PDK directory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ti-rtos-basics">10.2.2. TI RTOS Basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ti-rtos-tips-tricks">10.2.2.1. TI RTOS Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#flashing-and-boot">10.2.3. Flashing and Boot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#flash-bootable-images-c66x-k2h-k2e-k2l-only">10.2.3.1. Flash bootable images (C66x, K2H/K2E/K2L only)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#porting">10.2.4. Porting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-custom-board-library-target-to-processor-sdk-rtos-makefiles">10.2.4.1. Adding Custom Board_Library Target to Processor SDK RTOS makefiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#processor-sdk-rtos-porting-guide-for-am571x-am570x-speed-grades">10.2.4.2. Processor SDK RTOS Porting Guide for AM571x/AM570x Speed Grades</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#system-integration">10.2.5. System Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-dsp-and-ipu-firmware-using-pdk-drivers-and-ipc-to-load-from-arm-linux-on-am57xx-devices">10.2.5.1. Create DSP and IPU firmware using PDK drivers and IPC to load from ARM Linux on AM57xx devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-memory-map-for-creating-multicore-applications-on-am57xx-using-ipc">10.2.5.2. Customizing Memory map for creating Multicore Applications on AM57xx using IPC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ipc-debugging-tools-and-techniques-on-am57xx">10.2.5.3. IPC Debugging Tools and Techniques on AM57xx</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#evm-hardware-setup">10.3. EVM Hardware Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#am65x-evm">10.3.1. AM65x EVM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#evm-layout-and-key-components">10.3.1.1. EVM Layout and Key Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#minimum-hardware-setup-required-to-connect-to-evm">10.3.1.2. Minimum Hardware Setup Required to Connect to EVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#am65x-debug-software-setup">10.3.1.3. AM65x Debug Software Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#am572x-gp-evm-hardware-setup">10.3.2. AM572x GP EVM Hardware Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tmdxidk5728-hardware-setup">10.3.3. TMDXIDK5728 Hardware Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ak2gx-gp-evm-hardware-setup">10.3.4. 66AK2GX GP EVM Hardware Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ak2g02-ice-evm-hardware-setup">10.3.5. 66AK2G02 ICE EVM Hardware Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id50">10.3.5.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id51">10.3.5.2. EVM Layout and Key Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id52">10.3.5.3. Supported JTAG Debug Probes (Emulators)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id53">10.3.5.4. Minimal EVM setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id57">10.3.5.5. CCS Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id60">10.3.5.6. Useful Resources and Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#evmk2e-hardware-setup-guide">10.3.6. EVMK2E Hardware Setup Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hardware-setup">10.3.6.1. Hardware Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dip-switch-and-bootmode-configurations">10.3.6.2. DIP Switch and Bootmode Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#evm-k2e-how-to-guides">10.3.6.3. EVM K2E How To Guides</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#evmk2h-hardware-setup-guide">10.3.7. EVMK2H Hardware Setup Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id61">10.3.7.1. Hardware Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bmc-in-field-update">10.3.7.2. BMC In-Field Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">10.3.7.3. DIP Switch and Bootmode Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connect-to-evmk2h-using-ccs">10.3.7.4. Connect to EVMK2H using CCS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tmdsevm6657l-evm-hardware-setup-guide">10.3.8. TMDSEVM6657L EVM Hardware Setup Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hardware-setup-overview">10.3.8.1. Hardware Setup Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware-setup-steps">10.3.8.2. Hardware Setup Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-mode-dip-switch-settings">10.3.8.3. Boot Mode Dip Switch Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tmdxevm6670l-evm-hardware-setup">10.3.9. TMDXEVM6670L EVM Hardware Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id68">10.3.9.1. Hardware Setup Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id69">10.3.9.2. Hardware Setup Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id70">10.3.9.3. Boot Mode Dip Switch Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tmdxevm6678l-evm-hardware-setup-guide">10.3.10. TMDXEVM6678L EVM Hardware Setup Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id71">10.3.10.1. Hardware Setup Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id72">10.3.10.2. Hardware Setup Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id73">10.3.10.3. Boot Mode Dip Switch Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#omap-l138-c6748-lcdk-hardware-setup">10.3.11. OMAP-L138/C6748 LCDK Hardware Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id74">10.3.11.1. Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux-quick-start-guide">10.3.11.2. Linux Quick Start Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-the-lcdk-to-code-composer-studio">10.3.11.3. Connecting the LCDK to Code Composer Studio</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#omap-l137-c6747-evm-hardware-setup-guide">10.3.12. OMAP-L137/C6747 EVM Hardware Setup Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-hardware">10.3.12.1. Setting up the Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-to-a-console-window">10.3.12.2. Connecting to a Console Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-to-ccs">10.3.12.3. Connecting to CCS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#am335x-ice-evm-hardware-setup">10.3.13. AM335x ICE EVM Hardware Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id79">10.3.13.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id80">10.3.13.2. EVM Layout and Key Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id81">10.3.13.3. Quick Start Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-configuration">10.3.13.4. Boot Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-the-am3359-ice-to-code-composer-studio">10.3.13.5. Connecting the AM3359 ICE to Code Composer Studio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-board-diagnostics">10.3.13.6. Running Board Diagnostics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#amic110-ice-evm-hardware-setup">10.3.14. AMIC110 ICE EVM Hardware Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id82">10.3.14.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id83">10.3.14.2. EVM Layout and Key Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id84">10.3.14.3. Quick Start Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id85">10.3.14.4. Boot Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-the-amic110-ice-to-code-composer-studio">10.3.14.5. Connecting the AMIC110 ICE to Code Composer Studio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id86">10.3.14.6. Running Board Diagnostics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ak2g-audio-dc-addon">10.3.15. 66AK2G Audio DC AddOn</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="How_to_Guides.html#taking-the-c66x-out-of-reset-with-linux-running-on-the-arm-a15">10.4. Taking the C66x Out Of Reset with Linux Running on the ARM A15</a></li>
<li class="toctree-l2"><a class="reference internal" href="How_to_Guides.html#setup">10.5. Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="How_to_Guides.html#flashing-and-boot">10.6. Flashing and Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="How_to_Guides.html#porting">10.7. Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="How_to_Guides.html#system-integration">10.8. System Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">11. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation_Tarball.html">12. Documentation Tarball</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Processor SDK RTOS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="How_to_Guides.html">10. How to Guides</a> &raquo;</li>
      
    <li>10.1. Target</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="target">
<h1>10.1. Target<a class="headerlink" href="#target" title="Permalink to this headline">¶</a></h1>
<div class="section" id="run-ipc-examples-on-am572x">
<h2>10.1.1. Run IPC Examples on AM572x<a class="headerlink" href="#run-ipc-examples-on-am572x" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dra7xx-am572xx-ipc-examples">
<h3>10.1.1.1. DRA7xx/AM572xx IPC Examples<a class="headerlink" href="#dra7xx-am572xx-ipc-examples" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="ipc-hello-example">IPC Hello Example:</p>
<p><strong>ex01_hello</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The following examples demonstrate some of the rudimentary IPC
capabilities. They are mostly two processors examples. These examples
may be built for any two processors on your device, but only for two
at a time. An IPC Ping example using three processors is also
presented at the end.</p>
<p>Hello example uses the reader/writer design pattern. One processor will
be the reader and the other will be the writer. The reader creates a
message queue and waits on it for messages. The writer opens the
reader’s message queue and sends messages to it. The writer allocates
the message from a shared message pool and the reader returns the
message to the pool. Thus, messages are sent in only one direction.
Default settings of the Hello world example configures DSP1 as the
writer and DSP2 as the reader.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>if Windows 7 machine is used for building these examples,
<strong>GnuWin32</strong> make utility needs to be installed to run make which can be
downloaded from this link
<a class="reference external" href="http://gnuwin32.sourceforge.net/packages/make.htm">http://gnuwin32.sourceforge.net/packages/make.htm</a></p>
</div>
<p>Set <strong>GnuWin32\bin</strong> folder on file path and add a system variable
<strong>XDCTOOLS_JAVA_HOME</strong> to point to “<strong>c:\ti\ccsv6\eclipse\jre</strong>”</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>set PATH=&lt;YOUR_PROCEEDING_PATH&gt;\GnuWin32\bin;%PATH%
set XDCTOOLS_JAVA_HOME=c:\ti\ccsv6\eclipse\jre
</pre></div>
</div>
<p>1. Change to the example folder by entering: cd
~/ti/ipc_nn_nn_nn_nn/examples/DRA7xx_bios_elf/<strong>ex01_hello</strong></p>
<p>2. Open readme.txt file and follow build instructions step-by-step. If
build this example on Ubuntu PC, make sure there is no spaces between
variable name and its value.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DEPOT</span> <span class="p">(</span><span class="n">your</span> <span class="n">depository</span> <span class="n">folder</span> <span class="nl">ex</span><span class="p">:</span> <span class="n">DEPOT</span><span class="o">=/</span><span class="n">Your_Ubuntu_home_folder</span><span class="o">/</span><span class="n">ti</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>BIOS_INSTALL_DIR=$(DEPOT)/bios_n_nn_nn_nn
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>IPC_INSTALL_DIR=$(DEPOT)/ipc_n_nn_nn_nn
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>XDC_INSTALL_DIR=$(DEPOT)/xdctools_n_nn_nn_nn
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>gnu.targets.arm.A15F=$(DEPOT)/ccsv6/tools/compiler/gcc-arm-none-eabi-4_8-2014q3
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ti.targets.elf.C66=$(DEPOT)/ccsv6/tools/compiler/c6000_7.4.14
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ti.targets.arm.elf.M4=$(DEPOT)/ccsv6/tools/compiler/arm_5.2.4
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ti.targets.arp32.elf.ARP32_far=$(DEPOT)/ccsv6/tools/compiler/arm_5.2.4
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>See the following example, and ensure you are using the latest version
of folder names present in ~/ti folder:

DEPOT=/home/Your_Ubuntu_home_folder/ti

# Use the following environment assignment  (Note you must use 32 bit Java even in Ubuntu 14.04 64 bit OS environment)
export XDCTOOLS_JAVA_HOME=/home/Your_Ubuntu_home_folder/ti/ccsv6/eclipse/jre

#### BIOS-side dependencies ####
BIOS_INSTALL_DIR=$(DEPOT)/bios_6_41_04_54
IPC_INSTALL_DIR=$(DEPOT)/ipc_3_36_01_11
XDC_INSTALL_DIR=$(DEPOT)/xdctools_3_31_02_38

#### BIOS-side toolchains ####
gnu.targets.arm.A15F=$(DEPOT)/ccsv6/tools/compiler/gcc-arm-none-eabi-4_8-2014q3
ti.targets.elf.C66=$(DEPOT)/ti-cgt-c6000_8.0.3
ti.targets.arm.elf.M4=$(DEPOT)/ccsv6/tools/compiler/ti-cgt-arm_5.2.4
ti.targets.arp32.elf.ARP32_far=$(DEPOT)/ccsv6/tools/compiler/ti-cgt-arm_5.2.4
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Run make command in current folder to build DSP1 and DSP2 hello examples. Output files are created under debug sub folders.</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>ex01_hello\dsp1\bin\debug</p></li>
<li><p>ex01_hello\dsp2\bin\debug</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Launch target configurations.</p></li>
<li><p>Right click CortexA15_0 and connect target.</p></li>
<li><p>On CCS –&gt; Scripts –&gt; AM572 Multicore Initialization –&gt; Run AM572x Multicore EnableAllCore</p></li>
<li><p>Initialize DDR configuration. On CCS –&gt; Scripts –&gt; DDR configurations –&gt; AM572_DDR3_532MHz_config</p></li>
<li><p>Load DSP1 Hello Example hello_dsp1.xe66 (writer)file on DSP1.</p></li>
<li><p>Load DSP2 Hello Example hello_dsp2.xe66 (reader) file on DSP2.</p></li>
<li><p>Run both DSP1 and DSP2.</p></li>
<li><p>On CCS –&gt; Tools –&gt; RTOS Object view (ROV).</p></li>
<li><p>Suspend (halt) DSP1 to view test messages on ROV Viewable Modules –&gt;LoggerBuf Refer below image of ROV log messages.</p></li>
</ol>
<img alt="../_images/Hello_dsp2.png" src="../_images/Hello_dsp2.png" />
<ol class="arabic simple" start="13">
<li><p>Suspend (halt) DSP2 and click on ROV icon to view log messages.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="ipc-message-queue-example">IPC Message Queue Example:</p>
<p><strong>ex02_messageq</strong></p>
<p>Message queue example sends round-trip message from client to server and
back. MessageQ example uses client/server pattern. It is a two
processors example: the HOST and DSP processors. Either DSP1 or DSP2 can
be built for testing.</p>
<p>The DSP processor is configured as server. It creates a named message
queue. The server does not open any queues because it extracts the
return address from the message header. The server returns all messages
to the sender. It does not access the message pool.</p>
<p>The HOST processor is configured as client application. The client
creates an anonymous message queue. The client also creates and manages
the message pool. The client’s return address is set in the message
header for each message before sending it to the server.</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Change to messageQ folder example by enter:</dt><dd><p>cd  ~/ti/ipc_nn_nn_nn_nn/examples/DRA7xx_bios_elf/<strong>ex02_messageQ</strong></p>
</dd>
</dl>
</li>
</ol>
<p>2. Open readme.txt file and follow build instructions step-by-step. Make
sure there is no spaces between variable name and its value. See Hello
World example environment varaible settings for reference.</p>
<ol class="arabic simple" start="3">
<li><p>Run make command in current folder to build DSP1 and HOST hello examples. Output files are created under debug sub folders</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>ex02_messageq\host\bin\debug : HOST A15 binary</p></li>
<li><p>ex02_messageq\dsp1\bin\debug : C66x binary</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Launch target configurations. Note that BH560USB_M is emulator is used to connect to AM572X EVM.</p></li>
<li><p>Right click CortexA15_0 and connect target.</p></li>
<li><p>On CCS –&gt; Scripts –&gt; AM572 Multicore Initialization –&gt; Run AM572x Multicore EnableAllCore</p></li>
<li><p>Initialize DDR configuration. On CCS –&gt; Scripts –&gt; DDR configurations –&gt; AM572_DDR3_532MHz_config</p></li>
<li><p><strong>Load DSP1</strong> messageQ Example out file(server_dsp1.xe66) onto DSP1.</p></li>
<li><p><strong>Load HOST</strong> messageQ Example out file(app_host.xa15fg) onto ARM CortexA15_0.</p></li>
<li><p>Run both DSP1 and HOST.</p></li>
<li><p>On CCS –&gt; Tools –&gt; RTOS Object view (ROV).</p></li>
<li><p>Suspend (halt) ARM Cortex_A15 to view test messages on ROV Viewable Modules –&gt;LoggerBuf Refer the following ROV message queue screenshot</p></li>
</ol>
<img alt="../_images/MesgQ_arm0.png" src="../_images/MesgQ_arm0.png" />
<ol class="arabic simple" start="13">
<li><p>Suspend (halt) DSP1 and click on ROV icon to view log messages.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="ipc-notify-peer-example">IPC Notify Peer Example:</p>
<p><strong>ex13_notifypeer</strong></p>
<p>Notify peer example only uses notify to communicate to a peer processor.
This is an example of IPC Scalability. It uses the client/server design
pattern. Initially, the example builds only for two processors: HOST and
DSP1. The client runs on HOST and the server runs on DSP1.</p>
<p>The client (HOST) creates an anonymous message queue. The client also
creates and manages its own message pool. And it opens the server
message queue using its name. The client initiates the data flow by
allocating a message from the pool, placing its return address in the
message header and sending the message to the server. It then waits for
the message to be returned. When it receives the return message, the
message is returned to the pool. The client repeats this in a loop.</p>
<p>The server (DSP1) creates a named message queue, then waits on it for
messages. When a message arrives, the server performs the requested
work. When the work is done, the server extracts the return address from
the message header and sends the message back to the client. The server
never opens any message queues and does not access the message pool.</p>
<p>Since DSP1 will need to wait on both the message queue and the notify
queue, we introduce events. The SYS/BIOS event object can be used to
wait on multiple input sources.</p>
<ol class="arabic simple">
<li><p>Change to notify_peer folder example by enter: cd ~/ti/ipc_nn_nn_nn_nn/examples/DRA7xx_bios_elf/<strong>ex13_notifypeer</strong></p></li>
<li><p>Open readme.txt file and follow build instructions step-by-step. Make sure there is no spaces between variable name and its value.</p></li>
<li><p>Run make command in current folder to build DSP1 and HOST notifypeer examples. Output files are created under debug subfolder.</p></li>
<li><p>Launch target configurations. Note that BH560USB_M is emulator is used to connect to AM572X EVM.</p></li>
<li><p>Right click CortexA15_0 and connect target.</p></li>
<li><p>On CCS –&gt; Scripts –&gt; AM572 Multicore Initialization –&gt; Run AM572x Multicore EnableAllCore</p></li>
<li><p>Initialize DDR configuration. On CCS –&gt; Scripts –&gt; DDR configurations –&gt; AM572_DDR3_532MHz_config</p></li>
<li><p><strong>Load DSP1</strong> notifypeer Example out file on DSP1.</p></li>
<li><p><strong>Load HOST</strong> notifypeer Example out file on ARM CortexA15_0.</p></li>
<li><p>Run both DSP1 and CortexA15_0.</p></li>
<li><p>On CCS –&gt; Tools –&gt; RTOS Object view (ROV).</p></li>
<li><p>Suspend (halt) ARM CortexA15_0 to view test messages on ROV Viewable Modules –&gt;LoggerBuf. Refer the following image of ROV log messages</p></li>
</ol>
<img alt="../_images/Notify_peer_arm0.png" src="../_images/Notify_peer_arm0.png" />
<ol class="arabic simple" start="13">
<li><p>Suspend (halt) DSP2 and click on ROV icon to view log messages.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="ipc-ping-example">IPC Ping Example:</p>
<p><strong>ex11_ping</strong></p>
<p>ping example sends a message between all cores in the system. This
example is used to exercise every communication path between all
processors in the system (including local delivery on the current
processor). Ping example is also organized in a suitable manner to
develop an application with different compute units on each processor.</p>
<p>Each executable will create two tasks: 1) the server task, and 2) the
application task. The server task creates a message queue and then waits
on that queue for incoming messages. When a message is received, the
server task simply sends it back to the original sender.</p>
<p>The application task creates its own message queue and then opens every
server message queue in the system (including the server queue on the
local processor). The task sends a message to a server and waits for the
message to be returned. This is repeated for each server in the system
(including the local server).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that presently EVE is not yet supported and therefore,
DSP1/DSP2/HOST are built for testing.</p>
</div>
<p>1. Change to ping folder example by enter: cd
~/ti/ipc_nn_nn_nn_nn/examples/DRA7xx_bios_elf/<strong>ex11_ping</strong></p>
<p>2. Open readme.txt file and follow build instructions step-by-step. Make
sure there is no space between variable name and its value.</p>
<ol class="arabic simple" start="3">
<li><p>Open makefile and remove EVE and IPU from PROC build list.</p></li>
<li><p>Run make command in current folder to build DSP1, DSP2 and HOST ping examples. Output files are created under debug subfolder.</p></li>
<li><p>Launch target configurations. Note that BH560USB_M is emulator is used to connect to AM572X EVM.</p></li>
<li><p>Right click CortexA15_0 and connect target.</p></li>
<li><p>On CCS –&gt; Scripts –&gt; AM572 Multicore Initialization –&gt; Run AM572x Multicore EnableAllCore</p></li>
<li><p>Initialize DDR configuration. On CCS –&gt; Scripts –&gt; DDR configurations –&gt; AM572_DDR3_532MHz_config</p></li>
<li><p><strong>Load DSP1</strong> Ping Example out file on DSP1.</p></li>
<li><p><strong>Load DSP2</strong> Ping Example out file on DSP2.</p></li>
<li><p><strong>Load HOST</strong> ping Example onto ARM CortexA15_0</p></li>
<li><p>Run DSP1, DSP2, and HOST images.</p></li>
<li><p>On CCS –&gt; Tools –&gt; RTOS Object view (ROV).</p></li>
<li><p>Halt DSP1 to view test messages on ROV Viewable Modules –&gt;LoggerBuf Refer below image of ROV log messages</p></li>
</ol>
<img alt="../_images/Ping_dsp1.png" src="../_images/Ping_dsp1.png" />
<ol class="arabic simple" start="15">
<li><p>Suspend (halt) DSP2 and click on ROV icon to view log messages.</p></li>
<li><p>Suspend (halt) ARM CortexA15_0 and click on ROV icon to view log messages.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="expanding-ipc-ping-example">Expanding IPC Ping Example:</p>
<p>To demonstrate the flexibility of IPC architecture, you may include
additional cores to the above example by modifying the make file. For
example, you may add IPU1 in the list of processor in the make file as:
DSP1, DSP2, <strong>IPU1,</strong> HOST. After a clean build, the appropriate
configuration and output executable files will be generated that allow
passing messages between DSP1, DSP2, IPU1 and Host. Procedures are the
same as described in the previous example with the exception of
additional steps to load the IPU1 core with the corresponding executable
and running it in conjunction with DSP1, DSP2 and HOST.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During build process using IPU1, you may encounter a message
indicating <strong>rtsv7M4_T_le_eabi.lib</strong> library is missing. This is a know
issue and is being tracked by <strong>SDCOM00118417</strong> IR. However, you may
create this missing library by going to the compiler installation’s
<strong>lib</strong> directory and execute the following command to regenerate all
required libraries:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">mklib</span> <span class="o">--</span><span class="n">all</span>
</pre></div>
</div>
</div>
<p>The following example depicts a typical host communications protocol
with other IPC apps (dsp1, dsp2, ipu1) <strong>Note that the following HOST
communications list has been rearranged to further clarify the type of
communications between various cores</strong>. Typically these messages arrive
at different intervals depending on each core processes execution time.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>    <span class="n">xdc</span><span class="p">.</span><span class="n">runtime</span><span class="p">.</span><span class="n">Main</span>    <span class="o">--&gt;</span> <span class="nl">main</span><span class="p">:</span>
<span class="mi">2</span>    <span class="n">xdc</span><span class="p">.</span><span class="n">runtime</span><span class="p">.</span><span class="n">Main</span>    <span class="nl">main</span><span class="p">:</span> <span class="n">ipc</span> <span class="n">ready</span>
<span class="mi">3</span>    <span class="n">xdc</span><span class="p">.</span><span class="n">runtime</span><span class="p">.</span><span class="n">Main</span>    <span class="nl">MainHost_svrTskFxn</span><span class="p">:</span>
<span class="mi">4</span>    <span class="n">SvrHost</span>    <span class="o">--&gt;</span> <span class="nl">SvrHost_setup</span><span class="p">:</span>
<span class="mi">5</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_setup</span><span class="p">:</span> <span class="n">slave</span> <span class="n">is</span> <span class="n">ready</span>
<span class="mi">6</span>    <span class="n">SvrHost</span>    <span class="o">&lt;--</span> <span class="nl">SvrHost_setup</span><span class="p">:</span>
<span class="mi">7</span>    <span class="n">SvrHost</span>    <span class="o">--&gt;</span> <span class="nl">SvrHost_run</span><span class="p">:</span>
<span class="mi">8</span>    <span class="n">xdc</span><span class="p">.</span><span class="n">runtime</span><span class="p">.</span><span class="n">Main</span>    <span class="o">--&gt;</span> <span class="nl">MainHost_appTskFxn</span><span class="p">:</span>
<span class="mi">9</span>    <span class="n">AppHost</span>    <span class="o">--&gt;</span> <span class="nl">AppHost_setup</span><span class="p">:</span>

<span class="mi">10</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_setup</span><span class="p">:</span> <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>     <span class="n">opened</span> <span class="n">server</span> <span class="n">queue</span>
<span class="mi">11</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_setup</span><span class="p">:</span> <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>     <span class="n">opened</span> <span class="n">server</span> <span class="n">queue</span>
<span class="mi">12</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_setup</span><span class="p">:</span> <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>     <span class="n">opened</span> <span class="n">server</span> <span class="n">queue</span>
<span class="mi">28</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_setup</span><span class="p">:</span> <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>     <span class="n">opened</span> <span class="n">server</span> <span class="n">queue</span>

<span class="mi">32</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">34</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">36</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">38</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">40</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>

<span class="mi">33</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">35</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">37</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">39</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">41</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>

<span class="mi">13</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">14</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">15</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">16</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">17</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">0</span>

<span class="mi">42</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">44</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">46</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">48</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">50</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>

<span class="mi">43</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">45</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">47</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">49</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">51</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>

<span class="mi">18</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">19</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">20</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">21</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>
<span class="mi">22</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">1</span>

<span class="mi">52</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">55</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">58</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">61</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">64</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>

<span class="mi">54</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">57</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">60</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">63</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">66</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>

<span class="mi">53</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">56</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">59</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">62</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>
<span class="mi">65</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">2</span>

<span class="mi">67</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">69</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">71</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">73</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">75</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ping</span> <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>

<span class="mi">68</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">70</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">72</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">74</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">76</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_run</span><span class="p">:</span> <span class="n">ack</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>

<span class="mi">23</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">24</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">25</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">26</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>
<span class="mi">27</span>    <span class="n">SvrHost</span>    <span class="nl">SvrHost_run</span><span class="p">:</span> <span class="n">message</span> <span class="n">received</span>     <span class="n">procId</span><span class="o">=</span><span class="mi">3</span>

<span class="mi">29</span>    <span class="n">AppHost</span>    <span class="nl">AppHost_setup</span><span class="p">:</span> <span class="n">slave</span> <span class="n">is</span> <span class="n">ready</span>
<span class="mi">30</span>    <span class="n">AppHost</span>    <span class="o">&lt;--</span> <span class="nl">AppHost_setup</span><span class="p">:</span>
<span class="mi">31</span>    <span class="n">AppHost</span>    <span class="o">--&gt;</span> <span class="nl">AppHost_run</span><span class="p">:</span>
<span class="mi">77</span>    <span class="n">AppHost</span>    <span class="o">&lt;--</span> <span class="nl">AppHost_run</span><span class="p">:</span> <span class="mi">0</span>
<span class="mi">78</span>    <span class="n">AppHost</span>    <span class="o">--&gt;</span> <span class="nl">AppHost_destroy</span><span class="p">:</span>
<span class="mi">79</span>    <span class="n">AppHost</span>    <span class="o">&lt;--</span> <span class="nl">AppHost_destroy</span><span class="p">:</span> <span class="n">status</span><span class="o">=</span><span class="mi">0</span>
<span class="mi">80</span>    <span class="n">xdc</span><span class="p">.</span><span class="n">runtime</span><span class="p">.</span><span class="n">Main</span>    <span class="o">&lt;--</span> <span class="nl">MainHost_appTskFxn</span><span class="p">:</span> <span class="mi">0</span>
<span class="mi">81</span>    <span class="n">xdc</span><span class="p">.</span><span class="n">runtime</span><span class="p">.</span><span class="n">Main</span>    <span class="nl">MainHost_done</span><span class="p">:</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="run-ipc-examples-on-am65xx">
<h2>10.1.2. Run IPC Examples on AM65XX<a class="headerlink" href="#run-ipc-examples-on-am65xx" title="Permalink to this headline">¶</a></h2>
<div class="section" id="am65xx-ipc-examples">
<h3>10.1.2.1. AM65xx IPC Examples<a class="headerlink" href="#am65xx-ipc-examples" title="Permalink to this headline">¶</a></h3>
<p>In the processor SDK release ipc examples can be built from the Processor SDK top level makefile.</p>
<p>See link for building IPC examples</p>
<p><span class="xref std std-ref">ipc-rtos-examples</span></p>
<p>Once the examples are built, they can be run by loading and running the binaries using CCS through JTAG.
Please refer to the section “Advanced AM65x Debug Setup with DMSC Firmware Load” of the TMDX654 EVM Hardware Setup Guide for setting up the JTAG.</p>
<p><a class="reference internal" href="#advanced-am65x-debug-setup-with-dmsc-firmware-load">Advanced AM65x Debug Setup with DMSC Firmware Load</a></p>
<p class="rubric" id="id1">IPC Message Queue Example:</p>
<p><strong>ex02_messageq</strong></p>
<p>Message queue example sends round-trip message from client to server and
back. MessageQ example uses client/server pattern. It is a two
processors example: the HOST and R5F-0 processor.</p>
<p>The R5F-0 processor is configured as server. It creates a named message
queue. The server does not open any queues because it extracts the
return address from the message header. The server returns all messages
to the sender. It does not access the message pool.</p>
<p>The HOST processor is configured as client application. The client
creates an anonymous message queue. The client also creates and manages
the message pool. The client’s return address is set in the message
header for each message before sending it to the server.</p>
<p>Here are the steps to run the example.</p>
<ol class="arabic simple">
<li><p>Follow instructions above to build the IPC examples. The build will create the R5F-0 and HOST binaries under debug and release sub folders
For example</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>AM65XX_bios_elf\ex02_messageq\host\bin\debug\app_host.xa53fg : HOST A15 binary</p></li>
<li><p>AM65XX_bios_elfex02_messageq\r5f-0\bin\debug\server_r5f-0.xer5fg : R5 binary</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Follow procedure to initialize platform and launch target configuration through steps outlined
in the hardware setup guide referred above.</p></li>
<li><p>Right click R5 core 0 and connect target.</p></li>
<li><p><strong>Load R5F-0</strong> messageQ Example out file(server_r5f-0.xer5fg) onto R5F core 0.</p></li>
<li><p>Right click CortexA53_0 and connect target.</p></li>
<li><p><strong>Load HOST</strong> messageQ Example out file(app_host.xa53fg) onto ARM CortexA53_0.</p></li>
<li><p>Run both R5F-0 and HOST.</p></li>
<li><p>On CCS –&gt; Tools –&gt; RTOS Object view (ROV).</p></li>
<li><p>Suspend (halt) ARM Cortex_53 to view test messages on ROV Viewable Modules –&gt;LoggerBuf</p></li>
<li><p>Suspend (halt) R5F-0 and click on ROV icon to view log messages.</p></li>
</ol>
</div>
</div>
<div class="section" id="taking-the-c66x-out-of-reset-with-linux-running-on-the-arm-a15">
<h2>10.1.3. Taking the C66x Out Of Reset with Linux Running on the ARM A15<a class="headerlink" href="#taking-the-c66x-out-of-reset-with-linux-running-on-the-arm-a15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-take-the-c66x-dsp-out-of-reset-with-linux-running-on-a15">
<h3>10.1.3.1. How to take the C66x DSP out of reset with Linux running on A15<a class="headerlink" href="#how-to-take-the-c66x-dsp-out-of-reset-with-linux-running-on-a15" title="Permalink to this headline">¶</a></h3>
<p>This document describes the procedure to bring the C66x core out of reset after
booting Linux, or at the u-boot prompt.These steps are necessary in to order to
load an application on the C66x core, without interfering with the operation of
Linux running on the A15.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to proceeding with the below instructions, please ensure that the latest <span class="xref std std-ref">Emulation Package</span>
is downloaded/installed through CCS. This will ensure the GEL files in your machine
has the reset routines described below.</p>
</div>
<ol class="arabic simple">
<li><p>Once Linux has booted, launch the target configuration.</p></li>
</ol>
<img alt="../_images/Outofreset_1_lali.JPG" src="../_images/Outofreset_1_lali.JPG" />
<ol class="arabic simple" start="2">
<li><p>With the target configuration launched, right click on K2x.ccxml and select
“Show all cores”</p></li>
</ol>
<img alt="../_images/Outofreset_2_lali.JPG" src="../_images/Outofreset_2_lali.JPG" />
<ol class="arabic simple" start="3">
<li><p>This will bring up the Non-Debuggable Devices section.
Right click and connect the CS_DAP_Debug_SS core.</p></li>
</ol>
<img alt="../_images/Outofreset_3_lali.JPG" src="../_images/Outofreset_3_lali.JPG" />
<ol class="arabic simple" start="4">
<li><p>Go to Tools&gt;GEL files and load the evmk2x.gel file by right clicking on the GEL file window.
The Gel file would typically be located in the CCS installation under
\ccsv6\ccs_base\emulation\boards\evmk2x\gel\</p></li>
</ol>
<img alt="../_images/Outofreset_4_lali.png" src="../_images/Outofreset_4_lali.png" />
<ol class="arabic simple" start="5">
<li><p>Once the GEL has been successfully loaded, go to Scripts&gt;default and select K2x_TakeDSPOutofReset.</p></li>
</ol>
<img alt="../_images/Outofreset_5_lali.png" src="../_images/Outofreset_5_lali.png" />
<ol class="arabic simple" start="6">
<li><p>At this point the console would indicate that the DSP is out of reset.</p></li>
</ol>
<img alt="../_images/Outofreset_6_lali.png" src="../_images/Outofreset_6_lali.png" />
<ol class="arabic simple" start="7">
<li><p>Now the DSP cores can be right-clicked and connected successfully.</p></li>
</ol>
<img alt="../_images/Outofreset_7_lali.png" src="../_images/Outofreset_7_lali.png" />
</div>
<div class="section" id="target-configuration">
<h3>10.1.3.2. Target Configuration<a class="headerlink" href="#target-configuration" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once the DSP core is connected following the above out of reset routine, the DDR and PLL settings
done by u-boot would be overwritten by what’s in the GEL. In order to avoid this, please ensure that
the gel is NOT preloaded on the DSP core in the ccxml by leaving the initialization script blank.</p>
</div>
<img alt="../_images/Outofreset_8_lali.JPG" src="../_images/Outofreset_8_lali.JPG" />
</div>
</div>
<div class="section" id="rtos-customization-using-an-external-input-to-trigger-an-interrupt-on-am57x">
<h2>10.1.4. RTOS Customization: using an external input to trigger an interrupt on AM57x<a class="headerlink" href="#rtos-customization-using-an-external-input-to-trigger-an-interrupt-on-am57x" title="Permalink to this headline">¶</a></h2>
<p>This note explains how to develop an example using a General-Purpose Input/Output (GPIO) pin to capture an external input event and generate an interrupt by modifying an existing RTOS GPIO driver LED blinking example. The hardware setup, software development procedures and testing are done using TI AM572x IDK EVM. The same process can be extended to other TI Sitara devices, TI EVMs or custom platforms as well.</p>
<div class="section" id="hardware">
<h3>10.1.4.1. Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.ti.com/tool/TMDXIDK5728">The AM572x Industrial Development
Kit (IDK)</a> is used here for developing the example. The same expect to work with the <a class="reference external" href="http://www.ti.com/tool/TMDSIDK574">AM574x
IDK</a> as well.</p>
<p>From the <a class="reference external" href="http://www.ti.com/lit/ug/sprui64c/sprui64c.pdf">AM572x IDK EVM hardware
user guide</a>, the card has 3 push buttons: SW1, SW2 and SW3, but they all are used for different purposes. However, the card has a 60-pin female expansion connector J21, pins that are not used may be dedicated for GPIO input test purpose. Here J21 pin 4 is selected based on the following analysis:</p>
<ul class="simple">
<li><p>The Pin 4 signal is labeled as GPMC_CS0 and is connected to AM572x chip ball T1 as shown in the schematic:</p></li>
</ul>
<img alt="../_images/J21_gpio_input.png" src="../_images/J21_gpio_input.png" />
<img alt="../_images/gpmc_cs0_t1.png" src="../_images/gpmc_cs0_t1.png" />
<ul class="simple">
<li><p>From the AM5728 datasheet, T1 ball can be configured as GPMC_CS0 or GPIO2_19 based on different PINMUX modes.</p></li>
</ul>
</div>
<div class="section" id="software">
<h3>10.1.4.2. Software<a class="headerlink" href="#software" title="Permalink to this headline">¶</a></h3>
<p>The GPIO LED blink example is served as the reference example and the test is developed on the ARM A15 core, it should work for other cores. This section discusses several typical steps involved in the software development work:</p>
<ul class="simple">
<li><p>PinMux configuration</p></li>
<li><p>PRCM setup</p></li>
<li><p>Re-build board library</p></li>
<li><p>Application software development</p></li>
</ul>
<p><strong>PinMux configuration</strong></p>
<p>The default PinMux file has to be modified for GPIO2_19 pin usage:</p>
<ul class="simple">
<li><p>Use the PinMux Utility to open the default PinMux file pdk_am57xx_1_0_x\packages\ti\board\src\idkAM572x\idkAM572x_SR2.0.pinmux (for the latest Rev 1.3B EVM)</p></li>
<li><p>Select GPIO, then MyGPIO2:</p></li>
</ul>
<img alt="../_images/pinmux_gpio_1.png" src="../_images/pinmux_gpio_1.png" />
<ul class="simple">
<li><p>Then, scroll down, set gpio2_19 with ball #T1, pull up and Rx direction.</p></li>
<li><p>Finally, select Category filter as “SR2.0 – Platform Development Kit (PDK) and download the generated files.</p></li>
</ul>
<img alt="../_images/pinmux_gpio_2.png" src="../_images/pinmux_gpio_2.png" />
<ul class="simple">
<li><p>Four new files should be generated, with the only difference  being a new pin configuration added in boardPadDelayInit.c file:</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span> <span class="cm">/* GPIO2 - gpio2_19 on T1 - MyGPIO2 */</span>
<span class="p">{</span><span class="mh">0x14B4</span><span class="p">,</span> <span class="mh">0x6000E</span><span class="p">,</span> <span class="p">{</span><span class="mh">0x0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}},</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Replace the same files under pdk_am57xx_1_0_x\packages\ti\board\src\idkAM572x with the new ones.</p></li>
</ul>
<p><strong>PRCM setup</strong></p>
<p>Setup of the Power, Reset and Clock Management (PRCM) domain for newly added GPIO2 is required. The application code calls Board_init() API with a BOARD_INIT_MODULE_CLOCK flag to enable the clock domain. It is implemented in the Board_moduleClockInit() function inside pdk_am57xx_1_0_x\packages\ti\board\source\idkAM572x\idkAM572x_clock.c. It is found that GPIO2 is enabled already and no further code needed.</p>
<p><strong>Re-build board library</strong></p>
<p>The board library must be recompiled for the changes to take effect. This has several major steps:</p>
<ul class="simple">
<li><p>Setup the build environment by running setupenv script</p></li>
<li><p>Build the library with make command (e.g. “make board”) and the output will be under pdk_am57xx_1_0_x\packages\ti\board\lib\idkAM572x\a15\release</p></li>
</ul>
</div>
<div class="section" id="application-software-development">
<h3>10.1.4.3. Application software development<a class="headerlink" href="#application-software-development" title="Permalink to this headline">¶</a></h3>
<p>The GPIO LED blinking example (GPIO_LedBlink_idkAM572x_armTestProject) is used as the reference. The CCS project can be created by using pdkprojectcreate script, such as “pdkprojectcreate AM572x idkAM572x little gpio all arm”. Check <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_overview.html#rebuilding-components">PDK Example and Test Project Creation</a> for details.</p>
<p>This LED blink example uses 2 GPIO pins. The first pin is used to periodically generate an interrupt. The second pin is an output pin connected to an onboard LED, which toggles between low and high inside the interrupt ISR, thus driving the LED. Note the first pin doesn’t accept any external input, but using software to write a register (GPIO_IRQSTATUS_RAW_n) to generate interrupt.</p>
<p>Also note from GPIO_idkAM572x_board.c, the rising edge is configured to generate interrupt:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">GPIO_PinConfig</span> <span class="n">gpioPinConfigs_1p3</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="cm">/* Input pin with interrupt enabled */</span>
  <span class="n">GPIO_DEVICE_CONFIG</span><span class="p">(</span><span class="n">GPIO_GRN_LED_PORT_NUM_1P3</span><span class="p">,</span> <span class="n">GPIO_GRN_LED_PIN_NUM_1P3</span><span class="p">)</span> <span class="o">|</span>
  <span class="n">GPIO_CFG_IN_INT_RISING</span> <span class="o">|</span> <span class="n">GPIO_CFG_INPUT</span><span class="p">,</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>After understanding how the reference example works, the code can be modified to use the first pin to receive external input and trigger the interrupt, then the second pin works the same way to toggle the LED, visualizing the event input.</p>
<p>Code modifications:
•       GPIO_board.h: this file defines the GPIO pins for the test, the first pin needs to be updated</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define GPIO_INTR_LED_BASE_ADDR_1P3      (CSL_MPU_GPIO2_REGS)</span>
<span class="cp">#define GPIO_LED_PIN_NUM_1P3             (0x13U)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>GPIO_idkAM572x_board.c: this file also defines the GPIO pins for the test, the first pin needs to be updated</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* GPIO Definitions specific Rev1p3 Board */</span>
<span class="cm">/* GPIO pin number connected to the green LED */</span>
<span class="cp">#define GPIO_GRN_LED_PIN_NUM_1P3    (0x13)</span>

<span class="cm">/* GPIO port number connected to the green LED */</span>
<span class="cp">#define GPIO_GRN_LED_PORT_NUM_1P3   (0x02)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>main_led_blink.c: this is the main test program. The change is high-lighted in black, while the original code is in grey.</p></li>
</ul>
<ol class="arabic simple">
<li><p>Inside void gpio_test(UArg arg0, UArg arg1) routine there is a while(1) loop that continuously triggers the interrupt by software write. Since the new example relies on the external input event to trigger it, one can simply add another while(1) in front of it to block the original loop:</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>while(1);  //New added loop
while(1)
    {
            if defined(SOC_AM574x) || defined(SOC_AM572x) || defined(SOC_AM571x)|| defined(SOC_AM335x) || defined(SOC_AM437x)
            #if defined (idkAM572x) || defined (idkAM574x)
              ….
}
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Also inside the same void gpio_test(UArg arg0, UArg arg1) routine, one may add a debounce control before the test loop:</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Write high to gpio pin to control LED1 */</span>
<span class="n">GPIO_write</span><span class="p">((</span><span class="n">USER_LED1</span><span class="p">),</span> <span class="n">GPIO_PIN_VAL_HIGH</span><span class="p">);</span>

<span class="cm">/* Add new debounce code here */</span>
<span class="n">GPIOAppUpdateConfig</span><span class="p">(</span><span class="o">&amp;</span><span class="n">gpioBaseAddr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">gpioPin</span><span class="p">);</span>
<span class="n">GPIODebounceFuncControl</span><span class="p">(</span><span class="n">gpioBaseAddr</span><span class="p">,</span> <span class="n">gpioPin</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">GPIODebounceTimeConfig</span><span class="p">(</span><span class="n">gpioBaseAddr</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>

<span class="n">AppDelay</span><span class="p">(</span><span class="n">DELAY_VALUE</span><span class="p">);</span>

<span class="n">GPIO_log</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s"> GPIO Led Blink Application </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>After all the code changes, rebuild the test application. A GPIO_LedBlink_idkAM572x_armTestProject.out should be generated.</p>
</div>
<div class="section" id="test">
<h3>10.1.4.4. Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p><strong>Test Setup</strong>
The test setup using AM572x IDK EVM is depicted below:</p>
<img alt="../_images/gpio_test.png" src="../_images/gpio_test.png" />
<ul class="simple">
<li><p>The EVM is powered with a +5V power supply</p></li>
<li><p>A micro USB cable is connected to the host PC for on-board XDS100v2 JTAG connection and UART console.</p></li>
<li><p>A wire is connected to J21 pin4 as the event input. Another wire is connected to J21 pin 60 as the digital ground. When the two wires touch each other, pin 4 goes low, creating a GPIO falling edge. On the other hand, when the two wires are not touching, pin 4 goes high, creating a GPIO rising edge.</p></li>
</ul>
<p><strong>Test Procedure</strong></p>
<ul class="simple">
<li><p>Connect to the A15_0 with a JTAG emulator and use the default GEL file to initialize the SOC.</p></li>
<li><p>Load the test application (GPIO_LedBlink_idkAM572x_armTestProject.out) and run.</p></li>
<li><p>Touch the two wires, then un-touch, the LED should flip the status and keep steady until next touch, un-touch cycle.</p></li>
</ul>
</div>
</div>
<div class="section" id="run-applications-from-ddr-on-r5-cores">
<h2>10.1.5. Run applications from DDR on R5 cores<a class="headerlink" href="#run-applications-from-ddr-on-r5-cores" title="Permalink to this headline">¶</a></h2>
<p id="run-apps-from-ddr-on-r5-cores">Once the R5 core is out of reset, the R5 defaults to no execute permissions for
the DDR memory space. The side effect of this is,  that all code, from entry point
till the code that sets up the MPU (Memory Protection Unit), has to be run from
internal memory.</p>
<div class="section" id="run-bios-applications-from-ddr-on-r5">
<span id="run-bios-app-from-ddr-on-r5"></span><h3>10.1.5.1. Run BIOS Applications from DDR on R5<a class="headerlink" href="#run-bios-applications-from-ddr-on-r5" title="Permalink to this headline">¶</a></h3>
<p>In BIOS, the application sets up the MPU as per the memory configuration specified
in the <a href="#id2"><span class="problematic" id="id3">*</span></a>.xs file (that is referred to in the applications bios config file).  Once the
MPU is setup by the app, the rest of the code can run from DDR.</p>
<p>To ensure that all code from entry point to MPU setup is run from internal memory, the
text sections of the following libs must be placed in internal memory using the application’s linker
command file.</p>
<ul class="simple">
<li><p><a href="#id4"><span class="problematic" id="id5">*</span></a>sysbios.aer5f(.text)</p></li>
<li><p><a href="#id6"><span class="problematic" id="id7">*</span></a>boot.aer5f(.text)</p></li>
<li><p><a href="#id8"><span class="problematic" id="id9">*</span></a>auto_init.aer5f(.text)</p></li>
<li><p><a href="#id10"><span class="problematic" id="id11">*</span></a>&lt;app&gt;_per5f.oer5f(.text)</p></li>
</ul>
<p>Refer <a class="reference external" href="https://git.ti.com/keystone-rtos/emac-lld/blobs/master/test/EmacLoopbackTest/am65xx/emac_linker_r5.lds">emac_linker_r5.lds</a>
for an example.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that you need to replace <a href="#id12"><span class="problematic" id="id13">*</span></a>&lt;app&gt;_per5f.oer5f with the corresponding
file for your application. For eg, if the application’s .cfg file is emacUnitTest_r5.cfg,
then the .oer5f file will be named emacUnitTest_r5_per5f.oer5f</p>
</div>
<p>You also need to update the <a href="#id14"><span class="problematic" id="id15">*</span></a>.xs file referred to by the applications .cfg file
to make sure that the DDR has execute privileges. Please refer <a class="reference external" href="http://git.ti.com/keystone-rtos/processor-pdk-build/blobs/master/am65xx/r5_mpu.xs">r5_mpu.xs</a>
for an example memory configuration. You could also make the applications .cfg
file refer to the common .xs file, as shown in the example
<a class="reference external" href="https://git.ti.com/keystone-rtos/emac-lld/blobs/master/test/EmacLoopbackTest/am65xx/emacUnitTest_r5.cfg">emacUnitTest_r5.cfg</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Once you update the .xs file, please note remember to delete <a href="#id16"><span class="problematic" id="id17">*</span></a>&lt;app&gt;_per5f.oer5f
from the applications <a href="#id18"><span class="problematic" id="id19">*</span></a>configuro directory, so that it is autogenerated again.
If you simply do a clean build, <a href="#id20"><span class="problematic" id="id21">*</span></a>&lt;app&gt;_per5f.oer5f will not be updated to reflect the
changes in the <a href="#id22"><span class="problematic" id="id23">*</span></a>.xs file.</p>
</div>
</div>
<div class="section" id="run-baremetal-applications-from-ddr-on-r5">
<span id="run-baremetal-app-from-ddr-on-r5"></span><h3>10.1.5.2. Run Baremetal Applications from DDR on R5<a class="headerlink" href="#run-baremetal-applications-from-ddr-on-r5" title="Permalink to this headline">¶</a></h3>
<p>Baremetal applications have similar restrictions on running code from
internal memory till the MPU is configured, just like BIOS applications.
For best comaptibility, however, make sure that the entry point is
always the reset vector, and that the code that sets up the DDR access
permissions in the MPU resides completely within 0x100 bytes of the
entry point.</p>
<p>For applications that find the default R5 configuration setup by the
CSL sufficient, there is another method that can be used to execute
an application from DDR. If the bootloader (SBL) is re-built using the
SBL_SKIP_MCU_RESET compile option (by enabling the corresponding line
in <a class="reference external" href="https://git.ti.com/keystone-rtos/sbl/blobs/master/sbl_component.mk#line399">sbl_component.mk</a>,
then SBL will branch to the application entry point without resetting the R5 core.</p>
<p>In this scenario, as the  R5 core was already setup when the SBL
invoked CSL init, the app can execute directly from DDR, right from its
entry point. However, the app must take care not to redo the R5 initialization
using CSL init, as the CSL initialization code assumes that the R5 registers are at their
reset default values. This can be done by simply defining an empty __mpu_init function in the
baremetal application. Refer <a class="reference external" href="https://git.ti.com/keystone-rtos/sbl/blobs/master/example/k3MulticoreApp/sbl_smp_r5.asm">sbl_smp_r5.asm</a>
for an example.</p>
</div>
</div>
</div>
<div class="section" id="host">
<h1>10.2. Host<a class="headerlink" href="#host" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setup">
<h2>10.2.1. Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup-ccs-for-evm-and-processor-sdk-rtos">
<span id="processor-sdk-rtos-setup-ccs-label"></span><h3>10.2.1.1. Setup CCS for EVM and Processor-SDK RTOS<a class="headerlink" href="#setup-ccs-for-evm-and-processor-sdk-rtos" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>10.2.1.1.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>This page provides information on configuring CCS to work with both the
EVM and the Processor-SDK for RTOS.</p>
</div>
<div class="section" id="discovering-sdk-products">
<h4>10.2.1.1.2. Discovering SDK products<a class="headerlink" href="#discovering-sdk-products" title="Permalink to this headline">¶</a></h4>
<div class="section" id="ccs-and-sdk-installed-in-same-directory">
<h5>10.2.1.1.2.1. CCS and SDK installed in same directory<a class="headerlink" href="#ccs-and-sdk-installed-in-same-directory" title="Permalink to this headline">¶</a></h5>
<p>After installing the Processor-SDK RTOS, start CCS and it will
automatically detect the newly installed components (<em>products</em>):</p>
<img alt="../_images/CCS-discovered-products.png" src="../_images/CCS-discovered-products.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="ccs-and-sdk-installed-in-different-directories">
<h5>10.2.1.1.2.2. CCS and SDK installed in different directories<a class="headerlink" href="#ccs-and-sdk-installed-in-different-directories" title="Permalink to this headline">¶</a></h5>
<p>If you chose to install the SDK package in a different folder from where
CCS is installed (e.g. C:\TEMP\RTOS-SDK\am57x), then you will need to
add the path to the search path for CCS to locate the new packages. The
screenshots below demonstrate the process to setup the CCS environment;
the sequence for a Linux host is the same.</p>
<div class="section" id="go-to-product-preference">
<h6>10.2.1.1.2.2.1. Go to product preference<a class="headerlink" href="#go-to-product-preference" title="Permalink to this headline">¶</a></h6>
<p>From CCS, select “Window -&gt; Preferences”:</p>
<img alt="../_images/CCS-GP57x-EVM-Custom-Preferences.png" src="../_images/CCS-GP57x-EVM-Custom-Preferences.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="enter-path-to-sdk">
<h6>10.2.1.1.2.2.2. Enter path to SDK<a class="headerlink" href="#enter-path-to-sdk" title="Permalink to this headline">¶</a></h6>
<p>In the Preferences window, select “Code Composer Studio -&gt; RTSC -&gt;
Products” in the panel on the left. Then, press the “Add” button on the
panel on the right:</p>
<img alt="../_images/CCS-GP57x-EVM-Custom-Add.png" src="../_images/CCS-GP57x-EVM-Custom-Add.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="verify-components">
<h6>10.2.1.1.2.2.3. Verify components<a class="headerlink" href="#verify-components" title="Permalink to this headline">¶</a></h6>
<p>Next, verify the newly discovered products. If everything is correct,
press the “Finish” button on the bottom:</p>
<img alt="../_images/CCS-GP57x-EVM-Custom-Finish.png" src="../_images/CCS-GP57x-EVM-Custom-Finish.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="restart-ccs">
<h6>10.2.1.1.2.2.4. Restart CCS<a class="headerlink" href="#restart-ccs" title="Permalink to this headline">¶</a></h6>
<p>When prompted, restart CCS for changes to take effect. You will see
newly discovered products from the custom path.</p>
<img alt="../_images/CCS-GP57x-EVM-Custom-Confirm.png" src="../_images/CCS-GP57x-EVM-Custom-Confirm.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="install-latest-emulation-package-and-sitara-device-support-package">
<h5>10.2.1.1.2.3. Install Latest Emulation Package and Sitara Device Support Package<a class="headerlink" href="#install-latest-emulation-package-and-sitara-device-support-package" title="Permalink to this headline">¶</a></h5>
<p>1. In CCS, navigate to Help -&gt; Check for Updates and select “Sitara device support”
and “TI Emulators” and click Next.</p>
<blockquote>
<div><img alt="../_images/CCS_Check_for_Updates.PNG" src="../_images/CCS_Check_for_Updates.PNG" />
</div></blockquote>
<p>2. Click “Next” again, select “I accept the terms of the license agreements”
and click Finish to begin the installation.</p>
<blockquote>
<div><img alt="../_images/CCS_Updating_Software.png" src="../_images/CCS_Updating_Software.png" />
</div></blockquote>
<p>3. You may be prompted to restart CCS for the updates to take effect. Click “Restart Now” when
prompted to complete the installation.</p>
</div>
<div class="section" id="create-target-configuration-file-for-evm">
<h5>10.2.1.1.2.4. Create Target Configuration File for EVM<a class="headerlink" href="#create-target-configuration-file-for-evm" title="Permalink to this headline">¶</a></h5>
<p>In CCS, you need to create a <em>Target Configuration</em> for your EVM to be
able to connect to the target. This configuration defines your:</p>
<ul class="simple">
<li><p>Connection to the target (XDS, FET, etc.)</p></li>
<li><p>Target device (AM437x GP EVM, AM57x GP EVM, etc.)</p></li>
<li><p>GEL file for hardware initialization. A GEL file is basically a
“batch file” that sets up the CCS debug environment including memory
map, PLL, clock, etc.</p></li>
</ul>
<p>CCS comes with basic configuration that can be used to configure your
particular setup. In the example below, we provide details for a GP
AM437x EVM; configuration information for other supported EVMs are also
provided as needed.</p>
<p>For EVM specific instructions, refer to the <strong>Hardware User’s Guide</strong>
for your <a class="reference external" href="index_release_specific.html#supported-platforms-and-versions">EVM</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Note for K2G devices:</strong> If using CCS v6.1.2 and Keystone2 device
support v1.1.7, 66AK2G02 would not show up in the list of devices when
creating the target configuration. This is due to an incompatibility in
the XML parser in CCS v6.1.2 with the K2G device xml. In order to
work-around this issue, make the change in 66AK2G02.xml as illustrated
below in order to have 66AK2G02 display in the device list. This problem
does not exist in CCS v6.1.3 onwards as the XML parser has been updated.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\ti\ccsv6\ccs_base\common\targetdb\devices\66AK2G02.xml

Line #1

&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
to
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
</pre></div>
</div>
</div>
<div class="section" id="open-new-target-configuration-file">
<h6>10.2.1.1.2.4.1. Open new target configuration file<a class="headerlink" href="#open-new-target-configuration-file" title="Permalink to this headline">¶</a></h6>
<p>From CCS, select “File -&gt; New -&gt; Target Configuration File”:</p>
<img alt="../_images/CCS-GP437x-EVM-New-Target.png" src="../_images/CCS-GP437x-EVM-New-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="select-target-configuration-options">
<h6>10.2.1.1.2.4.2. Select target configuration options<a class="headerlink" href="#select-target-configuration-options" title="Permalink to this headline">¶</a></h6>
<p>The AM437x GP EVM supports embedded XDS100V2 USB Emulation through the
MicroUSB AB connector. Select</p>
<ul class="simple">
<li><p><strong>Connection</strong>: Texas Instruments XDS100v2 USB Debug Probe</p></li>
<li><p><strong>Board or Device</strong>: EVMAM437X</p></li>
</ul>
<img alt="../_images/CCS-GP437x-EVM-Configure-Target.png" src="../_images/CCS-GP437x-EVM-Configure-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Useful Tip</strong></p>
<p>If you enter the starting numbers of your device in the <strong>Board or
Device</strong> field, the list will show the relevant subset.</p>
<p>Here is a table showing configuration information for all supported
EVMs in the Processor-SDK RTOS:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>EVM</p></th>
<th class="head"><p>Connection</p></th>
<th class="head"><p>Board</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AM65x EVM</p></td>
<td><p>Texas Instruments
XDS110 USB Debug
Probe</p></td>
<td><p>GPEVM_AM65x</p></td>
</tr>
<tr class="row-odd"><td><p>AM65x IDK</p></td>
<td><p>Texas Instruments
XDS110 USB Debug
Probe</p></td>
<td><p>IDK_AM65x</p></td>
</tr>
<tr class="row-even"><td><p>GP335x</p></td>
<td><p>External Emulator
Supplied by User. EVM
includes a TI 20 pin
JTAG connector.</p></td>
<td><p>EVMAM3358</p></td>
</tr>
<tr class="row-odd"><td><p>ICE335x</p></td>
<td><p>Texas Instruments
XDS100v2 USB Debug
Probe</p></td>
<td><p>ICE_AM3359</p></td>
</tr>
<tr class="row-even"><td><p>SK335x</p></td>
<td><p>Texas Instruments
XDS100v2 USB Debug
Probe</p></td>
<td><p>SK_AM3358</p></td>
</tr>
<tr class="row-odd"><td><p>BBB</p></td>
<td><p>External Emulator
Supplied by User. EVM
includes a TI 20 pin
JTAG connector.</p></td>
<td><p>BeagleBone_Black</p></td>
</tr>
<tr class="row-even"><td><p>GP437x</p></td>
<td><p>Texas Instruments
XDS100v2 USB Debug
Probe</p></td>
<td><p>EVMAM437X</p></td>
</tr>
<tr class="row-odd"><td><p>IDK437x</p></td>
<td><p>Texas Instruments
XDS100v2 USB Debug
Probe</p></td>
<td><p>IDK_AM437X</p></td>
</tr>
<tr class="row-even"><td><p>GP572x</p></td>
<td><p>External Emulator
Supplied by User. EVM
includes a TI 20 pin
JTAG connector.</p></td>
<td><p>GPEVM_AM572X</p></td>
</tr>
<tr class="row-odd"><td><p>X15</p></td>
<td><p>External Emulator
Supplied by User. EVM
includes a TI 20 pin
JTAG connector.</p></td>
<td><p>GPEVM_AM572X</p></td>
</tr>
<tr class="row-even"><td><p>IDK572x/IDK574x</p></td>
<td><p>Texas Instruments
XDS100V2 USB Debug
Probe
External Emulator
Supplied by User. EVM
includes a 60-pin
MIPI JTAG connector</p></td>
<td><p>IDK_AM572X/IDK_AM574X</p></td>
</tr>
<tr class="row-odd"><td><p>C665x EVM</p></td>
<td><p>Texas Instruments
XDS2xx USB Onboard
Debug Probe</p></td>
<td><p>TMS320C6657</p></td>
</tr>
<tr class="row-even"><td><p>C667x EVM</p></td>
<td><p>L w/ XDC100: Texas
Instruments XDS100v1
USB Emulator
LE/LXE with XDS560:
Blackhawk
XDS560v2-USB
Mezzanine Emulator</p></td>
<td><p>TMS320C6678</p></td>
</tr>
<tr class="row-odd"><td><p>K2E EVM</p></td>
<td><p>Texas Instruments
XDS2xx USB Onboard
Debug Probe</p></td>
<td><p>66AK2E05</p></td>
</tr>
<tr class="row-even"><td><p>K2H EVM</p></td>
<td><p>Texas Instruments
XDS2xx USB Onboard
Debug Probe</p></td>
<td><p>66AK2H12</p></td>
</tr>
<tr class="row-odd"><td><p>K2L EVM</p></td>
<td><p>Texas Instruments
XDS2xx USB Onboard
Debug Probe</p></td>
<td><p>TCI6630K2L</p></td>
</tr>
<tr class="row-even"><td><p>K2G GP EVM</p></td>
<td><p>Texas Instruments
XDS2xx USB Onboard
Debug Probe</p></td>
<td><p>66AK2G02</p></td>
</tr>
<tr class="row-odd"><td><p>OMAPL137 EVM</p></td>
<td><p>Spectrum Digital
XDS510USB Emulator</p></td>
<td><p>OMAPL137SK</p></td>
</tr>
<tr class="row-even"><td><p>OMAPL138 LCDK</p></td>
<td><p>External Emulator
Supplied by User. EVM
includes a TI 14 pin
JTAG connector.</p></td>
<td><p>OMAPL138LCDK</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="save-target-configuration">
<h6>10.2.1.1.2.4.3. Save target configuration<a class="headerlink" href="#save-target-configuration" title="Permalink to this headline">¶</a></h6>
<p>Next, save the target configuration by pressing the <strong>Save</strong> button:</p>
<img alt="../_images/CCS-GP437x-EVM-Save-Target.png" src="../_images/CCS-GP437x-EVM-Save-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="test-target-configuration">
<h6>10.2.1.1.2.4.4. Test target configuration<a class="headerlink" href="#test-target-configuration" title="Permalink to this headline">¶</a></h6>
<p>Next, test the target configuration by pressing the <strong>Test Connection</strong>
button. This will confirm that you have successfully created an emulator
connection with your board.</p>
<img alt="../_images/AM4-GP-test-connection.png" src="../_images/AM4-GP-test-connection.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="view-target-configurations">
<h6>10.2.1.1.2.4.5. View target configurations<a class="headerlink" href="#view-target-configurations" title="Permalink to this headline">¶</a></h6>
<p>From CCS, select “View -&gt; Target Configurations”:</p>
<img alt="../_images/CCS-GP437x-EVM-View-Target.png" src="../_images/CCS-GP437x-EVM-View-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="launch-target-configuration">
<h6>10.2.1.1.2.4.6. Launch target configuration<a class="headerlink" href="#launch-target-configuration" title="Permalink to this headline">¶</a></h6>
<p>Open “User Defined” list and right click on the target configuration
file that was just saved and select “Launch Selected Configuration”:</p>
<img alt="../_images/CCS-GP437x-EVM-Launch-Target.png" src="../_images/CCS-GP437x-EVM-Launch-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="connect-target">
<h6>10.2.1.1.2.4.7. Connect target<a class="headerlink" href="#connect-target" title="Permalink to this headline">¶</a></h6>
<p>After launch, you can connect to a core. For GP AM437x EVM, select
<strong>Cortex A9</strong> and select “Connect Target”:</p>
<img alt="../_images/CCS-GP437x-EVM-Connnect-Target.png" src="../_images/CCS-GP437x-EVM-Connnect-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="success">
<h6>10.2.1.1.2.4.8. Success!<a class="headerlink" href="#success" title="Permalink to this headline">¶</a></h6>
<p>After connecting to target, check the console for status. Typically, the
end of the configuration will indicate success or failure. For GP AM437x
EVM, you will see the message “AM437x GP EVM Initialization is Done”:</p>
<img alt="../_images/CCS-GP437x-EVM-Run-Target.png" src="../_images/CCS-GP437x-EVM-Run-Target.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="additional-notes-for-am57x">
<h5>10.2.1.1.2.5. Additional Notes for AM57x<a class="headerlink" href="#additional-notes-for-am57x" title="Permalink to this headline">¶</a></h5>
<div class="section" id="connect-to-am57x-slave-cores">
<h6>10.2.1.1.2.5.1. Connect to AM57x Slave Cores<a class="headerlink" href="#connect-to-am57x-slave-cores" title="Permalink to this headline">¶</a></h6>
<p>After connecting to the boot master core – typically the ARM core –
you may need to connect to a slave core in order to run code. Depending
on your SOC, the slave core can be</p>
<ul class="simple">
<li><p>DSP C66x</p></li>
<li><p>ARM M4</p></li>
<li><p>PRUSS</p></li>
<li><p>IVAHD</p></li>
</ul>
<p>Typically the slave cores will wait in reset state until the master core
wakes up the slave core to run code. To connect to the slave core on
AM57x, go to <strong>Scripts</strong> menu in CCS Debug View and under <strong>AM572x
MULTICORE Initialization</strong> enable the corresponding sub system clock.
For example, enable <code class="docutils literal notranslate"><span class="pre">DSP11SSClkEnable_API</span></code> for the first DSP core.
After running the clock enable option, you can connect to the core.</p>
<img alt="../_images/Multicore-Enable.jpg" src="../_images/Multicore-Enable.jpg" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="timer-suspend-control-options-for-dsp">
<h6>10.2.1.1.2.5.2. Timer Suspend Control Options for DSP<a class="headerlink" href="#timer-suspend-control-options-for-dsp" title="Permalink to this headline">¶</a></h6>
<p>On AM57xx devices, all the timers on the chip have their suspend control
signal routed to the A15 core. Which means that if any of the slave
cores are using these timers, the timers will continue to run even when
the slave core has been paused. The timer will only pause when the A15
core is halted.</p>
<p>This is confusing while debugging code on slave cores if you are relying
on timer for logging, inserting delays or if the timer keeps firing
interrupts even when the core is halted. One such scenario occurs with
<em>GPtimer5</em> when DSP developers are using SYS/BIOS. The OS uses
<em>GPtimer5</em> on the DSP and forces a frequency check to confirm the timer
configuration, however the OS can’t gain access to the timer due to the
hook up of the suspend control signals.</p>
<p>Due to this issue the SYS/BIOS developers will need to configure an
additional CCS configuration check to connect the GPTimer suspend
control signal to the DSP as shown in the image below:</p>
<img alt="../_images/GPtimer5_DSPConnect.png" src="../_images/GPtimer5_DSPConnect.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h5>10.2.1.1.2.6. Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h5>
<p>If you face any problems, first check these basic items:</p>
<ul class="simple">
<li><p><strong>Power cycle your target.</strong></p></li>
<li><p><strong>Check the USB cable.</strong> One simple way to do this is to connect
another device to the USB and ensure the cable works.</p></li>
<li><p><strong>Check host driver.</strong> Even with CCS turned off, your host should
list the TI XDS as a USB device. If this does not work, try a
different USB port.</p></li>
<li><p><strong>Latest emulation package.</strong> Ensure that you have the latest
emulation files as specified in the <a class="reference external" href="index_overview.html#emulator-support">Getting Started Guide</a>.</p></li>
</ul>
<p>If this does not resolve your problem, see these additional resources:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/Troubleshooting_CCSv6">Troubleshoot
CCS</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/XDS100#Troubleshooting">Troubleshoot
XDS100</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/XDS200#Troubleshooting">Troubleshoot
XDS200</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/XDS560#Frequently_Asked_Questions">Troubleshoot
XDS560</a></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="update-environment-when-installing-to-a-custom-path">
<span id="processor-sdk-rtos-install-in-custom-path-label"></span><h3>10.2.1.2. Update environment when installing to a custom path<a class="headerlink" href="#update-environment-when-installing-to-a-custom-path" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id24">
<h4>10.2.1.2.1. Overview<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p>This page will provide configuration information if the SDK is installed
in a custom path.</p>
<p><strong>Useful Tip</strong></p>
<p>To avoid changing environment variable for each new shell, modify
environment variable file directly. This file is the <em>setupenv</em> file
located in the SDK root directory.</p>
</div>
<div class="section" id="changes-to-ccs-configuration">
<h4>10.2.1.2.2. Changes to CCS Configuration<a class="headerlink" href="#changes-to-ccs-configuration" title="Permalink to this headline">¶</a></h4>
<p>Installing the SDK in a folder other than where CCS is installed will
require modifications to CCS to be able to discover the SDK. See the
<a class="reference external" href="/index.php/Processor_SDK_RTOS_Setup_CCS">Setup CCS</a> <strong>How To</strong> page
explaining how to update CCS configuration.</p>
</div>
<div class="section" id="rebuilding-the-sdk-rtos">
<h4>10.2.1.2.3. Rebuilding the SDK RTOS<a class="headerlink" href="#rebuilding-the-sdk-rtos" title="Permalink to this headline">¶</a></h4>
<p>Installing the SDK in a folder other than the default (<code class="docutils literal notranslate"><span class="pre">C:\TI</span></code> for
Windows, <code class="docutils literal notranslate"><span class="pre">/home/[user]/ti</span></code> for Linux) requires modifications to SDK
RTOS scripts in order for recompilation and example/test creation to
work properly.</p>
<p>In all the commands below, replace <em>[version]</em> with the appropriate
version of the software/tool.</p>
<div class="section" id="ccs-in-custom-path-and-sdk-rtos-in-default-path">
<h5>10.2.1.2.3.1. CCS in Custom Path and SDK RTOS in Default Path<a class="headerlink" href="#ccs-in-custom-path-and-sdk-rtos-in-default-path" title="Permalink to this headline">¶</a></h5>
<p>CCS installation and toolchain paths can be customized by setting the
TOOLS_INSTALL_PATH environment variable prior to running the SDK level
setupenv script. This feature is used if CCS and the toolchains are
installed somewhere other than the default C:\ti location.</p>
<p>For example, environment configuration assuming CCS is installed to
[os_base]\ti_temp and SDK RTOS has been installed to default path,
[os_base]\ti :</p>
<ul class="simple">
<li><p>Windows</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\&gt; set TOOLS_INSTALL_PATH=C:\ti_temp
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\&gt; cd C:\ti\processor_sdk_rtos_[soc]_[version]
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\ti\processor_sdk_rtos_[soc]_[version]&gt; setupenv.bat
</pre></div>
</div>
<p>Gives the output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="n">set</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span><span class="o">=</span><span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">cg_xml</span><span class="o">/</span><span class="n">bin</span>
<span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">DOXYGEN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="n">set</span> <span class="n">DOXYGEN_INSTALL_PATH</span><span class="o">=</span><span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">Doxygen</span><span class="o">/</span><span class="n">doxygen</span><span class="o">/</span><span class="mf">1.5.1</span><span class="o">-</span><span class="n">p1</span><span class="o">/</span><span class="n">bin</span>
<span class="o">**************************************************************************</span>
<span class="n">Environment</span> <span class="nl">Configuration</span><span class="p">:</span>
    <span class="n">PDK</span> <span class="nl">Directory</span>             <span class="p">:</span> <span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">PDK_AM</span><span class="o">~</span><span class="mi">3</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span>
    <span class="n">CGTOOL</span> <span class="n">INSTALL</span> <span class="nl">Directory</span>  <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">c6000_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A15</span> <span class="nl">Directory</span>   <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A8</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A9</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">M4</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">arm_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">FPULIB_PATH</span>               <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">/</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">fpu</span>
    <span class="nl">CROSS_TOOL_PRFX</span>           <span class="p">:</span> <span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
    <span class="nl">XDC_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">xdctools_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="n">_core</span>
    <span class="nl">BIOS_INSTALL_PATH</span>         <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">bios_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IPC_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ipc_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">EDMA3LLD_BIOS6_INSTALLDIR</span> <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">edma3_lld_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">NDK_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ndk_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IMGLIB_INSTALL_PATH</span>       <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">imglib_c66x_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">UIA_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">uia_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">PROC_SDK_INSTALL_PATH</span>     <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
<span class="o">**************************************************************************</span>
<span class="n">Changing</span> <span class="n">to</span> <span class="kt">short</span> <span class="n">name</span> <span class="n">to</span> <span class="n">support</span> <span class="n">directory</span> <span class="n">names</span> <span class="n">containing</span> <span class="n">spaces</span>
<span class="n">current</span> <span class="nl">directory</span><span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
<span class="n">PROCESSOR</span> <span class="n">SDK</span> <span class="n">BUILD</span> <span class="n">ENVIRONMENT</span> <span class="n">CONFIGURED</span>
<span class="o">**************************************************************************</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Linux</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>$ export TOOLS_INSTALL_PATH=~/ti_temp
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>$ cd ~/ti/processor_sdk_rtos_[soc]_[version]/
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>~/ti/processor_sdk_rtos_[soc]_[version]$ source setupenv.sh
</pre></div>
</div>
<p>Gives the output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="k">export</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;~/ti/cg_xml/bin&quot;</span>
<span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">DOXYGEN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="k">export</span> <span class="n">DOXYGEN_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;~/ti/Doxygen/doxygen/1.5.1-p1/bin&quot;</span>
<span class="o">**************************************************************************</span>
<span class="n">Environment</span> <span class="nl">Configuration</span><span class="p">:</span>
    <span class="n">PDK</span> <span class="nl">Directory</span>             <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">pdk_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">packages</span>
    <span class="n">CGTOOL</span> <span class="n">INSTALL</span> <span class="nl">Directory</span>  <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">c6000_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A15</span> <span class="nl">Directory</span>   <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A8</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A9</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">M4</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">arm_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">FPULIB_PATH</span>               <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">/</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">fpu</span>
    <span class="nl">CROSS_TOOL_PRFX</span>           <span class="p">:</span> <span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
    <span class="nl">XDC_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">xdctools_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="n">_core</span>
    <span class="nl">BIOS_INSTALL_PATH</span>         <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">bios_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IPC_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ipc_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">EDMA3LLD_BIOS6_INSTALLDIR</span> <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">edma3_lld_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">NDK_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ndk_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IMGLIB_INSTALL_PATH</span>       <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">imglib_c66x_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">UIA_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">uia_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">PROC_SDK_INSTALL_PATH</span>     <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>

<span class="n">PROCESSOR</span> <span class="n">SDK</span> <span class="n">BUILD</span> <span class="n">ENVIRONMENT</span> <span class="n">CONFIGURED</span>
<span class="o">*******************************************************************************</span>
</pre></div>
</div>
<p>The <a class="reference external" href="index_overview.html#top-level-makefile">RTOS SDK top level
Makefile</a>
can now be used to rebuild SDK RTOS components with CCS and toolchains
installed in a custom installation path.</p>
</div>
<div class="section" id="ccs-in-default-path-and-sdk-rtos-in-custom-path">
<h5>10.2.1.2.3.2. CCS in Default Path and SDK RTOS in Custom Path<a class="headerlink" href="#ccs-in-default-path-and-sdk-rtos-in-custom-path" title="Permalink to this headline">¶</a></h5>
<p>SDK RTOS component installation paths can be customized by setting the
SDK_INSTALL_PATH variable prior to running the SDK level setupenv
script. This feature is used if the SDK is installed somewhere other
than the default <code class="docutils literal notranslate"><span class="pre">C:\ti</span></code> location.</p>
<p>For example, environment configuration assuming CCS is installed to the
default path, <code class="docutils literal notranslate"><span class="pre">[os_base]\ti</span></code> and SDK RTOS has been installed to
<code class="docutils literal notranslate"><span class="pre">[os_base]\ti_temp</span></code>:</p>
<ul class="simple">
<li><p>Windows</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\&gt; set SDK_INSTALL_PATH=C:/ti_temp
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\&gt; cd C:\ti_temp\processor_sdk_rtos_[soc]_[version]
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\ti_temp\processor_sdk_rtos_[soc]_[version]&gt; setupenv.bat
</pre></div>
</div>
<p>Gives the output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="n">set</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span><span class="o">=</span><span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">cg_xml</span><span class="o">/</span><span class="n">bin</span>
<span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">DOXYGEN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="n">set</span> <span class="n">DOXYGEN_INSTALL_PATH</span><span class="o">=</span><span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">Doxygen</span><span class="o">/</span><span class="n">doxygen</span><span class="o">/</span><span class="mf">1.5.1</span><span class="o">-</span><span class="n">p1</span><span class="o">/</span><span class="n">bin</span>
<span class="o">**************************************************************************</span>
<span class="n">Environment</span> <span class="nl">Configuration</span><span class="p">:</span>
    <span class="n">PDK</span> <span class="nl">Directory</span>             <span class="p">:</span> <span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">PDK_AM</span><span class="o">~</span><span class="mi">3</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span>
    <span class="n">CGTOOL</span> <span class="n">INSTALL</span> <span class="nl">Directory</span>  <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">c6000_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A15</span> <span class="nl">Directory</span>   <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A8</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A9</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">M4</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">arm_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">FPULIB_PATH</span>               <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">/</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">fpu</span>
    <span class="nl">CROSS_TOOL_PRFX</span>           <span class="p">:</span> <span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
    <span class="nl">XDC_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">xdctools_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="n">_core</span>
    <span class="nl">BIOS_INSTALL_PATH</span>         <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">bios_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IPC_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ipc_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">EDMA3LLD_BIOS6_INSTALLDIR</span> <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">edma3_lld_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">NDK_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ndk_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IMGLIB_INSTALL_PATH</span>       <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">imglib_c66x_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">UIA_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">uia_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">PROC_SDK_INSTALL_PATH</span>     <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
<span class="o">**************************************************************************</span>
<span class="n">Changing</span> <span class="n">to</span> <span class="kt">short</span> <span class="n">name</span> <span class="n">to</span> <span class="n">support</span> <span class="n">directory</span> <span class="n">names</span> <span class="n">containing</span> <span class="n">spaces</span>
<span class="n">current</span> <span class="nl">directory</span><span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
<span class="n">PROCESSOR</span> <span class="n">SDK</span> <span class="n">BUILD</span> <span class="n">ENVIRONMENT</span> <span class="n">CONFIGURED</span>
<span class="o">**************************************************************************</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Linux</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>$ export SDK_INSTALL_PATH=~/ti_temp
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>$ cd ~/ti_temp/processor_sdk_rtos_[soc]_[version]/
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>~/ti_temp/processor_sdk_rtos_[soc]_[version]$ source setupenv.sh
</pre></div>
</div>
<p>Gives the output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="k">export</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;~/ti/cg_xml/bin&quot;</span>
<span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">DOXYGEN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="k">export</span> <span class="n">DOXYGEN_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;~/ti/Doxygen/doxygen/1.5.1-p1/bin&quot;</span>
<span class="o">**************************************************************************</span>
<span class="n">Environment</span> <span class="nl">Configuration</span><span class="p">:</span>
    <span class="n">PDK</span> <span class="nl">Directory</span>             <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">pdk_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">packages</span>
    <span class="n">CGTOOL</span> <span class="n">INSTALL</span> <span class="nl">Directory</span>  <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">c6000_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A15</span> <span class="nl">Directory</span>   <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A8</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A9</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">M4</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">arm_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">FPULIB_PATH</span>               <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">/</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">fpu</span>
    <span class="nl">CROSS_TOOL_PRFX</span>           <span class="p">:</span> <span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
    <span class="nl">XDC_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">xdctools_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="n">_core</span>
    <span class="nl">BIOS_INSTALL_PATH</span>         <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">bios_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IPC_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ipc_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">EDMA3LLD_BIOS6_INSTALLDIR</span> <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">edma3_lld_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">NDK_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">ndk_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IMGLIB_INSTALL_PATH</span>       <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">imglib_c66x_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">UIA_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">uia_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">PROC_SDK_INSTALL_PATH</span>     <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">ti_temp</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>

<span class="n">PROCESSOR</span> <span class="n">SDK</span> <span class="n">BUILD</span> <span class="n">ENVIRONMENT</span> <span class="n">CONFIGURED</span>
<span class="o">*******************************************************************************</span>
</pre></div>
</div>
<p>The <a class="reference external" href="index_overview.html#top-level-makefile">RTOS SDK top level
Makefile</a>
can now be used to rebuild SDK RTOS components installed in the custom
installation path.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following known issue impacts this step:
<strong>PRSDK-1263</strong>: PDK AM437x: Make fails on Windows if CCS is installed in
custom path. <strong>Workaround:</strong> Edit the UTILS_INSTALL_DIR variable in
&lt;pdk_root_dir&gt;/packages/ti/starterware/Rules.make to point to the CCS
installation on your Windows PC.</p>
</div>
</div>
<div class="section" id="ccs-and-sdk-rtos-in-custom-path">
<h5>10.2.1.2.3.3. CCS and SDK RTOS in Custom Path<a class="headerlink" href="#ccs-and-sdk-rtos-in-custom-path" title="Permalink to this headline">¶</a></h5>
<p>When CCS and the SDK RTOS are both installed to custom paths the SDK can
be rebuilt by setting the SDK_INSTALL_PATH and TOOLS_INSTALL_PATH
variables prior to running the SDK RTOS top level environment setup
script. The Windows and Linux environment setup scripts can be found in
the following locations, respectively:</p>
<ul class="simple">
<li><p>Windows -
C:\custom\install\path\processor_sdk_rtos_[soc]_[version]\setupenv.bat</p></li>
<li><p>Linux -
/home/[user]/custom/install/path/processor_sdk_rtos_[soc]_[version]/setupenv.sh</p></li>
</ul>
<p>The SDK_INSTALL_PATH and TOOLS_INSTALL_PATH environment variables must
be set to the custom install path <strong>prior to running</strong> the environment
setup script.</p>
<p>For example, environment configuration assuming CCS and the SDK have
been installed to [os_base]\new_sdk_release\ :</p>
<ul class="simple">
<li><p>Windows</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\&gt; set SDK_INSTALL_PATH=C:\new_sdk_release
C:\&gt; set TOOLS_INSTALL_PATH=C:\new_sdk_release
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\&gt; cd C:\new_sdk_release\processor_sdk_rtos_[soc]_[version]
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\new_sdk_release\processor_sdk_rtos_[soc]_[version]&gt; setupenv.bat
</pre></div>
</div>
<p>Gives the output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="n">set</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span><span class="o">=</span><span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">cg_xml</span><span class="o">/</span><span class="n">bin</span>
<span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">DOXYGEN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="n">set</span> <span class="n">DOXYGEN_INSTALL_PATH</span><span class="o">=</span><span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">ti</span><span class="o">/</span><span class="n">Doxygen</span><span class="o">/</span><span class="n">doxygen</span><span class="o">/</span><span class="mf">1.5.1</span><span class="o">-</span><span class="n">p1</span><span class="o">/</span><span class="n">bin</span>
<span class="o">**************************************************************************</span>
<span class="n">Environment</span> <span class="nl">Configuration</span><span class="p">:</span>
    <span class="n">PDK</span> <span class="nl">Directory</span>             <span class="p">:</span> <span class="o">/</span><span class="n">NEW_SD</span><span class="o">~</span><span class="mi">1</span><span class="o">/</span><span class="n">PDK_AM</span><span class="o">~</span><span class="mi">1</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span>
    <span class="n">CGTOOL</span> <span class="n">INSTALL</span> <span class="nl">Directory</span>  <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">c6000_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A15</span> <span class="nl">Directory</span>   <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A8</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A9</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">M4</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">arm_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">FPULIB_PATH</span>               <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">/</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">fpu</span>
    <span class="nl">CROSS_TOOL_PRFX</span>           <span class="p">:</span> <span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
    <span class="nl">XDC_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">xdctools_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="n">_core</span>
    <span class="nl">BIOS_INSTALL_PATH</span>         <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">bios_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IPC_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ipc_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">EDMA3LLD_BIOS6_INSTALLDIR</span> <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">edma3_lld_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">NDK_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ndk_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IMGLIB_INSTALL_PATH</span>       <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">imglib_c66x_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">UIA_INSTALL_PATH</span>          <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">uia_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">PROC_SDK_INSTALL_PATH</span>     <span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
<span class="o">**************************************************************************</span>
<span class="n">Changing</span> <span class="n">to</span> <span class="kt">short</span> <span class="n">name</span> <span class="n">to</span> <span class="n">support</span> <span class="n">directory</span> <span class="n">names</span> <span class="n">containing</span> <span class="n">spaces</span>
<span class="n">current</span> <span class="nl">directory</span><span class="p">:</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
<span class="n">PROCESSOR</span> <span class="n">SDK</span> <span class="n">BUILD</span> <span class="n">ENVIRONMENT</span> <span class="n">CONFIGURED</span>
<span class="o">**************************************************************************</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Linux</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>$ export SDK_INSTALL_PATH=~/new_sdk_release
$ export TOOLS_INSTALL_PATH=~/new_sdk_release
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>$ cd ~/new_sdk_release/processor_sdk_rtos_[soc]_[version]/
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>~/new_sdk_release/processor_sdk_rtos_[soc]_[version]$ source setupenv.sh
</pre></div>
</div>
<p>Gives the output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="k">export</span> <span class="n">CG_XML_BIN_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;~/ti/cg_xml/bin&quot;</span>
<span class="n">Optional</span> <span class="n">parameter</span> <span class="n">not</span> <span class="nl">configured</span> <span class="p">:</span> <span class="n">DOXYGEN_INSTALL_PATH</span>
<span class="n">REQUIRED</span> <span class="k">for</span> <span class="n">xdc</span> <span class="n">release</span> <span class="n">build</span>
<span class="nl">Example</span><span class="p">:</span> <span class="k">export</span> <span class="n">DOXYGEN_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;~/ti/Doxygen/doxygen/1.5.1-p1/bin&quot;</span>
<span class="o">**************************************************************************</span>
<span class="n">Environment</span> <span class="nl">Configuration</span><span class="p">:</span>
    <span class="n">PDK</span> <span class="nl">Directory</span>             <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">pdk_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">packages</span>
    <span class="n">CGTOOL</span> <span class="n">INSTALL</span> <span class="nl">Directory</span>  <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">c6000_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A15</span> <span class="nl">Directory</span>   <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A8</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">A9</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="n">TOOLCHAIN</span> <span class="n">M4</span> <span class="nl">Directory</span>    <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">ti</span><span class="o">-</span><span class="n">cgt</span><span class="o">-</span><span class="n">arm_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">FPULIB_PATH</span>               <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ccsv6</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">/</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">fpu</span>
    <span class="nl">CROSS_TOOL_PRFX</span>           <span class="p">:</span> <span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
    <span class="nl">XDC_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">xdctools_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span><span class="n">_core</span>
    <span class="nl">BIOS_INSTALL_PATH</span>         <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">bios_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IPC_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ipc_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">EDMA3LLD_BIOS6_INSTALLDIR</span> <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">edma3_lld_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">NDK_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">ndk_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">IMGLIB_INSTALL_PATH</span>       <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">imglib_c66x_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">UIA_INSTALL_PATH</span>          <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">uia_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
    <span class="nl">PROC_SDK_INSTALL_PATH</span>     <span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="o">/</span><span class="n">new_sdk_release</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="p">[</span><span class="n">soc</span><span class="p">]</span><span class="n">_</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>

<span class="n">PROCESSOR</span> <span class="n">SDK</span> <span class="n">BUILD</span> <span class="n">ENVIRONMENT</span> <span class="n">CONFIGURED</span>
<span class="o">*******************************************************************************</span>
</pre></div>
</div>
<p>The <a class="reference external" href="index_overview.html#top-level-makefile">RTOS SDK top level Makefile</a>
can now be used to rebuild SDK RTOS components installed in the custom
installation path using CCS and toolchains installed in a custom path as
well.</p>
</div>
</div>
<div class="section" id="rebuilding-the-pdk">
<h4>10.2.1.2.4. Rebuilding the PDK<a class="headerlink" href="#rebuilding-the-pdk" title="Permalink to this headline">¶</a></h4>
<p>Installing the PDK in a folder other than the default (C:TI for
Windows, /home/[user]/ti for Linux) requires modifications to PDK
scripts in order for recompilation and example/test creation to work
properly.</p>
<div class="section" id="ccs-in-custom-path-and-pdk-in-default-path">
<h5>10.2.1.2.4.1. CCS in Custom Path and PDK in Default Path<a class="headerlink" href="#ccs-in-custom-path-and-pdk-in-default-path" title="Permalink to this headline">¶</a></h5>
<p>The instructions provided in the <a class="reference external" href="/index.php/Processor_SDK_RTOS_Install_In_Custom_Path#CCS_in_Custom_Path_and_SDK_RTOS_in_Default_Path">CCS in Custom Path and SDK RTOS in
Default
Path</a>
section can be used to rebuild components at the PDK level. The only
difference is the PDK level setup script should be used instead of the
SDK RTOS level setup script. The PDK level setup scripts are found in
the following locations on Windows and Linux, respectively:</p>
<ul class="simple">
<li><p>Windows -
C:\custom\install\path\pdk_[soc]_[version]\packages\pdksetupenv.bat</p></li>
<li><p>Linux -
/home/[user]/custom/install/path/pdk_[soc]_[version]/packages/pdksetupenv.sh</p></li>
</ul>
</div>
<div class="section" id="ccs-in-default-path-and-pdk-in-custom-path">
<h5>10.2.1.2.4.2. CCS in Default Path and PDK in Custom Path<a class="headerlink" href="#ccs-in-default-path-and-pdk-in-custom-path" title="Permalink to this headline">¶</a></h5>
<p>The instructions provided in the <a class="reference external" href="/index.php/Processor_SDK_RTOS_Install_In_Custom_Path#CCS_in_Default_Path_and_SDK_RTOS_in_Custom_Path">CCS in Default Path and SDK RTOS in
Custom
Path</a>
section can be used to rebuild components at the PDK level. The only
difference is the PDK level setup script should be used instead of the
SDK RTOS level setup script. The PDK level setup scripts are found in
the following locations on Windows and Linux, respectively:</p>
<ul class="simple">
<li><p>Windows -
C:\custom\install\path\pdk_[soc]_[version]\packages\pdksetupenv.bat</p></li>
<li><p>Linux -
/home/[user]/custom/install/path/pdk_[soc]_[version]/packages/pdksetupenv.sh</p></li>
</ul>
</div>
<div class="section" id="ccs-and-pdk-in-custom-path">
<h5>10.2.1.2.4.3. CCS and PDK in Custom Path<a class="headerlink" href="#ccs-and-pdk-in-custom-path" title="Permalink to this headline">¶</a></h5>
<p>The instructions provided in the <a class="reference external" href="/index.php/Processor_SDK_RTOS_Install_In_Custom_Path#CCS_and_SDK_RTOS_in_Custom_Path">CCS and SDK RTOS in Custom
Path</a>
section can be used to rebuild components at the PDK level. The only
difference is the PDK level setup script should be used instead of the
SDK RTOS level setup script. The PDK level setup scripts are found in
the following locations on Windows and Linux, respectively:</p>
<ul class="simple">
<li><p>Windows -
C:\custom\install\path\pdk_[soc]_[version]\packages\pdksetupenv.bat</p></li>
<li><p>Linux -
/home/[user]/custom/install/path/pdk_[soc]_[version]/packages/pdksetupenv.sh</p></li>
</ul>
</div>
</div>
<div class="section" id="creating-pdk-example-test-projects-when-ccs-is-installed-to-custom-path">
<h4>10.2.1.2.5. Creating PDK Example/Test Projects When CCS is Installed to Custom Path<a class="headerlink" href="#creating-pdk-example-test-projects-when-ccs-is-installed-to-custom-path" title="Permalink to this headline">¶</a></h4>
<p>The pdkProjectCreate scripts must be modified in order to build PDK
example and test projects only if CCS has been installed to a custom
path. The modification is the same for both Windows and Linux. Inside
the pdkProjectCreate scripts is a CCS_INSTALL_PATH variable which points
to the Code Composer Studio root directory. This variable must be
redefined to the new location of the CCS root directory if CCS is
installed to a custom path.</p>
<ul class="simple">
<li><p>Windows</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">REM</span> <span class="n">Install</span> <span class="n">Location</span> <span class="k">for</span> <span class="n">CCS</span>
<span class="n">set</span> <span class="n">CCS_INSTALL_PATH</span><span class="o">=</span><span class="s">&quot;C:</span><span class="se">\t</span><span class="s">i\ccsv6&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Linux</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># Install Location for CCS</span>
<span class="k">export</span> <span class="n">CCS_INSTALL_PATH</span><span class="o">=~/</span><span class="n">ti</span><span class="o">/</span><span class="n">ccsv6</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to invoking the pdkProjectCreate script, make sure to start CCS
and register the SDK RTOS components installed. Project creation will
fail if the RTOS SDK components installed to the custom path have not
been registered with CCS. Please see <a class="reference external" href="/index.php/Processor_SDK_RTOS_Setup_CCS#CCS_and_SDK_installed_in_different_directories">CCS and SDK installed in different
directories</a>
for instructions on how to register SDK RTOS components installed to a
custom path with CCS</p>
</div>
</div>
</div>
<div class="section" id="prevent-beaglebone-board-reset-on-jtag-connect">
<h3>10.2.1.3. Prevent BeagleBone board reset on JTAG Connect<a class="headerlink" href="#prevent-beaglebone-board-reset-on-jtag-connect" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://elinux.org/Beagleboard:BeagleBone#Board_Reset_on_JTAG_Connect.28A3.2CA4.2CA5.29">https://elinux.org/Beagleboard:BeagleBone#Board_Reset_on_JTAG_Connect.28A3.2CA4.2CA5.29</a></p>
</div>
<div class="section" id="rebuild-drivers-from-pdk-directory">
<h3>10.2.1.4. Rebuild drivers from PDK directory<a class="headerlink" href="#rebuild-drivers-from-pdk-directory" title="Permalink to this headline">¶</a></h3>
<p>Refer <a class="reference external" href="Overview.html#rebuild-pdk">Rebuilding the PDK</a> for details on rebuilding the PDK components.</p>
</div>
</div>
<div class="section" id="ti-rtos-basics">
<h2>10.2.2. TI RTOS Basics<a class="headerlink" href="#ti-rtos-basics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ti-rtos-tips-tricks">
<h3>10.2.2.1. TI RTOS Tips &amp; Tricks<a class="headerlink" href="#ti-rtos-tips-tricks" title="Permalink to this headline">¶</a></h3>
<div class="section" id="description">
<h4>10.2.2.1.1. Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>The intent of this article is to address common issues that TI RTOS users may run into while configuring SYSBIOS, XDCTools or working with RTSC packages in general on DSP and ARM devices. This is meant to provide insight into build and configuration issue nd must be used as an addendum document by Processor  SDK USer to the <a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_FAQs">SYSBIOS FAQs</a> and <a class="reference external" href="http://rtsc.eclipse.org/docs-tip/XDCtools_User's_Guide">XDCtools/RTSC documentation</a> and <a class="reference external" href="https://training.ti.com/ti-rtos-workshop-series">TI RTOS Training</a></p>
</div>
<div class="section" id="rtsc-diagnostics-understanding-xdc-build-errors">
<h4>10.2.2.1.2. RTSC Diagnostics: Understanding XDC build errors<a class="headerlink" href="#rtsc-diagnostics-understanding-xdc-build-errors" title="Permalink to this headline">¶</a></h4>
<p>Some of the commonly observed XDC errors have been shown below. We try to explain how to understand and take corrective action.</p>
<div class="section" id="xdc-tools-configuro-can-t-locate-the-package-package-name-along-the-path">
<h5>10.2.2.1.2.1. xdc.tools.configuro:  can’t locate the package ‘Package Name’ along the path: …<a class="headerlink" href="#xdc-tools-configuro-can-t-locate-the-package-package-name-along-the-path" title="Permalink to this headline">¶</a></h5>
<p>This indicates that one of the packages that you linked in your BIOS configuration, can`t be located under XDCPATH. The XDC tools uses XDC paths like library search path, so if you run into this issue check that all the component packages have been added to XDCPATH and there is no typo or non-existent paths that you have added to this variable. TI RTSC packages usually have the name ti.&lt;package name&gt;. The packages are named to also sometimes helps locate the package inside the component. For example ‘’’ti.platforms.evmAM335x’’’ is located under BIOS_INSTALL_PATH/packages/’’’ti/platforms/evmAM335x’’’</p>
<p>For example if you are using packages from PDK (SOC driver packages)and BIOS (TI RTOS kernel), IPC (Interprocessor Communication) and NDK (Network development kit) then your XDCPATH needs to have following:</p>
<ul class="simple">
<li><p>BIOS_INSTALL_PATH/packages</p></li>
<li><p>PDK_INSTALL_PATH/packages</p></li>
<li><p>IPC_INSTALL_PATH/packages</p></li>
<li><p>NDK_INSTALL_PATH/packages</p></li>
</ul>
</div>
<div class="section" id="xdc-cfg-sourcedir-build-of-generated-source-libraries-failed-exit-status-2">
<h5>10.2.2.1.2.2. xdc.cfg.SourceDir : Build of generated source libraries failed: exit status = 2:<a class="headerlink" href="#xdc-cfg-sourcedir-build-of-generated-source-libraries-failed-exit-status-2" title="Permalink to this headline">¶</a></h5>
<p>A couple of different reasons could trigger this type of error</p>
<ul class="simple">
<li><p>Make sure there are no whitespaces or non-ASCII characters in any paths referenced by the build tools. In other words, make sure all software packages are installed in paths without spaces, and workspace and project names also do not have spaces or non-ASCII characters. We use gmake to build makefiles, and gmake doesn’t deal well with spaces in directory and file names.</p></li>
<li><p>Take a close look at the CCS build console and ensure that the sh.exe used for the build is the one from the CCS directory. Also check your system PATH variable and see if there is another sh.exe (or gmake.exe) in your system PATH earlier than the one from the CCS installation. If there is one, then that will be used for the build and could cause build errors such as this. Some toolchains that are known to include sh.exe and could cause a conflict are Cygwin, WinAVR, Yagarto.  In this case, remove those conflicting tools from the system PATH or modify the PATH so that the sh.exe and gmake.exe from CCS are seen first.</p></li>
<li><p>Another source of problems related to sh.exe runnig Windows 10 may be Windows Defender. In “Windows Defender Security Centre”, “App and browser control”, “Exploit protection settings” one can add exceptions under “Program settings”. Adding a rule for “sh.exe” to disable/override “Force randomisation for images (Mandatory ASLR)”, “Randomise memory allocations (Bottom-up ASLR)”,  “Validate stack integrity (StackPivot)”.</p></li>
</ul>
</div>
<div class="section" id="xdc-tools-configuro-missing-input-config-script">
<h5>10.2.2.1.2.3. xdc.tools.configuro: missing input config script<a class="headerlink" href="#xdc-tools-configuro-missing-input-config-script" title="Permalink to this headline">¶</a></h5>
<p>The XDCtools build command should normally have the configuration script (.cfg file) passed at the end of the command. If the .cfg is not getting passed correctly, then this message will appear in the CCS build console. This error will then result in other compiler errors further down in the build.</p>
<p>You can confirm if the root cause is the .cfg file not getting passed correctly by looking at the subdir_rules.mk file in the directory Debug (or Release) in your project. The command line that runs configuro usually looks like this: &lt;br&gt;</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;C:/ti/xdctools_3_xx_xx_xx/xs&quot;</span> <span class="o">--</span><span class="n">xdcpath</span><span class="o">=</span><span class="s">&quot;...&quot;</span> <span class="n">xdc</span><span class="p">.</span><span class="n">tools</span><span class="p">.</span><span class="n">configuro</span> <span class="o">-</span><span class="n">o</span> <span class="n">configPkg</span> <span class="o">-</span><span class="n">t</span> <span class="n">ti</span><span class="p">.</span><span class="n">targets</span><span class="p">.</span><span class="n">elf</span><span class="p">.</span><span class="n">C674</span> <span class="o">-</span><span class="n">p</span> <span class="n">ti</span><span class="p">.</span><span class="n">platforms</span><span class="p">.</span><span class="n">evm6747</span>
<span class="o">-</span><span class="n">r</span> <span class="n">release</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;C:/ti/ccsv5/tools/compiler/c6000_x.x.x&quot;</span> <span class="o">--</span><span class="n">compileOptions</span> <span class="s">&quot;-g --optimize_with_debug&quot;</span> <span class="s">&quot;$&lt;&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="schema-files-not-found">
<h5>10.2.2.1.2.4. Schema files not found<a class="headerlink" href="#schema-files-not-found" title="Permalink to this headline">¶</a></h5>
<p>Usually after creating a RTSC package, developers are supposed to run xdc release to generate the package that contains the .sch files but if you accidentally delete the package or the developers requires xdc release to be run in user environment, you can run into this issue. This issue can be resolved by adding XDCtools to your environment PATH variable and running the command xdc release</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>set PATH=$PATH;&lt;XDC_INSTALL_PATH&gt;
xdc release
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Detailed list of ‘’’XDC Error codes’’’ and Troubleshoot can be found here:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://rtsc.eclipse.org/docs-tip/XDCtools_Error_Codes">XDCtools Error Codes</a></p></li>
<li><p><a class="reference external" href="http://rtsc.eclipse.org/docs-tip/Trouble_Shooting">Trouble Shooting</a></p></li>
</ul>
</div>
</div>
<div class="section" id="ti-rtos-platform-configuration">
<h4>10.2.2.1.3. TI RTOS Platform configuration<a class="headerlink" href="#ti-rtos-platform-configuration" title="Permalink to this headline">¶</a></h4>
<div class="section" id="where-does-ti-rtos-application-get-the-platform-definition-and-memory-sections-on-the-soc">
<h5>10.2.2.1.3.1. Where does TI RTOS application get the Platform definition and memory sections on the SOC<a class="headerlink" href="#where-does-ti-rtos-application-get-the-platform-definition-and-memory-sections-on-the-soc" title="Permalink to this headline">¶</a></h5>
<p>When creating a TI RTOS project, the user is required to specify the Platform and target core as part of their RTSC setup as shown below. This shows an example that is created for evmAM335x platform.</p>
<a class="reference internal image-reference" href="../_images/Platfrom_configuration.png"><img alt="../_images/Platfrom_configuration.png" src="../_images/Platfrom_configuration.png" style="width: 469.0px; height: 337.0px;" /></a>
<p>Selection of the platform essentially tell the build tools that the platform defintion should be picked up from the platform for evmAM335x from the directory path bios_x_xx_xx_xxpackagestiplatformsevmAM3359. If you open the Platform.xdc file under the folder path, you can see the default settings provided for this platform. This file combines the baseline AM335x SOC definition under bios_x_xx_xx_xxpackagesticatalogarmcortexa with the board specific setting like clockrate, DDR memory range.</p>
</div>
<div class="section" id="how-to-create-custom-platform-like-ddrless-platforms-to-use-with-ti-rtos-projects">
<h5>10.2.2.1.3.2. How to create custom platform like DDRless platforms to use with TI RTOS projects<a class="headerlink" href="#how-to-create-custom-platform-like-ddrless-platforms-to-use-with-ti-rtos-projects" title="Permalink to this headline">¶</a></h5>
<p>At some point in the application development process, most customers build their own boards, choosing a TI device and adding custom external memory.
You will also need to create your own platform if any of the following items are true:
* You want to customize cache sizes.
* You want to manually override the default section placement.
* You want application to run from on chip device memory.</p>
<p>For such custom boards you will need to create a platform using the platform wizard. The platform wizard is a GUI tool that allows you to easily create a custom platform. Creating a custom platform gives you a lot of flexibility in terms of defining the memory map and selecting default memory segments for section placement. This has been described in detail in following User guides and training links:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ti.com/lit/ug/spruex3q/spruex3q.pdf">Section 7.2.2 in the TI RTOS User guide</a></p></li>
<li><p><a class="reference external" href="http://software-dl.ti.com/public/hpmp/software/app_dev_procsdk_rtos/index.html">Section 10.9 of  Application development with Processor SDK RTOS</a></p></li>
</ul>
</div>
<div class="section" id="how-to-place-code-and-data-sections-in-different-memory-location-than-set-by-default-ti-rtos-platform-configuration">
<h5>10.2.2.1.3.3. How to place code and data sections in different memory location than set by default TI RTOS platform configuration<a class="headerlink" href="#how-to-place-code-and-data-sections-in-different-memory-location-than-set-by-default-ti-rtos-platform-configuration" title="Permalink to this headline">¶</a></h5>
<p>User can place specific code and data sections in desired location by using the following syntax in the configuration (.cfg)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Program</span><span class="p">.</span><span class="n">sectMap</span><span class="p">[</span><span class="s">&quot;.data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Program</span><span class="p">.</span><span class="n">SectionSpec</span><span class="p">();</span>
<span class="cm">/* Set the load address for .data section */</span>
<span class="n">Program</span><span class="p">.</span><span class="n">sectMap</span><span class="p">[</span><span class="s">&quot;.data&quot;</span><span class="p">].</span><span class="n">loadAddress</span> <span class="o">=</span> <span class="mh">0x82000000</span><span class="p">;</span>
<span class="cm">/* Set the run address for .data section */</span>
<span class="n">Program</span><span class="p">.</span><span class="n">sectMap</span><span class="p">[</span><span class="s">&quot;.data&quot;</span><span class="p">].</span><span class="n">runAddress</span> <span class="o">=</span> <span class="mh">0x82010000</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="generic-ti-rtos-questions">
<h4>10.2.2.1.4. Generic TI RTOS questions<a class="headerlink" href="#generic-ti-rtos-questions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="what-is-relationship-between-ti-rtos-and-xdctools-and-rtsc">
<h5>10.2.2.1.4.1. What is relationship between TI RTOS and XDCtools and RTSC<a class="headerlink" href="#what-is-relationship-between-ti-rtos-and-xdctools-and-rtsc" title="Permalink to this headline">¶</a></h5>
<p><a class="reference external" href="http://processors.wiki.ti.com/index.php?title=Category:SYSBIOS">SYSBIOS</a> uses underlying technology provided by Real Time Software Components (RTSC).
* RTSC is an open-source specification within the Eclipse.org ecosystem for providing reusable software components (called “packages”) for use in embedded systems.
* XDCtools is the actual product that contains all the tools necessary for you to use the SYS/BIOS components and configure your application. XDCtools is installed as part of Code Composer Studio (CCS). XDCtools is a separate software component provided by Texas Instruments that provides the underlying
tooling needed for configuring and building SYS/BIOS, NDK, and UIA.</p>
<p>RTSC and XDCtools are important to SYS/BIOS users because:</p>
<ul>
<li><p><a class="reference external" href="http://dev.ti.com/tirex/content/simplelink_cc2640r2_sdk_2_40_00_32/docs/tirtos/sysbios/docs/cdoc/ti/sysbios/package.html">SYS/BIOS_as_a_set_of_RTSC_packages</a> containing the modules that make up the RTOS.</p></li>
<li><p><a class="reference external" href="http://rtsc.eclipse.org/docs-tip/XDCtools_User's_Guide">XDCtools provides configuration tools</a> you use to create and build a static configuration as part of your application. This <a href="#id25"><span class="problematic" id="id26">*</span></a>.cfg configuration file specifies:</p>
<blockquote>
<div><ul class="simple">
<li><p>Which modules from XDCtools, SYS/BIOS, and other components to include in the run-time image.</p></li>
<li><p>What static instances of RTOS objects to create. For example, these include tasks and semaphores.</p></li>
<li><p>Settings for parameter values for modules and objects.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference external" href="http://rtsc.eclipse.org/docs-tip/Overview_of_xdc.runtime#Using_This_Package">XDCtools provides critical APIs</a> that are used by SYS/BIOS and other related software components. These include memory allocation, logging, and system control.</p></li>
</ul>
<p>The <a class="reference external" href="http://rtsc.eclipse.org/docs-tip/Main_Page">RTSC-pedia web site</a> describes RTSC and XDCtools in more detail. In particular, it provides information for developers planning to create RTSC packages. It is also useful if you plan to edit configuration scripts with a text editor rather than using the XGCONF graphical editor provided withing CCS.</p>
</div>
<div class="section" id="can-you-use-any-sysbios-version-with-any-version-of-xdctools-when-creating-create-or-migrating-to-ti-rtos-based-application-development-environment">
<h5>10.2.2.1.4.2. Can you use any SYSBIOS version with any version of XDCTools when creating create or migrating to TI RTOS based application development environment<a class="headerlink" href="#can-you-use-any-sysbios-version-with-any-version-of-xdctools-when-creating-create-or-migrating-to-ti-rtos-based-application-development-environment" title="Permalink to this headline">¶</a></h5>
<p>This is a frequent issue for new user of TI RTOS. SYSBIOS releases are usually validated with a specific version of XDCTools that is described in the Release notes. It is generally not recommended to mix and match SYSBIOS versions with older or newer than the versions described as you may run into incompatibility issues. TI simplifies this build environments by packaging the TI RTOS package with XDCtools or by providing SDKs with the compatible versions of SYSBIOS kernel and XDCtools.</p>
<p>For customers using TI DSP and ARM Processors, it is recommended to use Processor SDK RTOS for TI RTOS development and to setup the CCS environment such its Preferences are set to use the versions included in the SDK. This process has been described:
<a class="reference external" href="index_how_to_guides.html#setup-ccs-for-evm-and-processor-sdk-rtos">Processor_SDK_RTOS_Setup_CCS</a></p>
</div>
<div class="section" id="using-sysbios-with-gnu-gcc-for-arm-devices-only">
<h5>10.2.2.1.4.3. Using SYSBIOS with GNU GCC (for ARM devices only)<a class="headerlink" href="#using-sysbios-with-gnu-gcc-for-arm-devices-only" title="Permalink to this headline">¶</a></h5>
<p>The key care about of using SYSBIOS kernel on ARM based devices with GNU GCC compiler have been described in the article <a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_with_GCC_(CortexA)">SYS/BIOS_with_GCC_(CortexA)</a></p>
<p>This wiki answers important questions about using SYSBIOS kernel with GNU GCC compiler like:
* <a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_with_GCC_(CortexA)#How_do_I_change_the_address_where_the_entry_point_function_.28_c_int00.29_gets_placed_.3F">Changing entry point to an application</a></p>
<ul class="simple">
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_with_GCC_(CortexA)#Configure_SYS.2FBIOS">Recommended compiler and linker settings</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_with_GCC_(CortexA)#Why_is_System_printf.28.29.2Fprintf.28.29_not_working_.3F">Getting System_printf/printf (adding Semihosting support)</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_with_GCC_(CortexA)#Build_Application_with_Configuration">Creating make based TI RTOS application build using GNU GCC compiler and XDCtools</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_with_GCC_(CortexA)#How_do_I_add_a_4KB_granularity_MMU_pages_on_Cortex-A8.2C_Cortex-A9_and_Cortex-A15_devices_.3F">Configuring ARM MMU and cache settings</a></p></li>
</ul>
</div>
<div class="section" id="how-do-i-port-existing-application-developed-on-sysbios-application-to-smp-bios">
<h5>10.2.2.1.4.4. How do I port existing application developed on SYSBIOS application to SMP/BIOS<a class="headerlink" href="#how-do-i-port-existing-application-developed-on-sysbios-application-to-smp-bios" title="Permalink to this headline">¶</a></h5>
<p>SYSBIOS supports SMP mode of operation on multi-core ARM and few dual core M3/M4 (IPU) subsytem present in Keystone and Sitara processors.</p>
<p><strong>Training Slides</strong>: <a class="reference external" href="http://processors.wiki.ti.com/index.php/File:Public_SmpBiosSlides.pdf">SMP SYSBIOS Overview presentation</a>.</p>
<p>To Porting existing SYS/BIOS applications to SMP/BIOS, you can use the follow steps described below:
* Merge existing separate applications into a single application.
* Merge separate platform memory definitions as necessary.
* Add this to your existing application’s config script:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BIOS</span><span class="p">.</span><span class="n">smpEnabled</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Use these SMP-aware clone modules in place of their xdc.runtime equivalents for SysMin, SysStd, LoggerBuf (in ti.sybios.smp package)</p></li>
</ul>
<p>‘’’Note:’’’  The existing Load module has been tweaked to provide minimal support for SMP.
* For initial sanity testing, force all tasks to run on core 0:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Task</span><span class="p">.</span><span class="n">defaultAffinity</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Once basic functionality of the merged applications has been demonstrated, either remove Task.defaultAffinity setting or replace it with</p></li>
</ul>
<p>Task.defaultAffinity = Task.AFFINITY_NONE;</p>
<p>The above statement will guide RTOS kernel to deploy tasks based on availability in the cluster of compute cores processing in SMP mode.</p>
</div>
<div class="section" id="are-there-any-graphical-tools-to-configure-sysbios-configuration">
<h5>10.2.2.1.4.5. Are there any Graphical tools to configure SYSBIOS configuration<a class="headerlink" href="#are-there-any-graphical-tools-to-configure-sysbios-configuration" title="Permalink to this headline">¶</a></h5>
<p>The easiest way for new users to add/configure new modules in the TI RTOS BIOS configuration is to use <a class="reference external" href="http://rtsc.eclipse.org/docs-tip/RTSC%2BCCStudio_v4_QuickStart">XGCONF based graphical tool</a></p>
</div>
</div>
<div class="section" id="thread-types">
<h4>10.2.2.1.5. Thread Types<a class="headerlink" href="#thread-types" title="Permalink to this headline">¶</a></h4>
<div class="section" id="what-is-the-difference-between-swis-and-tasks">
<h5>10.2.2.1.5.1. What is the difference between SWIs and Tasks<a class="headerlink" href="#what-is-the-difference-between-swis-and-tasks" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>A Swi is a non-blocking thread that runs to completion and can only be pre-empted by a higher priority Swi or a Hwi (interrupt). Swi’s can pre-empt a Task thread when posted and run on the ISR (system) stack (i.e. they do not have their own stack).</p></li>
<li><p>A Task thread on the other hand is a blocking thread and can be pre-empted by a higher priority Task or by Swi/Hwi. A task usually has a while loop that keeps the task executing continuously in the system as long as it is required in the application. Also, Tasks run on their own independent stack.</p></li>
</ul>
</div>
<div class="section" id="how-to-add-house-keeping-functions-in-the-idle-task">
<h5>10.2.2.1.5.2. How to add house keeping functions in the idle Task<a class="headerlink" href="#how-to-add-house-keeping-functions-in-the-idle-task" title="Permalink to this headline">¶</a></h5>
<p>If you want to use the idle time of the system to do some “housekeeping” jobs in the background, when the system is not active on interrupts or tasks, TI RTOS provides option to provide a task list or point to a housekeeping function which will run when no other thread is active in the system. The simplest syntax to add this to your code is shown below:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>Task.enableIdleTask = true;
var Idle = xdc.useModule(&#39;ti.sysbios.knl.Idle&#39;);
Idle.addFunc(&#39;&amp;osTaskIdleFunc&#39;);
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>If you open the BIOS configuration in XGCONF, you will notice that user are allowed to enter upto 8 function in the function list.</p>
<p>Syntax to add idle functions is provided below</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Idle = xdc.useModule(&#39;ti.sysbios.knl.Idle&#39;);
Idle.idleFxns[0] = &quot;&amp;myIdle1&quot;;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="hardware-interrupts-hwi">
<h4>10.2.2.1.6. Hardware Interrupts (HWI)<a class="headerlink" href="#hardware-interrupts-hwi" title="Permalink to this headline">¶</a></h4>
<div class="section" id="how-to-configure-crossbar-when-setting-up-interrupts-on-dra7xx-tda2xx-am57xx">
<h5>10.2.2.1.6.1. How to configure Crossbar when setting up interrupts on DRA7xx/TDA2xx/AM57xx<a class="headerlink" href="#how-to-configure-crossbar-when-setting-up-interrupts-on-dra7xx-tda2xx-am57xx" title="Permalink to this headline">¶</a></h5>
<p>Some socs like AM571x and AM572x have a large number of interrupts requests to service the needs of its many peripherals and subsystems. All of the interrupt lines from the subsystems are not needed at the same time, so they have to be muxed to the irq-controller appropriately. In such places a interrupt controllers are preceded by an CROSSBAR that provides flexibility in muxing the device requests to the controller inputs.</p>
<p>Application developers have two options to setup interrupts on AM57xx/TDA2xx/DRA7xx devices which provide a crossbar mechanism to connect a given IRQ source to an IRQ line on the target cpu’s interrupt controller. The device level chip support library provides functional APIs to map interrupt events to target core interrupt controller line.</p>
<p>For example SPI3_IRQ to the CROSSBAR input on DSP and M4, you can use the following:</p>
<p>DSP Core1 configuration of SPI3_IRQ to crossbar input 60:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Configure xbar connect for MCSPI3: DSP_IRQ_43 (reserved) mapped to MCSPI3 intr */</span>
   <span class="n">CSL_xbarIrqConfigure</span> <span class="p">(</span><span class="n">CSL_XBAR_IRQ_CPU_ID_DSP1</span><span class="p">,</span>
                         <span class="n">CSL_XBAR_INST_DSP1_IRQ_43</span><span class="p">,</span> <span class="cm">/* should match with C66 intc eventId used for event combiner that maps to DSP interrupts*/</span>
                         <span class="n">CSL_XBAR_MCSPI3_IRQ</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>IPU core1 configuration of SPI3_IRQ to crossbar input 43:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Configure xbar connect for MCSPI3: IPU1_IRQ_60 (reserved) mapped to MCSPI3 intr */</span>
   <span class="n">CSL_xbarIrqConfigure</span> <span class="p">(</span><span class="n">CSL_XBAR_IRQ_CPU_ID_IPU1</span><span class="p">,</span>
                         <span class="n">CSL_XBAR_INST_IPU1_IRQ_60</span><span class="p">,</span> <span class="cm">/* should match with M4 intNum used for HWI_create */</span>
                         <span class="n">CSL_XBAR_MCSPI3_IRQ</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Here is how you would define the same interrupt handler for IPU statically in a configuration script:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Hwi = xdc.useModule(&#39;ti.sysbios.family.arm.m3.Hwi&#39;);
var IntXbar = xdc.useModule(&#39;ti.sysbios.family.shared.vayu.IntXbar&#39;);
// Connect IRQ 23 to Interrupt source index 86 (SPI3_IRQ)
IntXbar.connectIRQMeta(60, 86);
// Alternately, the connectIRQMeta API can be used. This
// API expects XBAR instance number as an argument.
//
// Connect Xbar Instance 1 (IRQ 60) to Interrupt
// source index 86 (MCSPI3_IRQ)
//
// IntXbar.connectMeta(1, 60);
var hwiParams = new Hwi.Params();
hwiParams.arg = 60;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="clocks-and-timers">
<h4>10.2.2.1.7. Clocks and Timers<a class="headerlink" href="#clocks-and-timers" title="Permalink to this headline">¶</a></h4>
<div class="section" id="what-are-the-different-clock-and-timer-modules-in-ti-rtos-that-you-should-be-aware-of">
<h5>10.2.2.1.7.1. What are the different clock and timer modules in TI RTOS that you should be aware of?<a class="headerlink" href="#what-are-the-different-clock-and-timer-modules-in-ti-rtos-that-you-should-be-aware-of" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><dl class="simple">
<dt>Timer Module</dt><dd><ul>
<li><p>Manages timer peripherals</p></li>
<li><p>Provides target/device abstraction</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Clock Module</dt><dd><ul>
<li><p>Manages BIOS “heartbeat”</p></li>
<li><p>Can schedule functions to fire in the future (one-shot or periodically)</p></li>
<li><p>Input can be configured to use Timer module “tick” or application “tick”</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Timestamp Module</dt><dd><ul>
<li><p>Provides simple time stamping services for benchmarking code</p></li>
<li><p>Allows time stamping RTA logs</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>BIOS Timer Architecture</strong></p>
<a class="reference internal image-reference" href="../_images/BIOS_Timer_Architecture.png"><img alt="../_images/BIOS_Timer_Architecture.png" src="../_images/BIOS_Timer_Architecture.png" style="width: 585.0px; height: 366.0px;" /></a>
<p><strong>BIOS Clock Architecture</strong></p>
<a class="reference internal image-reference" href="../_images/BIOS_Clock_Architecture.png"><img alt="../_images/BIOS_Clock_Architecture.png" src="../_images/BIOS_Clock_Architecture.png" style="width: 585.5px; height: 362.0px;" /></a>
</div>
<div class="section" id="how-to-get-accurate-clock-ticks-from-the-clock-module">
<h5>10.2.2.1.7.2. How to get accurate clock ticks from the clock module?<a class="headerlink" href="#how-to-get-accurate-clock-ticks-from-the-clock-module" title="Permalink to this headline">¶</a></h5>
<p>The clock module uses the CPU clock setting that is provided by the default platform setting. For example, if the platform is set to AM335x, then the clock is assumed to be 550 MHz, so the clock ticks will be generated with period of 1.8 nanoseconds. ‘’’TI RTOS doesn`t setup the device clocks, the device clock initiation is the responsibility of the initialization code’’’ (GEL file in debug environment and bootloader in production environment)</p>
<p>After, the clocks are configured, it is the responsibility of the application developer to inform BIOS of the CPU frequency so that accurate system ticks can be generated.</p>
<p><strong>Note:</strong> For example if the core clock on AM335x is set to 720 MHz instead of default 550 Mhz, then users are required to add the following like the .cfg to inform BIOS kernel of the actual CPU setting.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BIOS</span><span class="p">.</span><span class="n">cpuFreq</span><span class="p">.</span><span class="n">lo</span> <span class="o">=</span> <span class="mi">720000000</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>We reiterate that this doesn`t change the actual frequency but only informs the OS of the change from default CPU freq setting.</p>
</div>
<div class="section" id="how-to-set-input-frequency-in-sysbios-configuration-and-change-timer-used-by-clock-module">
<h5>10.2.2.1.7.3. How to set input frequency in SYSBIOS configuration and change timer used by clock module<a class="headerlink" href="#how-to-set-input-frequency-in-sysbios-configuration-and-change-timer-used-by-clock-module" title="Permalink to this headline">¶</a></h5>
<p>Timer.intFreq[index] determines the input clock that drivers the timer. In most cases the input clock is assumed to be the input clock used in TI EVM  (Example: 24 Mhz used on AM335x EVM). If you have a different input on your custom board users are required to change the input Freqency setting in their configuration. To change the dmtimer frequency in SYS/BIOS you need to add the following to your config file:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Timer = xdc.useModule(&#39;ti.sysbios.timers.dmtimer.Timer&#39;);
Timer.intFreqs[index] = {hi: 0, lo: 19200000};
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Where index is the SYS/BIOS timer ID.  Please remember that timer IDs do not necessarily match the number in the peripheral name.  For example on AM335x SYS/BIOS Timer 0 actually corresponds to DMTimer2 on the device.  Use the <a class="reference external" href="http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/bios/sysbios/6_40_01_15/exports/bios_6_40_01_15/docs/cdoc/ti/sysbios/timers/dmtimer/doc-files/TimerTables.html">Timer Mapping Table</a> to determine which timer corresponds to each Timer ID.</p>
<p>The Clock module uses a Timer internally.  By default, the Clock module calls Timer_create() with “ANY” which will return one of the available timers.  You can specify the exact timer using the following (the default value for Clock.timerId is ANY).</p>
<p>To set it to a specic timer Id, you can use the following syntax.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>Clock= xdc.useModule(&#39;ti.sysbios.knl.Clock&#39;);
Clock.timerId = 3;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="semihosting">
<h4>10.2.2.1.8. SemiHosting<a class="headerlink" href="#semihosting" title="Permalink to this headline">¶</a></h4>
<div class="section" id="why-can-t-i-see-output-of-system-printf-on-ccs-console">
<h5>10.2.2.1.8.1. Why can`t I see output of System_printf on CCS console?<a class="headerlink" href="#why-can-t-i-see-output-of-system-printf-on-ccs-console" title="Permalink to this headline">¶</a></h5>
<p>When getting started with TI RTOS, you may notice that the printf from your code goes to CCS console but using non-intrusive System_printf doesn`t. If you want to have System_printf output go to the same place as printf, add the following three lines to your .cfg file and re-build:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var System = xdc.useModule(&#39;xdc.runtime.System&#39;);
var SysStd = xdc.useModule(&#39;xdc.runtime.SysStd&#39;);
System.SupportProxy = SysStd;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>If you don’t do this, the output will go to a circular buffer in memory. You can examine that buffer using the ROV tool (use the menu: Tools-&gt;ROV while in the debugger).</p>
</div>
<div class="section" id="how-to-enable-printf-system-printf-to-go-to-ccs-io-console-on-arm-devices">
<h5>10.2.2.1.8.2. How to enable printf/System_printf to go to CCS IO console on ARM devices<a class="headerlink" href="#how-to-enable-printf-system-printf-to-go-to-ccs-io-console-on-arm-devices" title="Permalink to this headline">¶</a></h5>
<p>Application developers need to add the SemiHosting module to the .cfg manually by editing the config script. Add the following line:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var SemiHostSupport = xdc.useModule(&#39;ti.sysbios.rts.gnu.SemiHostSupport&#39;);
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This module does the required setup (install SVC_Handler and do the required file handle init) to support SemiHosting.</p>
<p>GNU GCC users on ARM platforms need to link to  “rdimon” library to the “GNU Linker” -&gt; “Libraries” view. If the “nosys” library is already listed in the “Libraries” view then replace it with “rdimon”. This will cause the application to link with librdimon.a library which is a Semi-Hosting enabled BSP library.</p>
</div>
</div>
<div class="section" id="exception-handling">
<h4>10.2.2.1.9. Exception Handling<a class="headerlink" href="#exception-handling" title="Permalink to this headline">¶</a></h4>
<div class="section" id="how-can-i-get-dump-of-registers-when-an-exception-occurs">
<h5>10.2.2.1.9.1. How can I get dump of registers when an exception occurs ?<a class="headerlink" href="#how-can-i-get-dump-of-registers-when-an-exception-occurs" title="Permalink to this headline">¶</a></h5>
<p>If you add this to your .cfg file:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Exception = xdc.useModule(&#39;ti.sysbios.family.c64p.Exception&#39;);
Exception.enablePrint = true;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>SYS/BIOS provides several target unique exception handlers:
* ti.sysbios.family.arm.exc.Exception - used by all Arm9 and A8 targets
* ti.sysbios.family.arm.m3.Hwi - used by all cortex-M3 targets
* ti.sysbios.family.c64p.Exception - used by all C6x targets</p>
<p>a complete exception register context should be dumped to the console in addition to the Error raised by the exception handler when an exception occurs.</p>
<p>If you set a breakpoint at “ti_sysbios_family_c64p_Hwi_int1”, this is the function vectored to on all exceptions. No exception processing will have been performed at this point. Using CCS’ register dump, you can see the complete state of the processor. The NRP register should contain the PC at the time the exception occurred.</p>
</div>
<div class="section" id="how-do-i-determine-the-call-stack-at-the-time-of-crash">
<h5>10.2.2.1.9.2. How do I determine the call stack at the time of crash<a class="headerlink" href="#how-do-i-determine-the-call-stack-at-the-time-of-crash" title="Permalink to this headline">¶</a></h5>
<p>A detailed view of analyzing the call stack using CCS tools when your TI RTOS application throws an exception has been described in the article:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/SYS/BIOS_FAQs#Exception_Dump_Decoding_Using_the_CCS_Register_View">Exception_Dump_Decoding_Using_the_CCS_Register_View</a></p></li>
</ul>
</div>
<div class="section" id="how-can-you-route-exception-print-to-uart">
<h5>10.2.2.1.9.3. How can you route exception print to UART<a class="headerlink" href="#how-can-you-route-exception-print-to-uart" title="Permalink to this headline">¶</a></h5>
<p>The console I/O prints from TI-RTOS can be re-routed to UART. The console I/O messages are printed using the System module which can configured to call callback functions. These callback functions should be configured to write to UART. For example, in your .cfg add a configuration similar to the one below:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>/* ================ System configuration ================ */
var System = xdc.useModule(&#39;xdc.runtime.System&#39;);
var SysCallback = xdc.useModule(&#39;xdc.runtime.SysCallback&#39;);
SysCallback.abortFxn = &quot;&amp;myUARTAbort&quot;;
SysCallback.putchFxn = &quot;&amp;myUARTPutch&quot;;
SysCallback.readyFxn = &quot;&amp;myUARTReady&quot;;
System.SupportProxy = SysCallback;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>And define the functions myUARTAbort, myUARTPutch and myUARTReady in your application. For details about the SysCallback module’s callback function signature, please see this link.</p>
<p>For more details refer to the E2E discussion here: <a class="reference external" href="https://e2e.ti.com/support/embedded/tirtos/f/355/t/459864">Redirecting Exception logs to UART</a></p>
</div>
</div>
<div class="section" id="logging-and-trace">
<h4>10.2.2.1.10. Logging and Trace<a class="headerlink" href="#logging-and-trace" title="Permalink to this headline">¶</a></h4>
<div class="section" id="how-get-uia-logging-working-with-ti-rtos-application">
<h5>10.2.2.1.10.1. How get UIA logging working with TI RTOS application?<a class="headerlink" href="#how-get-uia-logging-working-with-ti-rtos-application" title="Permalink to this headline">¶</a></h5>
<p>In order to get the UIA loggging enabled, you need to include the UIA module and indicate the modules on which you would like obtain the logging information in your application. For example the following configuration will enable Load, Task, Swi and Hwi logging and will enable Task profiler so that you gain visual insight into the execution of the TI RTOS application using System analyzer tools in CCS:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var LoggingSetup = xdc.useModule(&#39;ti.uia.sysbios.LoggingSetup&#39;);
LoggingSetup.loadLogging = true;
LoggingSetup.loadLoggerSize = 1024;
LoggingSetup.mainLoggerSize = 32768;
LoggingSetup.sysbiosLoggerSize = 32768;
LoggingSetup.sysbiosSwiLogging = true;
LoggingSetup.sysbiosHwiLogging = true;
LoggingSetup.sysbiosSemaphoreLogging = true;
LoggingSetup.loadTaskLogging = true;
LoggingSetup.loadSwiLogging = true;
LoggingSetup.loadHwiLogging = true;
LoggingSetup.enableTaskProfiler = true;
LoggingSetup.sysbiosHwiLoggingRuntimeControl = true;
LoggingSetup.sysbiosSwiLoggingRuntimeControl = true;
LoggingSetup.eventUploadMode = LoggingSetup.UploadMode_JTAGSTOPMODE;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>System analyzer view :</strong></p>
<img alt="../_images/System_Analyzer_Execution_log.png" src="../_images/System_Analyzer_Execution_log.png" />
<p><strong>For more information refer to :</strong>
<a class="reference external" href="http://processors.wiki.ti.com/index.php/Multicore_System_Analyzer">System Analyzer wiki</a></p>
<p>To see how XGCONF graphical tool can be used to add Logging setup, refer to <a class="reference external" href="http://www.ti.com/lit/ug/spruhd4m/spruhd4m.pdf">TI RTOS User Section 2.2</a></p>
</div>
<div class="section" id="what-sys-bios-debugging-tools-do-we-have-in-ccs">
<h5>10.2.2.1.10.2. What SYS/BIOS Debugging Tools do we have in CCS ?<a class="headerlink" href="#what-sys-bios-debugging-tools-do-we-have-in-ccs" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Real Time analysis(RTA) agent</p></li>
<li><p>RTOS Object View(ROV)</p></li>
</ul>
</div>
<div class="section" id="real-time-analysis-rta-agent">
<h5>10.2.2.1.10.3. Real Time analysis(RTA) agent<a class="headerlink" href="#real-time-analysis-rta-agent" title="Permalink to this headline">¶</a></h5>
<p><strong>Note:</strong> Before Debugging the SYSBIOS Debugging options. It is recommended to set the Preferences under the Windows Tab in CCS to select the version of SYSBIOS, XDCTOOLS in Windows-&gt;Preferences-&gt;General-&gt;RTSC Options. Additionally set IPC and XDAIS if your application uses the components.</p>
<ol class="arabic simple">
<li><p>Real time analysis can easily be turned on in a SYSBIOS based CCS project using the Grace tools. Select the configuration file (.cfg) in your project this will open an available Resources view inside SYSBIOS. Under diagnostics, select the RTA agent and enable it and save the configuration. Rebuild the project with the new settings.</p></li>
<li><p>To run your project, choose <strong>Target Debug Active Project</strong> from the CCS menus. If this is the first time you are debugging a project for your target, you may need to set up a CCS Target Configuration. See the CCS help for details.</p></li>
<li><p>In the Debug perspective, open the Runtime Object Viewer (ROV) tool by choosing <strong>Tools ROV</strong>. Also open the Raw Logs view by choosing <strong>Tools RTA Raw Logs</strong>. These tools allow you to see the activity of RTSC and SYS/BIOS modules.</p></li>
<li><p>Set some breakpoints in the log.c source file. (You can do this by right-clicking on a line and choosing <strong>New Breakpoint &amp;gt; Breakpoint</strong>.) For example, set a breakpoint on the last line of each function in log.c.</p></li>
<li><p>Run the application.</p></li>
<li><p>In the Raw Logs window, you can see the informational, warning, and error messages sent by the calls to Log module APIs in log.c. The messages that begin with <strong>LM</strong> are diagnostics provided by XDCtools. Messages that begin with “WARNING” come from calls to Log_warning2. Messages that begin with “ERROR” come from calls to Log_error2. Messages that begin with “../log.c” come from calls to Log_info0 and Log_info2 (depending on the number of arguments).&lt;/li&gt;</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/SYSBIOS_Diag.jpg"><img alt="../_images/SYSBIOS_Diag.jpg" src="../_images/SYSBIOS_Diag.jpg" style="width: 640.0px; height: 400.0px;" /></a>
<a class="reference internal image-reference" href="../_images/SYSBIOS_Rawlog.jpg"><img alt="../_images/SYSBIOS_Rawlog.jpg" src="../_images/SYSBIOS_Rawlog.jpg" style="width: 640.0px; height: 400.0px;" /></a>
<img alt="../_images/Rta_exec2.png" src="../_images/Rta_exec2.png" />
<a class="reference internal image-reference" href="../_images/SYSBIOS_CPUload.jpg"><img alt="../_images/SYSBIOS_CPUload.jpg" src="../_images/SYSBIOS_CPUload.jpg" style="width: 640.0px; height: 400.0px;" /></a>
<p>For advanced debugging options we recommend following the instructions on the <a class="reference external" href="http://processors.wiki.ti.com/index.php/BIOS_6_Real-Time_Analysis_(RTA)_in_CCSv4">BIOS_6_Real-Time_Analysis_(RTA)_in_CCSv4</a> wiki</p>
</div>
<div class="section" id="rtos-object-view-rov">
<h5>10.2.2.1.10.4. RTOS Object View(ROV)<a class="headerlink" href="#rtos-object-view-rov" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Load your application for debugging. Select the device you want to debug before opening ROV.</p></li>
<li><p>In the ROV window, expand the tree to see the ti.sysbios.knl.Task module. The right pane shows a list of the Task threads in the application. As you advance from breakpoint to breakpoint, you see the run mode of the threads change.&lt;/li&gt;&lt;/ol&gt;</p></li>
</ol>
<img alt="../_images/1.7.6_Image.png" src="../_images/1.7.6_Image.png" />
<dl class="field-list simple">
<dt class="field-odd">scale</dt>
<dd class="field-odd"><p>50 %</p>
</dd>
</dl>
<p>For more details on ROV tools, refer to the <a class="reference external" href="http://rtsc.eclipse.org/docs-tip/Runtime_Object_Viewer">Runtime Object Viewer(ROV)</a> article on RTSC website.</p>
</div>
</div>
<div class="section" id="memory-and-heap">
<h4>10.2.2.1.11. Memory and Heap<a class="headerlink" href="#memory-and-heap" title="Permalink to this headline">¶</a></h4>
<div class="section" id="what-kind-of-heap-should-i-use-in-sysbios-application-and-how-do-i-allocate-heap-in-my-configuration">
<h5>10.2.2.1.11.1. What kind of heap should I use in SYSBIOS application and how do I allocate Heap in my configuration<a class="headerlink" href="#what-kind-of-heap-should-i-use-in-sysbios-application-and-how-do-i-allocate-heap-in-my-configuration" title="Permalink to this headline">¶</a></h5>
<p>SYSBIOS Supports five different type of Heap implementation:</p>
<ul class="simple">
<li><p>HeapMin. Very small code footprint implementation. Supports non blocking memory allocation, but does not support freeing memory.</p></li>
<li><p>HeapMem. Allocate variable-size blocks and uses Gate module to protect allocation and freeing of memory. typically Slower and non-deterministic</p></li>
<li><p>HeapBuf. Allocate fixed-size blocks. Fast deterministic and non-blocking as allocation uses same size.</p></li>
<li><p>HeapMultiBuf. Specify variable-size allocation, but internally allocate from a variety of fixed-size blocks. Good tradeoff for HeapMem and HeapBuf</p></li>
<li><p>HeapTrack. Used to detect memory allocation and deallocation problems. Good for debugging as it detects memory leaks and buffer overflows.</p></li>
</ul>
<p>Typical allocation of static heap within the SYSBIOS <a href="#id27"><span class="problematic" id="id28">*</span></a>.cfg file is shown below:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var HeapMem = xdc.useModule(&#39;ti.sysbios.heaps.HeapMem&#39;);
/* Create a Heap. */
var heapMemParams = new HeapMem.Params();
heapMemParams.size = 0x8000000;                             // &lt;-- edit this value to tune the size of the heap
heapMemParams.sectionName = &quot;systemHeapMaster&quot;;
Program.global.heap0 = HeapMem.create(heapMemParams);
Memory.defaultHeapInstance = Program.global.heap0;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="benchmarks">
<h4>10.2.2.1.12. Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this headline">¶</a></h4>
<div class="section" id="where-can-i-find-memory-foot-print-interrupt-latency-and-performance-numbers-of-the-ti-rtos-when-designing-my-system">
<h5>10.2.2.1.12.1. Where can I find Memory foot print, Interrupt latency and performance numbers of the TI RTOS when designing my system<a class="headerlink" href="#where-can-i-find-memory-foot-print-interrupt-latency-and-performance-numbers-of-the-ti-rtos-when-designing-my-system" title="Permalink to this headline">¶</a></h5>
<dl class="simple">
<dt>The Memory footprint and Interrupt latency for different processor architectures is provided in the SYSBIOS package. It can be located at</dt><dd><p>bios_6_xx_xx_xx/packages/ti/sysbios/benchmarks/doc-files</p>
</dd>
</dl>
<p>The Foot print of the OS depends on number of BIOS kernel modules used by the application but an estimate of the foot print can be computed by adding up the module footprint numbers to the base kernel footprint. The interrupt latency is mostly deterministic in the system but OS response may depend on priority of the interrupt setup. If the 2 or more interrupts occur simultaneously, the premptive BIOS scheduler will let the higher HWI to run before letting the one with lower priority so it may seem as the the lower priority interrupt response is slightly slower.</p>
</div>
</div>
<div class="section" id="debugging">
<h4>10.2.2.1.13. Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h4>
<div class="section" id="how-to-debug-common-application-issues-like-stack-overflow-exception-and-memory-leaks">
<h5>10.2.2.1.13.1. How to debug common application issues like stack overflow, exception and memory leaks<a class="headerlink" href="#how-to-debug-common-application-issues-like-stack-overflow-exception-and-memory-leaks" title="Permalink to this headline">¶</a></h5>
<p>Common Application debug scenarios like exception management, memory leak and stack issues have been described in the following training video:
<a class="reference external" href="https://training.ti.com/debugging-common-application-issues-ti-rtos">Debugging Common Application Issues TI RTOS</a></p>
<p>The training covers stack over flow, exception handling and memory management issues in detail with a Lab for TI MCU devices but the same concepts and features also apply for TI ARM and DSP processors.</p>
</div>
<div class="section" id="how-to-add-custom-compiler-options-and-build-custom-bios-library">
<h5>10.2.2.1.13.2. How to add Custom compiler options  and build custom BIOS library<a class="headerlink" href="#how-to-add-custom-compiler-options-and-build-custom-bios-library" title="Permalink to this headline">¶</a></h5>
<p>Users are allowed to change the libType and specify the compiler options from their BIOS configuration using the following</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BIOS</span><span class="p">.</span><span class="n">libType</span> <span class="o">=</span> <span class="n">BIOS</span><span class="p">.</span><span class="n">LibType_Custom</span><span class="p">;</span>
<span class="c1">// For Cortex A8 device like AM335x</span>
<span class="n">BIOS</span><span class="p">.</span><span class="n">customCCOpts</span> <span class="o">=</span> <span class="s">&quot;--endian=little -mv7A8 --abi=eabi --neon --float_support=vfpv3 -q -ms --program_level_compile -o3 --opt_for_speed=3&quot;</span>
<span class="c1">// For Cortex A9 device like AM437x</span>
<span class="n">BIOS</span><span class="p">.</span><span class="n">customCCOpts</span> <span class="o">=</span><span class="s">&quot;-mcpu=cortex-a9 -mfpu=neon -mfloat-abi=hard -mabi=aapcs -O3 -Wunused -Wunknown-pragmas -ffunction-sections -fdata-sections -g &quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>To remove a given compiler setting, you can use:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BIOS</span><span class="p">.</span><span class="n">customCCOpts</span> <span class="o">=</span> <span class="n">BIOS</span><span class="p">.</span><span class="n">customCCOpts</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; -g &quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="flashing-and-boot">
<h2>10.2.3. Flashing and Boot<a class="headerlink" href="#flashing-and-boot" title="Permalink to this headline">¶</a></h2>
<div class="section" id="flash-bootable-images-c66x-k2h-k2e-k2l-only">
<h3>10.2.3.1. Flash bootable images (C66x, K2H/K2E/K2L only)<a class="headerlink" href="#flash-bootable-images-c66x-k2h-k2e-k2l-only" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id29">
<h4>10.2.3.1.1. Overview<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<p>The Processor SDK RTOS for C6657, C6678, K2H, K2E, and K2L EVMs includes
a script in the directory</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SDK</span> <span class="n">Install</span> <span class="n">Path</span><span class="p">]</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="o">&lt;</span><span class="n">platform</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;/</span><span class="n">bin</span>
</pre></div>
</div>
<p>named <strong>program_evm.js</strong>. The purpose of this script is to automatically
flash bootable images onto your EVM.</p>
<p>The following sections will describe how to use this script and the
default flashable binaries in the Processor SDK RTOS.</p>
</div>
<div class="section" id="requirements">
<h4>10.2.3.1.2. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>A Windows or Linux PC</p></li>
<li><p>Processor SDK RTOS installed on your PC. The version to install must
match the SOC you plan to use</p></li>
<li><p>Code Composer Studio installed on your PC</p></li>
<li><p>An USB connection to your EVM emulator</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your board should be set to NO-BOOT mode. Please refer to the boot mode
dip switch settings for different boot modes on your EVM Hardware User
Guide. See <a class="reference external" href="index_release_specific.html#supported-platforms-and-versions">this page</a> for
a link to all supported EVM information.</p>
</div>
</div>
<div class="section" id="directory-structure">
<h4>10.2.3.1.3. Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h4>
<p>The files used are in the Processor SDK RTOS directory. Expanded below
are the relevant files and directories for flashing the bootable images
for C667x, but a similar structure is used for C665x.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>├── bin
│   ├── configs
│   │   └── evm6678l
│   │       ├── evm6678l.ccxml
│   │       ├── evm6678le.ccxml
│   │       ├── evm6678le-linuxhost.ccxml
│   │       └── evm6678l-linuxhost.ccxml
│   ├── logs
│   └── program_evm.js
└── prebuilt-images
    ├── eeprom50.bin
    ├── eeprom51.bin
    ├── eepromwriter_evm6678l.out
    ├── eepromwriter_input50.txt
    ├── eepromwriter_input51.txt
    ├── eepromwriter_input.txt
    ├── nandwriter_evm6678l.out
    ├── nand_writer_input.txt
    ├── norwriter_evm6678l.out
    └── nor_writer_input.txt
</pre></div>
</div>
<p>Below is the expanded tree for K2H. Similarly, this also applies to K2E
and K2L EVMs.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>├── bin
│   ├── configs
│   │   └── evmk2h
│   │       ├── evmk2h.ccxml
│   │       ├── evmk2h-linuxhost.ccxml
│   │       └── program_evm_config
│   ├── logs
│   └── program_evm.js
└── prebuilt-images
    ├── app
    ├── config
    ├── MLO
    └── spi_flash_writer.out
</pre></div>
</div>
</div>
<div class="section" id="default-binaries-and-setup">
<h4>10.2.3.1.4. Default Binaries and Setup<a class="headerlink" href="#default-binaries-and-setup" title="Permalink to this headline">¶</a></h4>
<p>Processor SDK RTOS provides the basic CCXML files to connect to your
SOC. There is a separate CCXML file for each SOC, emulator, and host OS
combination. These CCXML files are located in:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SDK</span> <span class="n">Install</span> <span class="n">Path</span><span class="p">]</span><span class="o">/</span><span class="n">processor_sdk_rtos_</span><span class="o">&lt;</span><span class="n">platform</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;/</span><span class="n">bin</span><span class="o">/</span><span class="n">config</span><span class="o">/&lt;</span><span class="n">SOC</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Users can choose to use their own CCXML file by setting the environment
variable, <strong>PROGRAM_EVM_TARGET_CONFIG_FILE</strong>, to point to their CCXML
file in their terminal or command prompt.</p>
<p>You can create your own CCXML file by opening CCSv6 –&gt; View –&gt; Target
Configurations, and right-clicking on the Target Configuration pane to
select New Target Configuration. After selecting your SOC and emulator,
remember to set the appropriate GEL file in the advance options for Core
0. The GEL file is used to do basic SOC initialization upon connecting
to the core.</p>
<p>Processor SDK RTOS also provides the basic binaries needed to perform
flashing. These are separated into two categories - flashwriters and
flash images.</p>
<p>Flashwriters</p>
<ul class="simple">
<li><p>[C66x] eepromwriter_&lt;SOC&gt;.out - writes content to your EVM EEPROM
flash memory</p></li>
<li><p>[C66x] norwriter_&lt;SOC&gt;.out - writes content to your EVM NOR flash
memory</p></li>
<li><p>[C66x] nandwriter_&lt;SOC&gt;.out - writes content to your EVM NAND flash
memory</p></li>
<li><p>[K2H/E/L] spi_flash_writer.out - writes multiple images to your NOR
flash memory</p></li>
</ul>
<p>Flash images</p>
<ul class="simple">
<li><p>[C66x] eeprom50.bin - eeprom binary for address 0x50. The default for
C66x is the POST application.</p></li>
<li><p>[C66x] eeprom51.bin - eeprom binary for address 0x51. The default for
C66x is the Intermediate Boot Loader (IBL).</p></li>
<li><p>[C66x] nor.bin - nor binary to be used for NOR boot. May not be
provided for every EVM or release version.</p></li>
<li><p>[C66x] nand.bin - nand binary to be used for NAND boot. May not be
provided for every EVM or release version.</p></li>
<li><p>[K2H/K2E/K2L] app - NOR binary to be booted by Secondary Bootloader.
The default for Keystone 2 is the POST application</p></li>
<li><p>[K2H/K2E/K2L] MLO - Secondary Bootloader. The default flash location
is in SPI NOR flash memory at offset 0.</p></li>
</ul>
</div>
<div class="section" id="usage">
<h4>10.2.3.1.5. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>For Windows users:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&gt; cd [SDK Install Path]\processor_sdk_rtos_&lt;platform&gt;_&lt;version&gt;\bin
&gt; set DSS_SCRIPT_DIR=[CCS Install Path]\ccsv6\ccs_base\scripting\bin
&gt; %DSS_SCRIPT_DIR%\dss.bat program_evm.js [tmdx|tmds]evm(6678|6657|k2h|k2e|k2l)[l|le|ls][-le|-be]
</pre></div>
</div>
<p>For Linux users:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&gt; cd [SDK Install Path]/processor_sdk_rtos_&lt;platform&gt;_&lt;version&gt;/bin
&gt; export DSS_SCRIPT_DIR=[CCS Install Path]/ccsv6/ccs_base/scripting/bin
&gt; $DSS_SCRIPT_DIR/dss.sh program_evm.js [tmdx|tmds]evm(6678|6657|k2h|k2e|k2l)[l|le|ls][-le|-be]
</pre></div>
</div>
<p>The last argument depends on the SOC that you have, concatenated with
the options to select emulator and endianness:</p>
<ul class="simple">
<li><p>l: EVM uses XDS100 on-board Emulator</p></li>
<li><p>le: EVM uses 560 Mezzanine Emulator daughter card</p></li>
<li><p>ls: EVM uses XDS200 Emulator card</p></li>
<li><p>-le: Little Endian</p></li>
<li><p>-be: Big Endian</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>By default, the images provided are little endian.</p></li>
<li><p>Also by default, Keystone 2 EVMs are expected to only use the XDS2xx
Emulator. You do not have to supply the emulator in the parameter for
K2H/K2E/K2L.</p></li>
</ul>
</div>
<p>Some examples are:</p>
<p>TMDXEVM6678LE little endian</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&gt; $DSS_SCRIPT_DIR/dss.sh program_evm.js tmdxevm6678le-le
</pre></div>
</div>
<p>TMDSEVM6657LS little endian</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&gt; $DSS_SCRIPT_DIR/dss.sh program_evm.js tmdxevm6657ls-le
</pre></div>
</div>
<p>EVMK2H little endian</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&gt; $DSS_SCRIPT_DIR/dss.sh program_evm.js tmdsevmk2h
</pre></div>
</div>
<p>EVMK2E little endian</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>&gt; $DSS_SCRIPT_DIR/dss.sh program_evm.js tmdsevmk2e
</pre></div>
</div>
</div>
<div class="section" id="sample-output">
<h4>10.2.3.1.6. Sample Output<a class="headerlink" href="#sample-output" title="Permalink to this headline">¶</a></h4>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>C:\ti\processor_sdk_rtos_c665x_2_00_01_07\bin&gt;%DSS_SCRIPT_DIR%\dss.bat program_evm.js tmdxevm6657ls-le
board: evm6657l
endian: Little
emulation: XDS200 emulator
binaries: ../prebuilt-images/
ccxml: C:\ti\processor_sdk_rtos_c665x_2_00_01_07\bin/configs/evm6657l/evm6657ls.ccxml
C66xx_0: GEL Output:
Connecting Target...

C66xx_0: GEL Output: DSP core #0

C66xx_0: GEL Output: C6657L GEL file Ver is 1.006

C66xx_0: GEL Output: Global Default Setup...

C66xx_0: GEL Output: Setup Cache...

C66xx_0: GEL Output: L1P = 32K

C66xx_0: GEL Output: L1D = 32K

C66xx_0: GEL Output: L2 = ALL SRAM

C66xx_0: GEL Output: Setup Cache... Done.

C66xx_0: GEL Output: Main PLL (PLL1) Setup ...

C66xx_0: GEL Output: PLL in Bypass ...

C66xx_0: GEL Output: PLL1 Setup for DSP @ 1000.0 MHz.

C66xx_0: GEL Output:            SYSCLK2 = 333.3333 MHz, SYSCLK5 = 200.0 MHz.

C66xx_0: GEL Output:            SYSCLK8 = 15.625 MHz.

C66xx_0: GEL Output: PLL1 Setup... Done.

C66xx_0: GEL Output: Power on all PSC modules and DSP domains...

C66xx_0: GEL Output: Set_PSC_State... Timeout Error #03 pd=12, md=4!

C66xx_0: GEL Output: Power on all PSC modules and DSP domains... Done.

C66xx_0: GEL Output: DDR3 PLL (PLL2) Setup ...

C66xx_0: GEL Output: DDR3 PLL Setup... Done.

C66xx_0: GEL Output: DDR3 Init begin (1333 auto)

C66xx_0: GEL Output: XMC Setup ... Done

C66xx_0: GEL Output: IFRDY bit is SET: DDR3 Interface Ready

C66xx_0: GEL Output:
DDR3 initialization is complete.

C66xx_0: GEL Output: DDR3 Init done

C66xx_0: GEL Output: DDR3 memory test... Started

C66xx_0: GEL Output: DDR3 memory test... Passed

C66xx_0: GEL Output: PLL and DDR3 Initialization completed(0) ...

C66xx_0: GEL Output: configSGMIISerdes Setup... Begin

C66xx_0: GEL Output: SGMII SERDES has been configured.

C66xx_0: GEL Output: Enabling EDC ...

C66xx_0: GEL Output: L1P error detection logic is enabled.

C66xx_0: GEL Output: L2 error detection/correction logic is enabled.

C66xx_0: GEL Output: MSMC error detection/correction logic is enabled.

C66xx_0: GEL Output: Enabling EDC ...Done

C66xx_0: GEL Output: Global Default Setup... Done.

Start writing eeprom50
Writer:../prebuilt-images/eepromwriter_evm6657l.out

Image:../prebuilt-images/eeprom50.bin

C66xx_0: GEL Output: Invalidate All Cache...

C66xx_0: GEL Output: Invalidate All Cache... Done.

C66xx_0: GEL Output: GEL Reset...

C66xx_0: GEL Output: GEL Reset... Done.

C66xx_0: GEL Output: Disable all EDMA3 interrupts and events.

EEPROM Writer Utility Version 01.00.00.05

Writing 57432 bytes from DSP memory address 0x0c000000 to EEPROM bus address 0x0050 starting from device address 0x0000
...
Reading 57432 bytes from EEPROM bus address 0x0050 to DSP memory address 0x0c010000 starting from device address 0x0000
...
Verifying data read ...
EEPROM programming completed successfully
Start writing eeprom51
Writer:../prebuilt-images/eepromwriter_evm6657l.out

Image:../prebuilt-images/eeprom51.bin

C66xx_0: GEL Output: Invalidate All Cache...

C66xx_0: GEL Output: Invalidate All Cache... Done.

C66xx_0: GEL Output: GEL Reset...

C66xx_0: GEL Output: GEL Reset... Done.

C66xx_0: GEL Output: Disable all EDMA3 interrupts and events.

EEPROM Writer Utility Version 01.00.00.05

Writing 47888 bytes from DSP memory address 0x0c000000 to EEPROM bus address 0x0051 starting from device address 0x0000
...
Reading 47888 bytes from EEPROM bus address 0x0051 to DSP memory address 0x0c010000 starting from device address 0x0000
...
Verifying data read ...
EEPROM programming completed successfully
Writer:../prebuilt-images/nandwriter_evm6657l.out

NAND:../prebuilt-images/nand.bin

Required NAND files does not exist in ../prebuilt-images/

Writer:../prebuilt-images/norwriter_evm6657l.out

NOR:../prebuilt-images/nor.bin

Required NOR files does not exist in ../prebuilt-images/
</pre></div>
</div>
<p>In the above example, nothing was flashed to NAND or NOR since there
were no nand.bin or nor.bin binaries to flash.</p>
</div>
</div>
</div>
<div class="section" id="porting">
<h2>10.2.4. Porting<a class="headerlink" href="#porting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adding-custom-board-library-target-to-processor-sdk-rtos-makefiles">
<h3>10.2.4.1. Adding Custom Board_Library Target to Processor SDK RTOS makefiles<a class="headerlink" href="#adding-custom-board-library-target-to-processor-sdk-rtos-makefiles" title="Permalink to this headline">¶</a></h3>
<div class="section" id="introduction">
<h4>10.2.4.1.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<p>The following article describes how a custom Board can be added to the
Processor SDK RTOS. The scope of this article is to only describe how to
modify the build files in the PDK to add build steps for your custom
board library. The article does not describe modification of source
files to reflect changes to clocking, DDR and pinmux setup for the
custom board.</p>
<p>The instructions provided in this article uses example of AM572x custom
board but the instructions apply to all the processors supported in
Processor SDK RTOS. Note that the instructions on this wiki were created
using Processor SDK RTOS v3.2 and PDK_AM57xx_1_0_5 and are subject to
change. Also the wiki was created specifically for the newer board
variants like evmAM572x, idkAM572x and evmK2G. For AM335x and AM437x
variant board library has several dependencies on legacy starterware
package, hence additional steps are required and not covered in the
wiki.</p>
</div>
<div class="section" id="instructions-to-add-custom-board-to-the-pdk-build">
<h4>10.2.4.1.2. Instructions to add custom Board to the PDK build<a class="headerlink" href="#instructions-to-add-custom-board-to-the-pdk-build" title="Permalink to this headline">¶</a></h4>
<p><strong>Step 1: Creating new directory for custom board library</strong></p>
<p>In pdk_am57xx_x_x_x/packages/ti/board/src,
Create new directory myCustomBoard and copy files from existing board
library package. We recommend that you copy files from the board which
closely matches your custom board design. In this case, we assume that
the custom board is based on the design of evmAM572x so we copy over
the files from that directory into myCustomBoard folder.</p>
<p><strong>Step 2: Updating names and makefile inside the customBoard package</strong></p>
<p>In pdk_am57xx_x_x_x/packages/ti/board/src/myCustomBoard, Rename file
src_files_evmAM572x.mk to src_files_myCustomBoard.mk. This file will
need a bit of work depending on what elements of board you need for your
platform. We have left all the files evmAM572x_*.c but you can modify as
needed.</p>
<p><strong>Step 3: Adding MACRO based inclusion of updated board_cfg.h
corresponding to custom Board</strong></p>
<p>In packages/ti/board/board_cfg.h, add the lines pointing to board_cfg.h
file in your customBoard package so that updated peripheral instances
and board specific defines can be picked up</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined (myCustomBoard)</span>
<span class="cp">#include</span> <span class="cpf">&lt;ti/board/src/myCustomBoard/include/board_cfg.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><strong>Step 4: Update top level board package makefile to include build for
customBoard Library</strong> The makefile is used to include all relevant make
files for including Low level driver(LLD), source files relevant to
board and the common board.c file</p>
<ul class="simple">
<li><p>In packages/ti/board/build/makefile.mk, add board.c to the
customBoard build :</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ifeq ($(BOARD),$(filter $(BOARD),evmAM335x icev2AM335x skAM335x bbbAM335x evmAM437x idkAM437x skAM437x myCustomBoard evmAM572x idkAM571x idkAM572x evmK2H evmK2K evmK2E evmK2L evmK2G iceK2G evmC6678 evmC6657))
# Common source files across all platforms and cores
SRCS_COMMON += board.c
endif
</pre></div>
</div>
<ul class="simple">
<li><p>Add board library source files and LLD files to the customBoard build</p></li>
</ul>
<p>In packages/ti/board/build/makefile.mk, change</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ifeq ($(BOARD),$(filter $(BOARD), evmAM572x idkAM571x idkAM572x))
include $(PDK_BOARD_COMP_PATH)/src/$(BOARD)/src_files_$(BOARD).mk
include $(PDK_BOARD_COMP_PATH)/src/src_files_lld.mk
CFLAGS_LOCAL_$(BOARD) += -D$(BOARD)
endif
</pre></div>
</div>
<p>to</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ifeq ($(BOARD),$(filter $(BOARD), myCustomBoard evmAM572x idkAM571x idkAM572x))
include $(PDK_BOARD_COMP_PATH)/src/$(BOARD)/src_files_$(BOARD).mk
include $(PDK_BOARD_COMP_PATH)/src/src_files_lld.mk
CFLAGS_LOCAL_$(BOARD) += -D$(BOARD)
endif
</pre></div>
</div>
<p><strong>Step 5: Update Global makerules</strong></p>
<p>build_config.mk defines the global CFLAGS used to compile different PDK
components. Add the following line in the BOARD Specific configurations.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CFLAGS_GLOBAL_customAM572x</span>  <span class="o">=</span> <span class="o">-</span><span class="n">DSOC_AM572x</span> <span class="o">-</span><span class="n">DevmAM572x</span>
</pre></div>
</div>
<p>The SOC_AM572x macro ensures that the CSL aplicable to this SOC will be
included in the build and evmAM572x define will ensure all evmAM572x
specific includes that apply to the customAM572x are part of the build.</p>
<p><strong>Optional step to update RTSC platform definition</strong> If you have a
custom RTSC platform definition for your custom board that updates the
memory and platform configuration using RTSC Tool then you need to
update the platform.mk file that associates the RTSC platfom with the
corresponding board library</p>
<p>In packages/ti/buildmakerules/platform.mk, add the following lines:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ifeq ($(BOARD),$(filter $(BOARD), evmAM572x))
  PLATFORM_XDC = &quot;ti.platforms.evmAM572X&quot;
endif
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ifeq ($(BOARD),$(filter $(BOARD), myCustomBoard))
  PLATFORM_XDC = &quot;evmAM572XCustom&quot;
endif
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SYSBIOS platforms follow the convention to consolidate all
platform definitions under SYSBIOS_INSTALL_PATH/packages/ti/platforms/*
hence the convention ti.platorms.&lt;platformName&gt; but for custom platform,
users are not required to follow this convention.</p>
</div>
<p><strong>Step 6: Update source files corresponding to drivers used in board
library</strong>. src_files_lld.mk file adds source files corresponding to LLD
drivers used in the board library. Usually most boards utilitize control
driver like I2C (for programming the PMIC or reading EEPROM), UART
drivers (for IO) and boot media drivers like (SPI/QSPI, MMC or NAND). In
the example below, we assume that the custom Board library has
dependency on I2C, SPI and UART LLD drivers. Since the LLD drivers will
be linked to the application along with board library, board library
only needs &lt;driver&gt;_soc.c corresponding to SOC used on the custom Board.</p>
<p>In packages/ti/board/src/src_files_lld.mk, add the following lines:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ifeq ($(BOARD),$(filter $(BOARD), myCustomBoard))
SRCDIR +=  $(PDK_INSTALL_PATH)/ti/drv/i2c/soc/am572x \
           $(PDK_INSTALL_PATH)/ti/drv/uart/soc/am572x \
           $(PDK_INSTALL_PATH)/ti/drv/spi/soc/am572x
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>INCDIR +=  $(PDK_INSTALL_PATH)/ti/drv/i2c/soc/am572x \
           $(PDK_INSTALL_PATH)/ti/drv/uart/soc/am572x \
           $(PDK_INSTALL_PATH)/ti/drv/spi/soc/am572x
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># Common source files across all platforms and cores</span>
<span class="n">SRCS_COMMON</span> <span class="o">+=</span> <span class="n">I2C_soc</span><span class="p">.</span><span class="n">c</span> <span class="n">UART_soc</span><span class="p">.</span><span class="n">c</span> <span class="n">SPI_soc</span><span class="p">.</span><span class="n">c</span>
<span class="n">endif</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For all LLD drivers linked to the board library you need to include
corresponding &lt;drv&gt;_soc.c file. For example if you include GPIO driver
for setting board mux then GPIO_soc.c needs to be added to LLD source
files.</p>
</div>
<p><strong>Step 7: Add custom Board to BOARDLIST and update CORELIST</strong></p>
<p>In packages/ti/board/board_component.mk, modify the build to add your
custom board and specify the cores for which you want to build the board
library. Example to build board library for only A15 and C66x cores,
limit the build by specify only a15_0 and C66x in the CORELIST</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">board_lib_BOARDLIST</span>       <span class="o">=</span> <span class="n">myCustomBoard</span> <span class="n">evmAM335x</span> <span class="n">icev2AM335x</span> <span class="n">skAM335x</span> <span class="n">bbbAM335x</span> <span class="n">evmAM437x</span> <span class="n">idkAM437x</span> <span class="n">skAM437x</span> <span class="n">evmAM572x</span> <span class="n">idkAM571x</span> <span class="n">idkAM572x</span> <span class="n">evmK2H</span> <span class="n">evmK2K</span> <span class="n">evmK2E</span> <span class="n">evmK2L</span> <span class="n">evmK2G</span> <span class="n">iceK2G</span> \
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#board_lib_am572x_CORELIST = c66x a15_0 ipu1_0</span>
<span class="n">board_lib_am572x_CORELIST</span> <span class="o">=</span> <span class="n">a15_0</span> <span class="n">c66x</span>
</pre></div>
</div>
<p><strong>Step 8: Update .bld files for XDCTOOL based build steps.</strong></p>
<p>Make corresponding changes in packages/ti/board/config.bld, by adding
the following lines:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">myCustomBoard</span> <span class="o">=</span> <span class="p">{</span>
   <span class="nl">name</span><span class="p">:</span> <span class="s">&quot;myCustomBoard&quot;</span><span class="p">,</span>
   <span class="nl">ccOpts</span><span class="p">:</span> <span class="s">&quot;-DevmAM572x -DSOC_AM572x&quot;</span><span class="p">,</span>
   <span class="nl">targets</span><span class="p">:</span> <span class="p">[</span><span class="n">C66LE</span><span class="p">,</span><span class="n">A15LE</span> <span class="p">]</span>
   <span class="nl">lldFiles</span><span class="p">:</span> <span class="p">[</span> <span class="s">&quot;$(PDK_INSTALL_PATH)/ti/drv/i2c/soc/am572x/I2C_soc.c&quot;</span><span class="p">,</span>
           <span class="s">&quot;$(PDK_INSTALL_PATH)/ti/drv/uart/soc/am572x/UART_soc.c&quot;</span><span class="p">,</span>
           <span class="s">&quot;$(PDK_INSTALL_PATH)/ti/drv/spi/soc/am572x/SPI_soc.c&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">boards</span> <span class="o">=</span> <span class="p">[</span> <span class="n">evmAM335x</span><span class="p">,</span> <span class="n">icev2AM335x</span><span class="p">,</span> <span class="n">skAM335x</span><span class="p">,</span> <span class="n">bbbAM335x</span><span class="p">,</span> <span class="n">evmAM437x</span><span class="p">,</span> <span class="n">idkAM437x</span><span class="p">,</span> <span class="n">skAM437x</span><span class="p">,</span> <span class="n">myCustomBoard</span><span class="p">,</span> <span class="n">evmAM572x</span><span class="p">,</span> <span class="n">idkAM571x</span><span class="p">,</span> <span class="n">idkAM572x</span><span class="p">,</span> <span class="n">evmK2H</span><span class="p">,</span> <span class="n">evmK2K</span><span class="p">,</span> <span class="n">evmK2E</span><span class="p">,</span> <span class="n">evmK2L</span><span class="p">,</span> <span class="n">evmK2G</span><span class="p">,</span> <span class="n">evmC6678</span><span class="p">,</span> <span class="n">evmC6657</span> <span class="p">];</span>
</pre></div>
</div>
<p>Also, in packages/ti/board/package.bld, I added the following line:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Pkg</span><span class="p">.</span><span class="n">otherFiles</span><span class="p">[</span><span class="n">Pkg</span><span class="p">.</span><span class="n">otherFiles</span><span class="p">.</span><span class="n">length</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;src/myCustomBoard/src_files_myCustomBoard.mk&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Step 9: Setup Top level PDK build files to add the Custom board to
setup environment.</strong></p>
<p>Final setup involves updating the top level setup file for PDK package
to update to setup the build environment to include the custom Board in
setup. This can be done by commenting out the top line and adding in the
bottom line in pdksetupenv.bat:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>@REM if not defined LIMIT_BOARDS set LIMIT_BOARDS=evmAM572x idkAM571x idkAM572x
if not defined LIMIT_BOARDS set LIMIT_BOARDS=myCustomBoard
</pre></div>
</div>
<p><strong>Alternative:</strong> Invoke the build using command line options to limit
the build to specific board, specific SOC and specific CORE. For
example, if you want to build the A15 version of board library for
AM572x EVM, you can invoke the build using:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">gmake</span> <span class="n">board_lib</span> <span class="n">LIMIT_SOCS</span><span class="o">=</span><span class="n">am572x</span> <span class="n">LIMIT_BOARDS</span><span class="o">=</span><span class="n">customAM572x</span> <span class="n">LIMIT_CORES</span><span class="o">=</span><span class="n">a15_0</span>
</pre></div>
</div>
<p><strong>Step 10 : Building the custom board with the updated settings</strong></p>
<p>To build package change directory to
&lt;SDK_INSTALL_PATH&gt;/pdk_am57xx_x_x_x/packages, first run pdksetupenv.bat</p>
<p>To make just the board library: gmake board_lib</p>
</div>
<div class="section" id="example-custom-board-library-for-reference">
<h4>10.2.4.1.3. Example custom Board library for reference<a class="headerlink" href="#example-custom-board-library-for-reference" title="Permalink to this headline">¶</a></h4>
<p>The package provided below provides updated files for building
customBoard “customAM572x” following all steps described above. Please
compare the files to the evmAM57xx board library files to follow the
steps to add your own board library.</p>
<p><a class="reference external" href="/index.php?title=Special:Upload&amp;wpDestFile=Pdk_packages_ti_board_customAM572x.zip">File:Pdk packages ti board
customAM572x.zip</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to software distribution policy on the wiki, we have removed the
file linked here. Users can refer to the discussion and zipped package
linked from E2E post provided below:</p>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://e2e.ti.com/support/arm/sitara_arm/f/791/p/555022/2040948#pi316653=2">E2E post on creation of custom board
library</a></p></li>
</ul>
</div>
<div class="section" id="additional-steps-for-am335x-am437x-users">
<h4>10.2.4.1.4. Additional steps for AM335x/AM437x users<a class="headerlink" href="#additional-steps-for-am335x-am437x-users" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently the AM335x and AM437x board libraries re-use the board support
that was used in legacy starterware software. AM335x and AM437x users
will need to additionally modify build files in starterware to build
their custom board library. Additional steps required for AM335x/AM437x
will be added to this article soon in this section</p>
</div>
</div>
</div>
<div class="section" id="processor-sdk-rtos-porting-guide-for-am571x-am570x-speed-grades">
<h3>10.2.4.2. Processor SDK RTOS Porting Guide for AM571x/AM570x Speed Grades<a class="headerlink" href="#processor-sdk-rtos-porting-guide-for-am571x-am570x-speed-grades" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id30">
<h4>10.2.4.2.1. Description<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<p>The AM57x Family of Processors includes a wide range of operating
performance to meet the needs of a number of broad applications. Among
these options are a variety of speed grades to meet different
performance points. These devices have a number of specialized cores to
provide applications specific computation capabilities. These cores can
be run at different speeds to fine tune the processor to the needs of
the application, power budget, thermal characteristics, etc.</p>
<p>The Processor SDK for RTOS is a software development package provided to
speed development by providing a software reference. This package now
includes support for then entire AM57x family of processors which can be
broken down into the AM572x, AM571x, and AM570x sets of devices or
sub-familes. Most of the devices in this family are supported by the
Processor SDK for RTOS right out of the box. This support is tested and
validated on TI designed EVMs. These EVMs use the highest performance
devices in the family in order to allow users to evaluate the entire
spectrum of performance.</p>
<p>The AM571X and AM570x supports several lower power speed grades. If one
of these devices is being used on the custom board, the GEL file and the
board library needs to be changed to account for this difference. If
this change is not made, the device could be running out of
specification. These changes may reach across other cores and clocks on
the device as well, depending on what speeds they need to operate at.
This document is not an exhaustive list of all the changes needed for a
proper board port as it focused on the changes needed to enable
different speed grades.</p>
</div>
<div class="section" id="comparison-of-am572x-am571x-and-am570x-devices">
<h4>10.2.4.2.2. Comparison of AM572x, AM571x and AM570x devices<a class="headerlink" href="#comparison-of-am572x-am571x-and-am570x-devices" title="Permalink to this headline">¶</a></h4>
<p><strong>Quick Feature Set comparison between devices in Sitara AM57xx
family :</strong></p>
<img alt="../_images/AM572x_AM571X_AM570x_Comparison.png" src="../_images/AM572x_AM571X_AM570x_Comparison.png" />
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Supported OPP on AM57xx devices:</strong></div>
</div>
<img alt="../_images/AM57xx_OPP.png" src="../_images/AM57xx_OPP.png" />
</div>
<div class="section" id="code-composer-studio-ccs-and-emulation-support">
<h4>10.2.4.2.3. Code Composer Studio (CCS) and Emulation support<a class="headerlink" href="#code-composer-studio-ccs-and-emulation-support" title="Permalink to this headline">¶</a></h4>
<p>TI Supports following evaluation platform for AM57xx class of devices:</p>
<ul class="simple">
<li><p><a class="reference external" href="index_release_specific.html#supported-platforms-and-versions">AM572x GP EVM</a></p></li>
<li><p><a class="reference external" href="index_release_specific.html#supported-platforms-and-versions">AM571x IDK</a></p></li>
<li><p><a class="reference external" href="index_release_specific.html#supported-platforms-and-versions">AM572x IDK</a></p></li>
</ul>
<p>When developer selects any of the above platforms in Code composer
Studio, the target configuration automatically brings in the required
initialization files and GEL files to configure the clocks, slave cores,
external memory.</p>
<p>If you are using a custom platform or AM5708 device that is not
available on a TI Evaluation platform, you can follow the steps provided
below to connect to the SOC by reusing the GEL files that are provided
for TI evaluation platforms. For example, here we demonstrate how you
can create a target configuration for AM570x and connect to the device
if your board design is based of one of TI evalauation platforms listed
below. The assumption here is that the custom board is based off AM571X
IDK platform</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Support for AM5708 was added to Sitara Chip Support Package 1.3.4
in Code composer Studio. If you don`t see the device definition in CCS,
then you can update the Sitara Chip Support package by going to
<a class="reference external" href="http://ap-fpdsp-swapps.dal.design.ti.com/index.php/File:Check_Updates.png">Help-&gt;Check
Updates</a></p>
</div>
<p><strong>Step 1: Select the AM570x part number that is populated on your custom
platform:</strong></p>
<img alt="../_images/AM5708_EVM_target_configurations.png" src="../_images/AM5708_EVM_target_configurations.png" />
<p><strong>Step 2: Setup the GEL files for the SOC</strong> Go to the Advanced Tab as
shown in the previous screenshot and update startup GEL file in the A15
Core as shown in the screenshot below</p>
<img alt="../_images/Advanced_settings_GEL_setup.png" src="../_images/Advanced_settings_GEL_setup.png" />
</div>
<div class="section" id="board-library-changes-to-consider-for-using-processor-sdk-rtos">
<h4>10.2.4.2.4. Board Library Changes to Consider for Using Processor SDK RTOS<a class="headerlink" href="#board-library-changes-to-consider-for-using-processor-sdk-rtos" title="Permalink to this headline">¶</a></h4>
<div class="section" id="clock-and-prcm-updates-to-consider">
<h5>10.2.4.2.4.1. Clock and PRCM Updates to consider<a class="headerlink" href="#clock-and-prcm-updates-to-consider" title="Permalink to this headline">¶</a></h5>
<p>The board library provides setting for OPP_NOM, OPP_OD and OPP_HIGH in
the PLL settings using 20 MHz input clock that has been used on the
AM572x GP EVM as well as the AM571x IDK platform. This allows customers
to setup the MPU to 1.5, 1.176 and 1GHz. For AM570x devices, we support
the “J” and the “D” variant which support the following max speeds on
the DPLLs:</p>
<img alt="../_images/AM5706_Speed_Grades.png" src="../_images/AM5706_Speed_Grades.png" />
<p>When using the “J” speed grade, ensure that the DPLLs in the board set
the DPLL to OPP_NOM and not for OPP_OD or OPP_HIGH.</p>
<p>To do this, you can invoke the Board_Init from your application using
either</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Board_initCfg</span> <span class="n">boardCfg</span><span class="p">;</span>
<span class="n">boardCfg</span> <span class="o">=</span> <span class="n">BOARD_INIT_PLL_OPP_NOM</span><span class="p">;</span>
<span class="n">boardCfg</span> <span class="o">|=</span> <span class="n">BOARD_INIT_UNLOCK_MMR</span> <span class="o">|</span>
       <span class="n">BOARD_INIT_MODULE_CLOCK</span> <span class="o">|</span>
       <span class="n">BOARD_INIT_PINMUX_CONFIG</span> <span class="o">|</span>
       <span class="n">BOARD_INIT_DDR</span> <span class="o">|</span>
       <span class="n">BOARD_INIT_UART_STDIO</span> <span class="o">|</span>
       <span class="n">BOARD_INIT_WATCHDOG_DISABLE</span><span class="p">;</span>
<span class="cm">/* Board Library Init. */</span>
   <span class="n">Board_init</span><span class="p">(</span><span class="n">boardCfg</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When bootloading direct from flash media, this change may also be
required in the SBL code</p>
</div>
<p>When using “D” rated parts that run at 500 MHz, in addition to the
above configuration, you will also need to modify OPP_NOM settings in
the board library by updating the DPLL setting for MPU and DSP in the
file &lt;BoardName&gt;_pll.c as shown below:</p>
<p><strong>Step1 : Update MPU, DSP, IVA and GPU DPLL setting</strong></p>
<ul class="simple">
<li><p><strong>MPU DPLL Changes:</strong></p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Default to OPP_NOM */</span>
     <span class="cm">/* 500MHz at 20MHz sys_clk */</span>
     <span class="n">mpuPllcParam</span><span class="p">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">250U</span><span class="p">;</span>
     <span class="n">mpuPllcParam</span><span class="p">.</span><span class="n">div</span> <span class="o">=</span> <span class="mi">9U</span><span class="p">;</span>
     <span class="n">mpuPllcParam</span><span class="p">.</span><span class="n">dccEnable</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>
     <span class="n">mpuPllcParam</span><span class="p">.</span><span class="n">divM2</span> <span class="o">=</span> <span class="mi">1U</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>DSP DPLL Changes:</strong></p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* 500MHz at 20MHz sys_clk */</span>
<span class="n">dspPllcParam</span><span class="p">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">130U</span><span class="p">;</span>
<span class="n">dspPllcParam</span><span class="p">.</span><span class="n">div</span> <span class="o">=</span> <span class="mi">3U</span><span class="p">;</span>
<span class="n">dspPllcParam</span><span class="p">.</span><span class="n">divM2</span> <span class="o">=</span> <span class="mi">1U</span><span class="p">;</span>
<span class="n">dspPllcParam</span><span class="p">.</span><span class="n">divM3</span> <span class="o">=</span> <span class="mi">3U</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Remove IVA and GPU PLL settings</strong></p></li>
</ul>
<p>Since IVA and GPU modules are not available on the device, we recommend
removing the ivaPLL and gpuPLL settings in board.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>              <span class="cm">/* Default to OPP_NOM */</span>
              <span class="cm">/* 388.3MHz at 20MHz sys_clk */</span>
<span class="o">-</span>                <span class="n">ivaPllcParam</span><span class="p">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">233U</span><span class="p">;</span>
<span class="o">-</span>                <span class="n">ivaPllcParam</span><span class="p">.</span><span class="n">div</span> <span class="o">=</span> <span class="mi">3U</span><span class="p">;</span>
<span class="o">-</span>                <span class="n">ivaPllcParam</span><span class="p">.</span><span class="n">divM2</span> <span class="o">=</span> <span class="mi">3U</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>             <span class="cm">/* Default to OPP_NOM */</span>
             <span class="cm">/* 425MHz at 20MHz sys_clk */</span>
<span class="o">-</span>                <span class="n">gpuPllcParam</span><span class="p">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">170U</span><span class="p">;</span>
<span class="o">-</span>                <span class="n">gpuPllcParam</span><span class="p">.</span><span class="n">div</span> <span class="o">=</span> <span class="mi">3U</span><span class="p">;</span>
<span class="o">-</span>                <span class="n">gpuPllcParam</span><span class="p">.</span><span class="n">divM2</span> <span class="o">=</span> <span class="mi">2U</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Step 2 : Disable clocks configuration and wakeup for IVA in PRCM</strong></p>
<ul class="simple">
<li><p><strong>Remove IVA wakeup and Module configuration</strong></p></li>
</ul>
<p>The following updates need to be made in the file &lt;BoardName&gt;_clock.c to
remove IVA wakeup and clock configuration</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>        <span class="n">CSL_FINST</span><span class="p">(</span><span class="n">ivaCmReg</span><span class="o">-&gt;</span><span class="n">CM_IVA_CLKSTCTRL_REG</span><span class="p">,</span>
<span class="o">-</span>        <span class="n">IVA_CM_CORE_CM_IVA_CLKSTCTRL_REG_CLKTRCTRL</span><span class="p">,</span> <span class="n">SW_WKUP</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>   <span class="cm">/* PRCM Specialized module mode setting functions */</span>
<span class="o">-</span>   <span class="n">CSL_FINST</span><span class="p">(</span><span class="n">ivaCmReg</span><span class="o">-&gt;</span><span class="n">CM_IVA_SL2_CLKCTRL_REG</span><span class="p">,</span>
<span class="o">-</span>       <span class="n">IVA_CM_CORE_CM_IVA_SL2_CLKCTRL_REG_MODULEMODE</span><span class="p">,</span> <span class="n">AUTO</span><span class="p">);</span>
<span class="o">-</span>  <span class="k">while</span><span class="p">(</span><span class="n">CSL_IVA_CM_CORE_CM_IVA_SL2_CLKCTRL_REG_IDLEST_DISABLE</span> <span class="o">==</span>
<span class="o">-</span>      <span class="n">CSL_FEXT</span><span class="p">(</span><span class="n">ivaCmReg</span><span class="o">-&gt;</span><span class="n">CM_IVA_SL2_CLKCTRL_REG</span><span class="p">,</span>
<span class="o">-</span>       <span class="n">IVA_CM_CORE_CM_IVA_SL2_CLKCTRL_REG_IDLEST</span><span class="p">));</span>
<span class="o">-</span>   <span class="n">CSL_FINST</span><span class="p">(</span><span class="n">ivaCmReg</span><span class="o">-&gt;</span><span class="n">CM_IVA_IVA_CLKCTRL_REG</span><span class="p">,</span>
<span class="o">-</span>       <span class="n">IVA_CM_CORE_CM_IVA_IVA_CLKCTRL_REG_MODULEMODE</span><span class="p">,</span> <span class="n">AUTO</span><span class="p">);</span>
<span class="o">-</span>   <span class="k">while</span><span class="p">(</span><span class="n">CSL_IVA_CM_CORE_CM_IVA_IVA_CLKCTRL_REG_IDLEST_DISABLE</span> <span class="o">==</span>
<span class="o">-</span>      <span class="n">CSL_FEXT</span><span class="p">(</span><span class="n">ivaCmReg</span><span class="o">-&gt;</span><span class="n">CM_IVA_IVA_CLKCTRL_REG</span><span class="p">,</span>
<span class="o">-</span>       <span class="n">IVA_CM_CORE_CM_IVA_IVA_CLKCTRL_REG_IDLEST</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-ddr-interfaces">
<h4>10.2.4.2.5. Configure DDR Interfaces<a class="headerlink" href="#configure-ddr-interfaces" title="Permalink to this headline">¶</a></h4>
<p>An important one to consider is the speed of the DDR memory. The clock
for the DDR is selected using the same dplls structure. Some higher
speed grade parts support a 667 MHz DDR clock, but some of the lower
speed grade parts only support a 533 MHz DDR3 clock. Make sure to choose
the appropriate DDR clock for the device on the custom board.</p>
<p>Over in the board/src/&lt;BoardName&gt;/&lt;BoardName_ddr&gt;.c file, make sure that
the EMIF is being configured correctly for the appropriate speed, and
that the appropriate number of EMIFs is being selected to match the part
being used. AM572x part has 2 DDR interfaces running at 533 MHz and the
AM571x (and AM570x) only have one running at 667 MHz. This code can be
kept or removed by the board port. As changes are made, the code must
make sure to configure the new board correctly, with the appropriate
number of DDR interfaces and speed configuration.</p>
<p>For AM571x and AM570x, make sure to use the code for the AM571x IDK in
board/src/&lt;BoardName&gt;/&lt;BoardName_ddr&gt;.c to select 1 EMIF:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* MA_LISA_MAP_i */</span>
<span class="n">hMampuLsm</span><span class="o">-&gt;</span><span class="n">MAP_0</span> <span class="o">=</span> <span class="mh">0x80600100U</span><span class="p">;</span>
<span class="cm">/* DMM_LISA_MAP_i */</span>
<span class="n">hDmmCfg</span><span class="o">-&gt;</span><span class="n">LISA_MAP</span><span class="p">[</span><span class="mi">0U</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x80600100U</span><span class="p">;</span>
</pre></div>
</div>
<p>For AM572x, this is mapped as following</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* MA_LISA_MAP_i */</span>
<span class="n">hMampuLsm</span><span class="o">-&gt;</span><span class="n">MAP_0</span> <span class="o">=</span> <span class="mh">0x80740300</span><span class="p">;</span>
<span class="n">hMampuLsm</span><span class="o">-&gt;</span><span class="n">MAP_1</span> <span class="o">=</span> <span class="mh">0x80740300</span><span class="p">;</span>
<span class="cm">/* DMM_LISA_MAP_i */</span>
<span class="n">hDmmCfg</span><span class="o">-&gt;</span><span class="n">LISA_MAP</span><span class="p">[</span><span class="mi">0U</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x80740300</span><span class="p">;</span>
<span class="n">hDmmCfg</span><span class="o">-&gt;</span><span class="n">LISA_MAP</span><span class="p">[</span><span class="mi">1U</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x80740300</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Processor SDK RTOS provides am570x_ddr.c file in the idkAM571x board
library for reference for configuring DDR on AM570x parts</p>
</div>
</div>
<div class="section" id="pinmux-changes-to-consider">
<h4>10.2.4.2.6. Pinmux Changes to Consider<a class="headerlink" href="#pinmux-changes-to-consider" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>For part number where the Display subsystem or SATA is not available,
the pins can be configured to any other pin functionality that may be
required in the system. If you don`t need to use these pins, we
recommend that you leave these pins in default MUXMODE and terminate
the pinmux as recommended in the <a class="reference external" href="http://processors.wiki.ti.com/index.php/AM57xx_Schematic_Checklist">Schematics
Checklist</a>.</p></li>
<li><p>There is no pinmux setting for CSI2 module so you can leave the
MUXMODE=0 on those pins if there is no instance of the peripheral</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Processor SDK RTOS provides board/src/idkAM571x/include/am570x_pinmux.h
file in the idkAM571x board library for reference for configuring pinmux
on AM570x based hardware platform</p>
</div>
</div>
<div class="section" id="driver-soc-module-clock-changes">
<h4>10.2.4.2.7. Driver SOC Module clock changes<a class="headerlink" href="#driver-soc-module-clock-changes" title="Permalink to this headline">¶</a></h4>
<p>Some control drivers use default Module input clock frequency settings
in &lt;module&gt;_soc.c file that gets used by the Low level drivers to
configure the peripheral clocks. The default module input clock
frequency is set to the OPP_NOM values that are available on the
superset variant of the device so if you are using lower speed grades.
Ensure you change the default to match the module clock on the 500 MHz
settings or you can use the following sequence to update the settings.
Code below describes how the SPI driver module input clock frequency can
be modified</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SPI_v1_HWAttrs</span> <span class="n">spi_cfg</span><span class="p">;</span>
<span class="cm">/* Get the default SPI init configurations */</span>
<span class="n">SPI_socGetInitCfg</span><span class="p">(</span><span class="n">TEST_SPI_PORT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spi_cfg</span><span class="p">);</span>
<span class="cm">/* Modify the default SPI configurations if necessary */</span>
<span class="n">spi_cfg</span><span class="p">.</span><span class="n">inputClkFreq</span> <span class="o">=</span> <span class="mi">24000000</span><span class="p">;</span>
<span class="cm">/* Set the default SPI init configurations */</span>
<span class="n">SPI_socSetInitCfg</span><span class="p">(</span><span class="n">TEST_SPI_PORT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spi_cfg</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="related-article-for-processor-sdk-linux-developers">
<h4>10.2.4.2.8. Related Article for Processor SDK Linux developers<a class="headerlink" href="#related-article-for-processor-sdk-linux-developers" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/Linux_Porting_Guide_for_AM571x/AM570x_Speed_Grades">Linux_Porting_Guide_for_AM571x/AM570x_Speed_Grades</a></p></li>
</ul>
<p class="rubric" id="useful-utilities">Useful Utilities</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ti.com/tool/clockTreeTool">Clock Tree Tool</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/tool/PinMuxTool">Pin Mux tool</a></p></li>
</ul>
</div>
<div class="section" id="support">
<h4>10.2.4.2.9. Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h4>
<p>For any questions related Usage of AM572x, AM571x and AM570x devices,
please post your question on TI E2E Forums</p>
<ul class="simple">
<li><p><a class="reference external" href="https://e2e.ti.com/support/arm/sitara_arm/">TI E2E Forums for Sitara
Processors</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="system-integration">
<h2>10.2.5. System Integration<a class="headerlink" href="#system-integration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-dsp-and-ipu-firmware-using-pdk-drivers-and-ipc-to-load-from-arm-linux-on-am57xx-devices">
<h3>10.2.5.1. Create DSP and IPU firmware using PDK drivers and IPC to load from ARM Linux on AM57xx devices<a class="headerlink" href="#create-dsp-and-ipu-firmware-using-pdk-drivers-and-ipc-to-load-from-arm-linux-on-am57xx-devices" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id31">
<h4>10.2.5.1.1. Introduction<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<p>This article is geared toward AM57xx users that are running Linux on the
Cortex A15. The goal is to help users understand how to gain entitlement
to the DSP (c66x) and IPU (Cortex M4) subsystems of the AM57xx.</p>
<p>AM572x device has two IPU subsystems (IPUSS), each of which has 2 cores.
IPU2 is used as a controller in multi-media applications, so if you have
Processor SDK Linux running, chances are that IPU2 already has firmware
loaded. However, IPU1 is open for general purpose programming to offload
the ARM tasks.</p>
<p>There are many facets to this task: building, loading, debugging, MMUs,
memory sharing, etc. This article intends to take incremental steps
toward understanding all of those pieces.</p>
<p class="rubric" id="software-dependencies-to-get-started">Software Dependencies to Get Started</p>
<p>Prerequisites</p>
<ul class="simple">
<li><p><a class="reference external" href="http://software-dl.ti.com/processor-sdk-linux/esd/AM57X/latest/index_FDS.html">Processor SDK Linux for
AM57xx</a>
(Version 3.01 or newer needed)</p></li>
<li><p><a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/AM57X/latest/index_FDS.html">Processor SDK RTOS for
AM57xx</a></p></li>
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/Download_CCS">Code Composer
Studio</a>
(choose version as specified on Proc SDK download page)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please be sure that you have the same version number
for both Processor SDK RTOS and Linux.</p>
</div>
<p>For reference within the context of this wiki page, the Linux SDK is
installed at the following location:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>/mnt/data/user/ti-processor-sdk-linux-am57xx-evm-xx.xx.xx.xx
├── bin
├── board-support
├── docs
├── example-applications
├── filesystem
├── ipc-build.txt
├── linux-devkit
├── Makefile
├── Rules.make
└── setup.sh
</pre></div>
</div>
<p>The RTOS SDK is installed at:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>/mnt/data/user/my_custom_install_sdk_rtos_am57xx_xx.xx
├── bios_6_xx_xx_xx
├── cg_xml
├── ctoolslib_x_x_x_x
├── dsplib_c66x_x_x_x_x
├── edma3_lld_2_xx_xx_xx
├── framework_components_x_xx_xx_xx
├── imglib_c66x_x_x_x_x
├── ipc_3_xx_xx_xx
├── mathlib_c66x_3_x_x_x
├── ndk_2_xx_xx_xx
├── opencl_rtos_am57xx_01_01_xx_xx
├── openmp_dsp_am57xx_2_04_xx_xx
├── pdk_am57xx_x_x_x
├── processor_sdk_rtos_am57xx_x_xx_xx_xx
├── uia_2_xx_xx_xx
├── xdais_7_xx_xx_xx
</pre></div>
</div>
<p>CCS is installed at:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>/mnt/data/user/ti/my_custom_ccs_x.x.x_install
├── ccsvX
│   ├── ccs_base
│   ├── doc
│   ├── eclipse
│   ├── install_info
│   ├── install_logs
│   ├── install_scripts
│   ├── tools
│   ├── uninstall_ccs
│   ├── uninstall_ccs.dat
│   ├── uninstallers
│   └── utils
├── Code Composer Studio x.x.x.desktop
└── xdctools_x_xx_xx_xx_core
    ├── bin
    ├── config.jar
    ├── docs
    ├── eclipse
    ├── etc
    ├── gmake
    ├── include
    ├── package
    ├── packages
    ├── package.xdc
    ├── tconfini.tcf
    ├── xdc
    ├── xdctools_3_xx_xx_xx_manifest.html
    ├── xdctools_3_xx_xx_xx_release_notes.html
    ├── xs
    └── xs.x86U
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="typical-boot-flow-on-am572x-for-arm-linux-users">Typical Boot Flow on AM572x for ARM Linux users</p>
<p>AM57xx SOC’s have multiple processor cores - Cortex A15, C66x DSP’s and
ARM M4 cores. The A15 typically runs a HLOS like Linux/QNX/Android and
the remotecores(DSP’s and M4’s) run a RTOS. In the normal operation,
boot loader(U-Boot/SPL) boots and loads the A15 with the HLOS. The A15
boots the DSP and the M4 cores.</p>
<img alt="../_images/Normal-boot.png" src="../_images/Normal-boot.png" />
<p>In this sequence, the interval between the Power on Reset and the
remotecores (i.e. the DSP’s and the M4’s) executing is dependent on the
HLOS initialization time.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="getting-started-with-ipc-linux-examples">
<h4>10.2.5.1.2. Getting Started with IPC Linux Examples<a class="headerlink" href="#getting-started-with-ipc-linux-examples" title="Permalink to this headline">¶</a></h4>
<p>The figure below illustrates how remoteproc/rpmsg driver from ARM Linux
kernel communicates with IPC driver on slave processor (e.g. DSP, IPU,
etc) running RTOS.</p>
<img alt="../_images/LinuxIPC_with_RTOS_Slave.png" src="../_images/LinuxIPC_with_RTOS_Slave.png" />
<p>In order to setup IPC on slave cores, we provide some pre-built examples
in IPC package that can be run from ARM Linux. The subsequent sections
describe how to build and run this examples and use that as a starting
point for this effort.</p>
<p class="rubric" id="building-the-bundled-ipc-examples">Building the Bundled IPC Examples</p>
<p>The instructions to build IPC examples found under
ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf have been provided in the
<strong>`Processor_SDK IPC Quick Start
Guide &lt;http://processors.wiki.ti.com/index.php/Processor_SDK_IPC_Quick_Start_Guide#Build_IPC_Linux_examples&gt;`__.</strong></p>
<p>Let’s focus on one example in particular, ex02_messageq, which is
located at
<strong>&lt;rtos-sdk-install-dir&gt;/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq</strong>.
Here are the key files that you should see after a successful build:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>├── dsp1
│   └── bin
│       ├── debug
│       │   └── server_dsp1.xe66
│       └── release
│           └── server_dsp1.xe66
├── dsp2
│   └── bin
│       ├── debug
│       │   └── server_dsp2.xe66
│       └── release
│           └── server_dsp2.xe66
├── host
│       ├── debug
│       │   └── app_host
│       └── release
│           └── app_host
├── ipu1
│   └── bin
│       ├── debug
│       │   └── server_ipu1.xem4
│       └── release
│           └── server_ipu1.xem4
└── ipu2
    └── bin
        ├── debug
        │   └── server_ipu2.xem4
        └── release
            └── server_ipu2.xem4
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="running-the-bundled-ipc-examples">Running the Bundled IPC Examples</p>
<p>On the target, let’s create a directory called ipc-starter:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# mkdir -p /home/root/ipc-starter
root@am57xx-evm:~# cd /home/root/ipc-starter/
</pre></div>
</div>
<p>You will need to copy the ex02_messageq directory of your host PC to
that directory on the target (through SD card, NFS export, SCP, etc.).
You can copy the entire directory, though we’re primarily interested in
these files:</p>
<ul class="simple">
<li><p>dsp1/bin/debug/server_dsp1.xe66</p></li>
<li><p>dsp2/bin/debug/server_dsp2.xe66</p></li>
<li><p>host/bin/debug/app_host</p></li>
<li><p>ipu1/bin/debug/server_ipu1.xem4</p></li>
<li><p>ipu2/bin/debug/server_ipu2.xem4</p></li>
</ul>
<p>The remoteproc driver is hard-coded to look for specific files when
loading the DSP/M4. Here are the files it looks for:</p>
<ul class="simple">
<li><p>/lib/firmware/dra7-dsp1-fw.xe66</p></li>
<li><p>/lib/firmware/dra7-dsp2-fw.xe66</p></li>
<li><p>/lib/firmware/dra7-ipu1-fw.xem4</p></li>
<li><p>/lib/firmware/dra7-ipu2-fw.xem4</p></li>
</ul>
<p>These are generally a soft link to the intended executable. So for
example, let’s update the DSP1 executable on the target:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# cd /lib/firmware/
root@am57xx-evm:/lib/firmware# rm dra7-dsp1-fw.xe66
root@am57xx-evm:/lib/firmware# ln -s /home/root/ipc-starter/ex02_messageq/dsp1/bin/debug/server_dsp1.xe66 dra7-dsp1-fw.xe66
</pre></div>
</div>
<p>To reload DSP1 with this new executable, we perform the following steps:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:/lib/firmware# cd /sys/bus/platform/drivers/omap-rproc/
root@am57xx-evm:/sys/bus/platform/drivers/omap-rproc# echo 40800000.dsp &gt; unbind
[27639.985631] omap_hwmod: mmu0_dsp1: _wait_target_disable failed
[27639.991534] omap-iommu 40d01000.mmu: 40d01000.mmu: version 3.0
[27639.997610] omap-iommu 40d02000.mmu: 40d02000.mmu: version 3.0
[27640.017557] omap_hwmod: mmu1_dsp1: _wait_target_disable failed
[27640.030571] omap_hwmod: mmu0_dsp1: _wait_target_disable failed
[27640.036605]  remoteproc2: stopped remote processor 40800000.dsp
[27640.042805]  remoteproc2: releasing 40800000.dsp
root@am57xx-evm:/sys/bus/platform/drivers/omap-rproc# echo 40800000.dsp &gt; bind
[27645.958613] omap-rproc 40800000.dsp: assigned reserved memory node dsp1_cma@99000000
[27645.966452]  remoteproc2: 40800000.dsp is available
[27645.971410]  remoteproc2: Note: remoteproc is still under development and considered experimental.
[27645.980536]  remoteproc2: THE BINARY FORMAT IS NOT YET FINALIZED, and backward compatibility isn&#39;t yet guaranteed.
root@am57xx-evm:/sys/bus/platform/drivers/omap-rproc# [27646.008171]  remoteproc2: powering up 40800000.dsp
[27646.013038]  remoteproc2: Booting fw image dra7-dsp1-fw.xe66, size 4706800
[27646.028920] omap_hwmod: mmu0_dsp1: _wait_target_disable failed
[27646.034819] omap-iommu 40d01000.mmu: 40d01000.mmu: version 3.0
[27646.040772] omap-iommu 40d02000.mmu: 40d02000.mmu: version 3.0
[27646.058323]  remoteproc2: remote processor 40800000.dsp is now up
[27646.064772] virtio_rpmsg_bus virtio2: rpmsg host is online
[27646.072271]  remoteproc2: registered virtio2 (type 7)
[27646.078026] virtio_rpmsg_bus virtio2: creating channel rpmsg-proto addr 0x3d
</pre></div>
</div>
<p>More info related to loading firmware to the various cores can be found
<a class="reference external" href="/index.php/Processor_Training:_Multimedia#Firmware_Loading_and_Unloading">here</a>.</p>
<p>Finally, we can run the example on DSP1:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:/sys/bus/platform/drivers/omap-rproc# cd /home/root/ipc-starter/ex02_messageq/host/bin/debug
root@am57xx-evm:~/ipc-starter/ex02_messageq/host/bin/debug# ./app_host DSP1
--&gt; main:
[33590.700700] omap_hwmod: mmu0_dsp2: _wait_target_disable failed
[33590.706609] omap-iommu 41501000.mmu: 41501000.mmu: version 3.0
[33590.718798] omap-iommu 41502000.mmu: 41502000.mmu: version 3.0
--&gt; Main_main:
--&gt; App_create:
App_create: Host is ready
&lt;-- App_create:
--&gt; App_exec:
App_exec: sending message 1
App_exec: sending message 2
App_exec: sending message 3
App_exec: message received, sending message 4
App_exec: message received, sending message 5
App_exec: message received, sending message 6
App_exec: message received, sending message 7
App_exec: message received, sending message 8
App_exec: message received, sending message 9
App_exec: message received, sending message 10
App_exec: message received, sending message 11
App_exec: message received, sending message 12
App_exec: message received, sending message 13
App_exec: message received, sending message 14
App_exec: message received, sending message 15
App_exec: message received
App_exec: message received
App_exec: message received
&lt;-- App_exec: 0
--&gt; App_delete:
&lt;-- App_delete:
&lt;-- Main_main:
&lt;-- main:
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The similar procedure can be used for DSP2/IPU1/IPU2 also to update
the soft link of the firmware, reload the firmware at run-time, and
run the host binary from A15.</p>
</div>
<div class="section" id="understanding-the-memory-map">
<h4>10.2.5.1.3. Understanding the Memory Map<a class="headerlink" href="#understanding-the-memory-map" title="Permalink to this headline">¶</a></h4>
<p class="rubric" id="overall-linux-memory-map">Overall Linux Memory Map</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# cat /proc/iomem
[snip...]
58060000-58078fff : core
58820000-5882ffff : l2ram
58882000-588820ff : /ocp/mmu@58882000
80000000-9fffffff : System RAM
80008000-808d204b : Kernel code
80926000-809c96bf : Kernel data
a0000000-abffffff : CMEM
ac000000-ffcfffff : System RAM
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="cma-carveouts">CMA Carveouts</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# dmesg | grep -i cma
[    0.000000] Reserved memory: created CMA memory pool at 0x0000000095800000, size 56 MiB
[    0.000000] Reserved memory: initialized node ipu2_cma@95800000, compatible id shared-dma-pool
[    0.000000] Reserved memory: created CMA memory pool at 0x0000000099000000, size 64 MiB
[    0.000000] Reserved memory: initialized node dsp1_cma@99000000, compatible id shared-dma-pool
[    0.000000] Reserved memory: created CMA memory pool at 0x000000009d000000, size 32 MiB
[    0.000000] Reserved memory: initialized node ipu1_cma@9d000000, compatible id shared-dma-pool
[    0.000000] Reserved memory: created CMA memory pool at 0x000000009f000000, size 8 MiB
[    0.000000] Reserved memory: initialized node dsp2_cma@9f000000, compatible id shared-dma-pool
[    0.000000] cma: Reserved 24 MiB at 0x00000000fe400000
[    0.000000] Memory: 1713468K/1897472K available (6535K kernel code, 358K rwdata, 2464K rodata, 332K init, 289K bss, 28356K reserved, 155648K  cma-reserved, 1283072K highmem)
[    5.492945] omap-rproc 58820000.ipu: assigned reserved memory node ipu1_cma@9d000000
[    5.603289] omap-rproc 55020000.ipu: assigned reserved memory node ipu2_cma@95800000
[    5.713411] omap-rproc 40800000.dsp: assigned reserved memory node dsp1_cma@9b000000
[    5.771990] omap-rproc 41000000.dsp: assigned reserved memory node dsp2_cma@9f000000
</pre></div>
</div>
<p>From the output above, we can derive the location and size of each CMA
carveout:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 44%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Memory Section</p></th>
<th class="head"><p>Physical Address</p></th>
<th class="head"><p>Size</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IPU2 CMA</p></td>
<td><p>0x95800000</p></td>
<td><p>56 MB</p></td>
</tr>
<tr class="row-odd"><td><p>DSP1 CMA</p></td>
<td><p>0x99000000</p></td>
<td><p>64 MB</p></td>
</tr>
<tr class="row-even"><td><p>IPU1 CMA</p></td>
<td><p>0x9d000000</p></td>
<td><p>32 MB</p></td>
</tr>
<tr class="row-odd"><td><p>DSP2 CMA</p></td>
<td><p>0x9f000000</p></td>
<td><p>8 MB</p></td>
</tr>
<tr class="row-even"><td><p>Default CMA</p></td>
<td><p>0xfe400000</p></td>
<td><p>24 MB</p></td>
</tr>
</tbody>
</table>
<p>For details on how to adjust the sizes and locations of the DSP/IPU CMA
carveouts, please see the corresponding section for changing the DSP or
IPU memory map.</p>
<p>To adjust the size of the “Default CMA” section, this is done as part of
the Linux config:</p>
<p>linux/arch/arm/configs/tisdk_am57xx-evm_defconfig</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#</span>
<span class="cp"># Default contiguous memory area size:</span>
<span class="cp">#</span>
<span class="n">CONFIG_CMA_SIZE_MBYTES</span><span class="o">=</span><span class="mi">24</span>
<span class="n">CONFIG_CMA_SIZE_SEL_MBYTES</span><span class="o">=</span><span class="n">y</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="cmem">CMEM</p>
<p>To view the allocation at run-time:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# cat /proc/cmem

Block 0: Pool 0: 1 bufs size 0xc000000 (0xc000000 requested)

Pool 0 busy bufs:

Pool 0 free bufs:
id 0: phys addr 0xa0000000
</pre></div>
</div>
<p>This shows that we have defined a CMEM block at physical base address of
0xA0000000 with total size 0xc000000 (192 MB). This block contains a
buffer pool consisting of 1 buffer. Each buffer in the pool (only one in
this case) is defined to have a size of 0xc000000 (192 MB).</p>
<p>Here is where those sizes/addresses were defined for the AM57xx EVM:</p>
<p>linux/arch/arm/boot/dts/am57xx-evm-cmem.dtsi</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>{
       reserved-memory {
               #address-cells = &lt;2&gt;;
               #size-cells = &lt;2&gt;;
               ranges;

               cmem_block_mem_0: cmem_block_mem@a0000000 {
                       reg = &lt;0x0 0xa0000000 0x0 0x0c000000&gt;;
                       no-map;
                       status = &quot;okay&quot;;
               };

               cmem_block_mem_1_ocmc3: cmem_block_mem@40500000 {
                       reg = &lt;0x0 0x40500000 0x0 0x100000&gt;;
                       no-map;
                       status = &quot;okay&quot;;
               };
       };

       cmem {
               compatible = &quot;ti,cmem&quot;;
               #address-cells = &lt;1&gt;;
               #size-cells = &lt;0&gt;;

               #pool-size-cells = &lt;2&gt;;

               status = &quot;okay&quot;;

               cmem_block_0: cmem_block@0 {
                       reg = &lt;0&gt;;
                       memory-region = &lt;&amp;cmem_block_mem_0&gt;;
                       cmem-buf-pools = &lt;1 0x0 0x0c000000&gt;;
               };

               cmem_block_1: cmem_block@1 {
                       reg = &lt;1&gt;;
                       memory-region = &lt;&amp;cmem_block_mem_1_ocmc3&gt;;
               };
       };
};
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="changing-the-dsp-memory-map">Changing the DSP Memory Map</p>
<p>First, it is important to understand that there are a pair of Memory
Management Units (MMUs) that sit between the DSP subsystems and the L3
interconnect. One of these MMUs is for the DSP core and the other is for
its local EDMA. They both serve the same purpose of translating virtual
addresses (i.e. the addresses as viewed by the DSP subsystem) into
physical addresses (i.e. addresses as viewed from the L3 interconnect).</p>
<img alt="../_images/LinuxIpcDspMmu.png" src="../_images/LinuxIpcDspMmu.png" />
<p class="rubric" id="dsp-physical-addresses">DSP Physical Addresses</p>
<p>The physical location where the DSP code/data will actually reside is
defined by the CMA carveout. To change this location, you must change
the definition of the carveout. <strong>The DSP carveouts are defined in the
Linux dts file.</strong> For example for the AM57xx EVM:</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>linux/arch/arm/boot/dts/am57xx-beagle-x15-common.dtsi</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>{
        dsp1_cma_pool: dsp1_cma@99000000 {
                compatible = &quot;shared-dma-pool&quot;;
                reg = &lt;0x0 0x99000000 0x0 0x4000000&gt;;
                reusable;
                status = &quot;okay&quot;;
        };

        dsp2_cma_pool: dsp2_cma@9f000000 {
                compatible = &quot;shared-dma-pool&quot;;
                reg = &lt;0x0 0x9f000000 0x0 0x800000&gt;;
                reusable;
                status = &quot;okay&quot;;
        };
};
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>You are able to change both the size and location. <strong>Be careful not to
overlap any other carveouts!</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>two</strong> location entries for a given DSP must be
identical!</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Additionally, when you change the carveout location, there is a
corresponding change that must be made to the resource table. For
starters, if you’re making a memory change you will need a <strong>custom</strong>
resource table. The resource table is a large structure that is the
“bridge” between physical memory and virtual memory. This structure is
utilized for configuring the MMUs that sit in front of the DSP
subsystem. There is detailed information available in the article <a class="reference external" href="index_Foundational_Components.html#resource-custom-table">IPC
Resource customTable</a>.</p>
<p>Once you’ve created your custom resource table, you must update the
address of PHYS_MEM_IPC_VRING to be the same base address as your
corresponding CMA.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined (VAYU_DSP_1)</span>
<span class="cp">#define PHYS_MEM_IPC_VRING      0x99000000</span>
<span class="cp">#elif defined (VAYU_DSP_2)</span>
<span class="cp">#define PHYS_MEM_IPC_VRING      0x9F000000</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The PHYS_MEM_IPC_VRING definition from the resource
table must match the address of the associated CMA carveout!</p>
</div>
<p class="rubric" id="dsp-virtual-addresses">DSP Virtual Addresses</p>
<p>These addresses are the ones seen by the DSP subsystem, i.e. these will
be the addresses in your linker command files, etc.</p>
<p>You must ensure that the sizes of your sections are consistent with the
corresponding definitions in the resource table. You should create your
own resource table in order to modify the memory map. This is describe
in the wiki page <a class="reference external" href="index_Foundational_Components.html#resource-custom-table">IPC Resource
customTable</a>. You can look at an
existing resource table inside IPC:</p>
<p>ipc/packages/ti/ipc/remoteproc/rsc_table_vayu_dsp.h</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">DSP_MEM_TEXT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">DSP_MEM_TEXT_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_MEM_TEXT&quot;</span><span class="p">,</span>
<span class="p">},</span>

<span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">DSP_MEM_DATA</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">DSP_MEM_DATA_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_MEM_DATA&quot;</span><span class="p">,</span>
<span class="p">},</span>

<span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">DSP_MEM_HEAP</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">DSP_MEM_HEAP_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_MEM_HEAP&quot;</span><span class="p">,</span>
<span class="p">},</span>

<span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">DSP_MEM_IPC_DATA</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">DSP_MEM_IPC_DATA_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_MEM_IPC_DATA&quot;</span><span class="p">,</span>
<span class="p">},</span>

<span class="p">{</span>
    <span class="n">TYPE_TRACE</span><span class="p">,</span> <span class="n">TRACEBUFADDR</span><span class="p">,</span> <span class="mh">0x8000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;trace:dsp&quot;</span><span class="p">,</span>
<span class="p">},</span>


<span class="p">{</span>
    <span class="n">TYPE_DEVMEM</span><span class="p">,</span>
    <span class="n">DSP_MEM_IPC_VRING</span><span class="p">,</span> <span class="n">PHYS_MEM_IPC_VRING</span><span class="p">,</span>
    <span class="n">DSP_MEM_IPC_VRING_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_MEM_IPC_VRING&quot;</span><span class="p">,</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Let’s have a look at some of these to understand them better. For
example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">DSP_MEM_TEXT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">DSP_MEM_TEXT_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_MEM_TEXT&quot;</span><span class="p">,</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Key points to note are:</p>
<ol class="arabic simple">
<li><p>The “TYPE_CARVEOUT” indicates that the physical memory backing this
entry will come from the associated CMA pool.</p></li>
<li><p>DSP_MEM_TEXT is a #define earlier in the code providing the address
for the code section. It is 0x95000000 by default. <strong>This must
correspond to a section from your DSP linker command file, i.e.
EXT_CODE (or whatever name you choose to give it) must be linked to
the same address.</strong></p></li>
<li><p>DSP_MEM_TEXT_SIZE is the size of the MMU pagetable entry being
created (1MB in this particular instance). <strong>The actual amount of
linked code in the corresponding section of your executable must be
less than or equal to this size.</strong></p></li>
</ol>
<p>Let’s take another:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">TYPE_TRACE</span><span class="p">,</span> <span class="n">TRACEBUFADDR</span><span class="p">,</span> <span class="mh">0x8000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;trace:dsp&quot;</span><span class="p">,</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Key points are:</p>
<ol class="arabic simple">
<li><p>The “TYPE_TRACE” indicates this is for trace info.</p></li>
<li><p>The TRACEBUFADDR is defined earlier in the file as
&amp;ti_trace_SysMin_Module_State_0_outbuf__A. That corresponds to the
symbol used in TI-RTOS for the trace buffer.</p></li>
<li><p>The “0x8000” is the size of the MMU mapping. The corresponding size
in the cfg file should be the same (or less). It looks like this:
<code class="docutils literal notranslate"><span class="pre">SysMin.bufSize</span>&#160; <span class="pre">=</span> <span class="pre">0x8000;</span></code></p></li>
</ol>
<p>Finally, let’s look at a TYPE_DEVMEM example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">TYPE_DEVMEM</span><span class="p">,</span>
    <span class="n">DSP_PERIPHERAL_L4CFG</span><span class="p">,</span> <span class="n">L4_PERIPHERAL_L4CFG</span><span class="p">,</span>
    <span class="n">SZ_16M</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DSP_PERIPHERAL_L4CFG&quot;</span><span class="p">,</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Key points:</p>
<ol class="arabic simple">
<li><p>The “TYPE_DEVMEM” indicates that we are making an MMU mapping, but
this <em>does not come from the CMA pool</em>. This is intended for mapping
peripherals, etc. that already exist in the device memory map.</p></li>
<li><p>DSP_PERIPHERAL_L4CFG (0x4A000000) is the virtual address while
L4_PERIPHERAL_L4CFG (0x4A000000) is the physical address. <strong>This is
an identity mapping, meaning that peripherals can be referenced by
the DSP using their physical address.</strong></p></li>
</ol>
<p class="rubric" id="dsp-access-to-peripherals">DSP Access to Peripherals</p>
<p>The default resource table creates the following mappings:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 30%" />
<col style="width: 11%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Virtual Address</p></th>
<th class="head"><p>Physical Address</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x4A000000</p></td>
<td><p>0x4A000000</p></td>
<td><p>16 MB</p></td>
<td><p>L4CFG + L4WKUP</p></td>
</tr>
<tr class="row-odd"><td><p>0x48000000</p></td>
<td><p>0x48000000</p></td>
<td><p>2 MB</p></td>
<td><p>L4PER1</p></td>
</tr>
<tr class="row-even"><td><p>0x48400000</p></td>
<td><p>0x48400000</p></td>
<td><p>4 MB</p></td>
<td><p>L4PER2</p></td>
</tr>
<tr class="row-odd"><td><p>0x48800000</p></td>
<td><p>0x48800000</p></td>
<td><p>8 MB</p></td>
<td><p>L4PER3</p></td>
</tr>
<tr class="row-even"><td><p>0x54000000</p></td>
<td><p>0x54000000</p></td>
<td><p>16 MB</p></td>
<td><p>L3_INSTR + CT_TBR</p></td>
</tr>
<tr class="row-odd"><td><p>0x4E000000</p></td>
<td><p>0x4E000000</p></td>
<td><p>1 MB</p></td>
<td><p>DMM config</p></td>
</tr>
</tbody>
</table>
<p>In other words, the peripherals can be accessed at their physical
addresses since we use an identity mapping.</p>
<p class="rubric" id="inspecting-the-dsp-iommu-page-tables-at-run-time">Inspecting the DSP IOMMU Page Tables at Run-Time</p>
<p>You can dump the DSP IOMMU page tables with the following commands:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DSP</p></th>
<th class="head"><p>MMU</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DSP1</p></td>
<td><p>MMU0</p></td>
<td><p>cat /sys/kernel/debug/omap_iommu/40d01000.mmu/pagetable</p></td>
</tr>
<tr class="row-odd"><td><p>DSP1</p></td>
<td><p>MMU1</p></td>
<td><p>cat /sys/kernel/debug/omap_iommu/40d02000.mmu/pagetable</p></td>
</tr>
<tr class="row-even"><td><p>DSP2</p></td>
<td><p>MMU0</p></td>
<td><p>cat /sys/kernel/debug/omap_iommu/41501000.mmu/pagetable</p></td>
</tr>
<tr class="row-odd"><td><p>DSP2</p></td>
<td><p>MMU1</p></td>
<td><p>cat /sys/kernel/debug/omap_iommu/41502000.mmu/pagetable</p></td>
</tr>
</tbody>
</table>
<p>In general, MMU0 and MMU1 are being programmed identically so you really
only need to take a look at one or the other to understand the mapping
for a given DSP.</p>
<p>For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# cat /sys/kernel/debug/omap_iommu/40d01000.mmu/pagetable
L:      da:     pte:
--------------------------
1: 0x48000000 0x48000002
1: 0x48100000 0x48100002
1: 0x48400000 0x48400002
1: 0x48500000 0x48500002
1: 0x48600000 0x48600002
1: 0x48700000 0x48700002
1: 0x48800000 0x48800002
1: 0x48900000 0x48900002
1: 0x48a00000 0x48a00002
1: 0x48b00000 0x48b00002
1: 0x48c00000 0x48c00002
1: 0x48d00000 0x48d00002
1: 0x48e00000 0x48e00002
1: 0x48f00000 0x48f00002
1: 0x4a000000 0x4a040002
1: 0x4a100000 0x4a040002
1: 0x4a200000 0x4a040002
1: 0x4a300000 0x4a040002
1: 0x4a400000 0x4a040002
1: 0x4a500000 0x4a040002
1: 0x4a600000 0x4a040002
1: 0x4a700000 0x4a040002
1: 0x4a800000 0x4a040002
1: 0x4a900000 0x4a040002
1: 0x4aa00000 0x4a040002
1: 0x4ab00000 0x4a040002
1: 0x4ac00000 0x4a040002
1: 0x4ad00000 0x4a040002
1: 0x4ae00000 0x4a040002
1: 0x4af00000 0x4a040002
</pre></div>
</div>
<p>The first column tells us whether the mapping is a Level 1 or Level 2
descriptor. All the lines above are a first level descriptor, so we look
at the associated format from the TRM:</p>
<img alt="../_images/LinuxIpcPageTableDescriptor1.png" src="../_images/LinuxIpcPageTableDescriptor1.png" />
<p>The “da” (“device address”) column reflects the virtual address. It is
<em>derived</em> from the index into the table, i.e. there does not exist a
“da” register or field in the page table. Each MB of the address space
maps to an entry in the table. The “da” column is displayed to make it
easy to find the virtual address of interest.</p>
<p>The “pte” (“page table entry”) column can be decoded according to Table
20-4 shown above. For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">:</span> <span class="mh">0x4a000000</span> <span class="mh">0x4a040002</span>
</pre></div>
</div>
<p>The 0x4a040002 shows us that it is a Supersection with base address
0x4A000000. This gives us a 16 MB memory page. Note the repeated entries
afterward. That’s a requirement of the MMU. Here’s an excerpt from the
TRM:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Supersection descriptors must be repeated 16 times,
because each descriptor in the first level translation table describes 1
MiB of memory. If an access points to a descriptor that is not
initialized, the MMU will behave in an unpredictable way.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="changing-cortex-m4-ipu-memory-map">Changing Cortex M4 IPU Memory Map</p>
<p>In order to fully understand the memory mapping of the Cortex M4 IPU
Subsystems, it’s helpful to recognize that there are two
distinct/independent levels of memory translation. Here’s a snippet from
the TRM to illustrate:</p>
<img alt="../_images/LinuxIpcIpuMmu.png" src="../_images/LinuxIpcIpuMmu.png" />
<p class="rubric" id="cortex-m4-ipu-physical-addresses">Cortex M4 IPU Physical Addresses</p>
<p>The physical location where the M4 code/data will actually reside is
defined by the CMA carveout. To change this location, you must change
the definition of the carveout. <strong>The M4 carveouts are defined in the
Linux dts file.</strong> For example for the AM57xx EVM:</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p>linux/arch/arm/boot/dts/am57xx-beagle-x15-common.dtsi</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>{
        ipu2_cma_pool: ipu2_cma@95800000 {
                compatible = &quot;shared-dma-pool&quot;;
                reg = &lt;0x0 95800000 0x0 0x3800000&gt;;
                reusable;
                status = &quot;okay&quot;;
        };

        ipu1_cma_pool: ipu1_cma@9d000000 {
                compatible = &quot;shared-dma-pool&quot;;
                reg = &lt;0x0 9d000000 0x0 0x2000000&gt;;
                reusable;
                status = &quot;okay&quot;;
        };
};
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>You are able to change both the size and location. <strong>Be careful not to
overlap any other carveouts!</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>two</strong> location entries for a given carveout
must be identical!</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Additionally, when you change the carveout location, there is a
corresponding change that must be made to the resource table. For
starters, if you’re making a memory change you will need a <strong>custom</strong>
resource table. The resource table is a large structure that is the
“bridge” between physical memory and virtual memory. This structure is
utilized for configuring the IPUx_MMU (not the Unicache MMU). There is
detailed information available in the article <a class="reference external" href="index_Foundational_Components.html#resource-custom-table">IPC Resource
customTable</a>.</p>
<p>Once you’ve created your custom resource table, you must update the
address of PHYS_MEM_IPC_VRING to be the same base address as your
corresponding CMA.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined(VAYU_IPU_1)</span>
<span class="cp">#define PHYS_MEM_IPC_VRING      0x9D000000</span>
<span class="cp">#elif defined (VAYU_IPU_2)</span>
<span class="cp">#define PHYS_MEM_IPC_VRING      0x95800000</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The PHYS_MEM_IPC_VRING definition from the resource
table must match the address of the associated CMA carveout!</p>
</div>
<p class="rubric" id="cortex-m4-ipu-virtual-addresses">Cortex M4 IPU Virtual Addresses</p>
<p class="rubric" id="unicache-mmu">Unicache MMU</p>
<p>The Unicache MMU sits closest to the Cortex M4. It provides the first
level of address translation. The Unicache MMU is actually “self
programmed” by the Cortex M4. The Unicache MMU is also referred to as
the Attribute MMU (AMMU). There are a fixed number of small, medium and
large pages. Here’s a snippet showing some of the key mappings:</p>
<p>ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/ipu1/IpuAmmu.cfg</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/*********************** Large Pages *************************/</span>
<span class="cm">/* Instruction Code: Large page  (512M); cacheable */</span>
<span class="cm">/* config large page[0] to map 512MB VA 0x0 to L3 0x0 */</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">pageEnabled</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Enable_YES</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">logicalAddress</span> <span class="o">=</span> <span class="mh">0x0</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">translationEnabled</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Enable_NO</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Large_512M</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">L1_cacheable</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">CachePolicy_CACHEABLE</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">L1_posted</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">PostedPolicy_POSTED</span><span class="p">;</span>

<span class="cm">/* Peripheral regions: Large Page (512M); non-cacheable */</span>
<span class="cm">/* config large page[1] to map 512MB VA 0x60000000 to L3 0x60000000 */</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">pageEnabled</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Enable_YES</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">logicalAddress</span> <span class="o">=</span> <span class="mh">0x60000000</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">translationEnabled</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Enable_NO</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">size</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Large_512M</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">L1_cacheable</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">CachePolicy_NON_CACHEABLE</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">L1_posted</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">PostedPolicy_POSTED</span><span class="p">;</span>

<span class="cm">/* Private, Shared and IPC Data regions: Large page (512M); cacheable */</span>
<span class="cm">/* config large page[2] to map 512MB VA 0x80000000 to L3 0x80000000 */</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">pageEnabled</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Enable_YES</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">logicalAddress</span> <span class="o">=</span> <span class="mh">0x80000000</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">translationEnabled</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Enable_NO</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">size</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">Large_512M</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">L1_cacheable</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">CachePolicy_CACHEABLE</span><span class="p">;</span>
<span class="n">AMMU</span><span class="p">.</span><span class="n">largePages</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">L1_posted</span> <span class="o">=</span> <span class="n">AMMU</span><span class="p">.</span><span class="n">PostedPolicy_POSTED</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Page</p></th>
<th class="head"><p>Cortex M4 Address</p></th>
<th class="head"><p>Intermediate Address</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Large Page 0</p></td>
<td><p>0x00000000-0x1fffffff</p></td>
<td><p>0x00000000-0x1fffffff</p></td>
<td><p>512 MB</p></td>
<td><p>Code</p></td>
</tr>
<tr class="row-odd"><td><p>Large Page 1</p></td>
<td><p>0x60000000-0x7fffffff</p></td>
<td><p>0x60000000-0x7fffffff</p></td>
<td><p>512 MB</p></td>
<td><p>Peripherals</p></td>
</tr>
<tr class="row-even"><td><p>Large Page 2</p></td>
<td><p>0x80000000-0x9fffffff</p></td>
<td><p>0x80000000-0x9fffffff</p></td>
<td><p>512 MB</p></td>
<td><p>Data</p></td>
</tr>
</tbody>
</table>
<p>These 3 pages are “identity” mappings, performing a passthrough of
requests to the associated address ranges. These intermediate addresses
get mapped to their physical addresses in the next level of translation
(IOMMU).</p>
<p>The AMMU ranges for code and data <em>need</em> to be identity mappings because
otherwise the remoteproc loader wouldn’t be able to match up the
sections from the ELF file with the associated IOMMU mapping. These
mappings should suffice for any application, i.e. no need to adjust
these. The more likely area for modification is the resource table in
the next section. The AMMU mappings are needed mainly to understand the
full picture with respect to the Cortex M4 memory map.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="iommu">IOMMU</p>
<p>The IOMMU sits closest to the L3 interconnect. It takes the intermediate
address output from the AMMU and translates it to the physical address
used by the L3 interconnect. The IOMMU is programmed by the ARM based on
the associated resource table. If you’re planning any memory changes
then you’ll want to make a custom resource table as described in the
wiki page <a class="reference external" href="index_Foundational_Components.html#resource-custom-table">IPC Resource
customTable</a>.</p>
<p>The default resource table (which can be adapted to make a custom table)
can be found at this location:</p>
<p>ipc/packages/ti/ipc/remoteproc/rsc_table_vayu_ipu.h</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define IPU_MEM_TEXT            0x0</span>
<span class="cp">#define IPU_MEM_DATA            0x80000000</span>

<span class="cp">#define IPU_MEM_IOBUFS          0x90000000</span>

<span class="cp">#define IPU_MEM_IPC_DATA        0x9F000000</span>
<span class="cp">#define IPU_MEM_IPC_VRING       0x60000000</span>
<span class="cp">#define IPU_MEM_RPMSG_VRING0    0x60000000</span>
<span class="cp">#define IPU_MEM_RPMSG_VRING1    0x60004000</span>
<span class="cp">#define IPU_MEM_VRING_BUFS0     0x60040000</span>
<span class="cp">#define IPU_MEM_VRING_BUFS1     0x60080000</span>

<span class="cp">#define IPU_MEM_IPC_VRING_SIZE  SZ_1M</span>
<span class="cp">#define IPU_MEM_IPC_DATA_SIZE   SZ_1M</span>

<span class="cp">#if defined(VAYU_IPU_1)</span>
<span class="cp">#define IPU_MEM_TEXT_SIZE       (SZ_1M)</span>
<span class="cp">#elif defined(VAYU_IPU_2)</span>
<span class="cp">#define IPU_MEM_TEXT_SIZE       (SZ_1M * 6)</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(VAYU_IPU_1)</span>
<span class="cp">#define IPU_MEM_DATA_SIZE       (SZ_1M * 5)</span>
<span class="cp">#elif defined(VAYU_IPU_2)</span>
<span class="cp">#define IPU_MEM_DATA_SIZE       (SZ_1M * 48)</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>&lt;snip…&gt;</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">IPU_MEM_TEXT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">IPU_MEM_TEXT_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;IPU_MEM_TEXT&quot;</span><span class="p">,</span>
<span class="p">},</span>

<span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">IPU_MEM_DATA</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">IPU_MEM_DATA_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;IPU_MEM_DATA&quot;</span><span class="p">,</span>
<span class="p">},</span>

<span class="p">{</span>
    <span class="n">TYPE_CARVEOUT</span><span class="p">,</span>
    <span class="n">IPU_MEM_IPC_DATA</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">IPU_MEM_IPC_DATA_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;IPU_MEM_IPC_DATA&quot;</span><span class="p">,</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The 3 entries above from the resource table all come from the associated
IPU CMA pool (i.e. as dictated by the TYPE_CARVEOUT). The second
parameter represents the virtual address (i.e. input address to the
IOMMU). <strong>These addresses must be consistent with both the AMMU mapping
as well as the linker command file.</strong> The ex02_messageq example from ipc
defines these memory sections in the file
examples/DRA7XX_linux_elf/ex02_messageq/shared/config.bld.</p>
<p>You can dump the IPU IOMMU page tables with the following commands:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>IPU</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IPU1</p></td>
<td><p>cat /sys/kernel/debug/omap_iommu/58882000.mmu/pagetable</p></td>
</tr>
<tr class="row-odd"><td><p>IPU2</p></td>
<td><p>cat /sys/kernel/debug/omap_iommu/55082000.mmu/pagetable</p></td>
</tr>
</tbody>
</table>
<p>Please see the <a class="reference external" href="/index.php/Linux_IPC_on_AM57xx#Inspecting_the_DSP_IOMMU_Page_Tables_at_Run-Time">corresponding DSP
documentation</a>
for more details on interpreting the output.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="cortex-m4-ipu-access-to-peripherals">Cortex M4 IPU Access to Peripherals</p>
<p>The default resource table creates the following mappings:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Virtual
Address
used by
Cortex M4</p></th>
<th class="head"><p>Address at
output of
Unicache
MMU</p></th>
<th class="head"><p>Address at
output of
IOMMU</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x6A000000</p></td>
<td><p>0x6A000000</p></td>
<td><p>0x4A000000</p></td>
<td><p>16 MB</p></td>
<td><p>L4CFG +
L4WKUP</p></td>
</tr>
<tr class="row-odd"><td><p>0x68000000</p></td>
<td><p>0x68000000</p></td>
<td><p>0x48000000</p></td>
<td><p>2 MB</p></td>
<td><p>L4PER1</p></td>
</tr>
<tr class="row-even"><td><p>0x68400000</p></td>
<td><p>0x68400000</p></td>
<td><p>0x48400000</p></td>
<td><p>4 MB</p></td>
<td><p>L4PER2</p></td>
</tr>
<tr class="row-odd"><td><p>0x68800000</p></td>
<td><p>0x68800000</p></td>
<td><p>0x48800000</p></td>
<td><p>8 MB</p></td>
<td><p>L4PER3</p></td>
</tr>
<tr class="row-even"><td><p>0x74000000</p></td>
<td><p>0x74000000</p></td>
<td><p>0x54000000</p></td>
<td><p>16 MB</p></td>
<td><p>L3_INSTR +
CT_TBR</p></td>
</tr>
</tbody>
</table>
<p>Example: Accessing UART5 from IPU</p>
<ol class="arabic simple">
<li><p>For this example, it’s assumed the pin-muxing was already setup in
the bootloader. If that’s not the case, you would need to do that
here.</p></li>
<li><p>The UART5 module needs to be enabled via the CM_L4PER_UART5_CLKCTRL
register. This is located at physical address 0x4A009870. So from the
M4 we would program this register at virtual address 0x6A009870.
Writing a value of 2 to this register will enable the peripheral.</p></li>
<li><p>After completing the previous step, the UART5 registers will become
accessible. Normally UART5 is accessible at physical base address
0x48066000. This would correspondingly be accessed from the IPU at
0x68066000.</p></li>
</ol>
</div>
<div class="section" id="power-management">
<h4>10.2.5.1.4. Power Management<a class="headerlink" href="#power-management" title="Permalink to this headline">¶</a></h4>
<p>The IPUs and DSPs auto-idle by default. This can prevent you from being
able to connect to the device using JTAG or from accessing local memory
via devmem2. There are some options sprinkled throughout sysfs that are
needed in order to force these subsystems on, as is sometimes needed for
development and debug purposes.</p>
<p>There are some hard-coded device names that originate in the device tree
(dra7.dtsi) that are needed for these operations:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 46%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Remote Core</p></th>
<th class="head"><p>Definition in dra7.dtsi</p></th>
<th class="head"><p>System FS Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IPU1</p></td>
<td><p><a class="reference external" href="mailto:ipu&#37;&#52;&#48;58820000">ipu<span>&#64;</span>58820000</a></p></td>
<td><p>58820000.ipu</p></td>
</tr>
<tr class="row-odd"><td><p>IPU2</p></td>
<td><p><a class="reference external" href="mailto:ipu&#37;&#52;&#48;55020000">ipu<span>&#64;</span>55020000</a></p></td>
<td><p>55020000.ipu</p></td>
</tr>
<tr class="row-even"><td><p>DSP1</p></td>
<td><p><a class="reference external" href="mailto:dsp&#37;&#52;&#48;40800000">dsp<span>&#64;</span>40800000</a></p></td>
<td><p>40800000.dsp</p></td>
</tr>
<tr class="row-odd"><td><p>DSP2</p></td>
<td><p><a class="reference external" href="mailto:dsp&#37;&#52;&#48;41000000">dsp<span>&#64;</span>41000000</a></p></td>
<td><p>41000000.dsp</p></td>
</tr>
<tr class="row-even"><td><p>ICSS1-PRU0</p></td>
<td><p><a class="reference external" href="mailto:pru&#37;&#52;&#48;4b234000">pru<span>&#64;</span>4b234000</a></p></td>
<td><p>4b234000.pru0</p></td>
</tr>
<tr class="row-odd"><td><p>ICSS1-PRU1</p></td>
<td><p><a class="reference external" href="mailto:pru&#37;&#52;&#48;4b238000">pru<span>&#64;</span>4b238000</a></p></td>
<td><p>4b238000.pru1</p></td>
</tr>
<tr class="row-even"><td><p>ICSS2-PRU0</p></td>
<td><p><a class="reference external" href="mailto:pru&#37;&#52;&#48;4b2b4000">pru<span>&#64;</span>4b2b4000</a></p></td>
<td><p>4b2b4000.pru0</p></td>
</tr>
<tr class="row-odd"><td><p>ICSS2-PRU1</p></td>
<td><p><a class="reference external" href="mailto:pru&#37;&#52;&#48;4b2b8000">pru<span>&#64;</span>4b2b8000</a></p></td>
<td><p>4b2b8000.pru1</p></td>
</tr>
</tbody>
</table>
<p>To map these System FS names to the associated remoteproc entry, you can
run the following commands:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# ls -l /sys/kernel/debug/remoteproc/
root@am57xx-evm:~# cat /sys/kernel/debug/remoteproc/remoteproc*/name
</pre></div>
</div>
<p>The results of the commands will be a one-to-one mapping. For example,
58820000.ipu corresponds with remoteproc0.</p>
<p>Similarly, to see the power state of each of the cores:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# cat /sys/class/remoteproc/remoteproc*/state
</pre></div>
</div>
<p>The state can be suspended, running, offline, etc. You can only attach
JTAG if the state is “running”. If it shows as “suspended” then you must
force it to run. For example, let’s say DSP0 is “suspended”. You can run
the following command to force it on:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>root@am57xx-evm:~# echo on &gt; /sys/bus/platform/devices/40800000.dsp/power/control
</pre></div>
</div>
<p>The same is true for any of the cores, but replace 40800000.dsp with the
associated System FS name from the chart above.</p>
</div>
<div class="section" id="adding-ipc-to-an-existing-ti-rtos-application-on-slave-cores">
<h4>10.2.5.1.5. Adding IPC to an Existing TI-RTOS Application on slave cores<a class="headerlink" href="#adding-ipc-to-an-existing-ti-rtos-application-on-slave-cores" title="Permalink to this headline">¶</a></h4>
<p class="rubric" id="adding-ipc-to-an-existing-ti-rtos-application-on-the-dsp">Adding IPC to an existing TI RTOS application on the DSP</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A common thing people want to do is take an existing DSP application
and add IPC to it. This is common when migrating from a DSP only
solution to a heterogeneous SoC with an Arm plus a DSP. This is the
focus of this section.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In order to describe this process, we need an example test case to
work with. For this purpose, we’ll be using the
GPIO_LedBlink_evmAM572x_c66xExampleProject example that’s part of the
PDK (installed as part of the Processor SDK RTOS). You can find it at
c:/ti/pdk_am57xx_1_0_4/packages/MyExampleProjects/GPIO_LedBlink_evmAM572x_c66xExampleProject.
This example uses SYS/BIOS and blinks the USER0 LED on the AM572x GP
EVM, it’s labeled D4 on the EVM silkscreen just to the right of the
blue reset button.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>There were several steps taken to make this whole process work, each of
which will be described in following sections</p>
<ol class="arabic simple">
<li><p>Build and run the out-of-box LED blink example on the EVM using Code
Composer Studio (CCS)</p></li>
<li><p>Take the ex02_message example from the IPC software bundle and turn
it into a CCS project. Build it and modify the Linux startup code to
use this new image. This is just a sanity check step to make sure we
can build the IPC examples in CCS and have them run at boot up on the
EVM.</p></li>
<li><p>In CCS, make a clone of the out-of-box LED example and rename it to
denote it’s the IPC version of the example. Then using the
ex02_messageq example as a reference, add in the IPC pieces to the
LED example. Build from CCS then add it to the Linux firmware folder.</p></li>
</ol>
<p class="rubric" id="running-led-blink-pdk-example-from-ccs">Running LED Blink PDK Example from CCS</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>TODO - Fill this section in with instructions on how to run the LED
blink example using JTAG and CCS after the board has booted Linux.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some edits were made to the LED blink example to allow it to run</p>
</div>
<p>in a Linux environment, specifically, removed the GPIO interrupts and
then added a Clock object to call the LED GPIO toggle function on a
periodic bases.</p>
<p class="rubric" id="make-ccs-project-out-of-ex02-messageq-ipc-example">Make CCS project out of ex02_messageq IPC example</p>
<p>TODO - fill this section in with instructions on how to make a CCS
project out of the IPC example source files.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="add-ipc-to-the-led-blink-example">Add IPC to the LED Blink Example</p>
<p>The first step is to clone our out-of-box LED blink CCS project and
rename it to denote it’s using IPC. The easiest way to do this is using
CCS. Here are the steps…</p>
<ul class="simple">
<li><p>In the <em>Edit</em> perspective, go into your <em>Project Explorer</em> window and
right click on your GPIO_LedBlink_evmAM572x+c66xExampleProject
project and select <em>copy</em> from the pop-up menu. Maske sure the
project is not is a closed state.</p></li>
<li><p>Rick click in and empty area of the project explorer window and
select past.</p></li>
<li><p>A dialog box pops up, modify the name to denote it’s using IPC. A
good name is GPIO_LedBlink_evmAM572x+c66xExampleProjec_with_ipc.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This is the project we’ll be working with from here on. The next thing
we want to do is select the proper RTSC platform and other components.
To do this, follow these steps.</p>
<ul class="simple">
<li><p>Right click on the GPIO_LedBlink_evmAM572x+c66xExampleProjec_with_ipc
project and select <em>Properties</em></p></li>
<li><p>In the left hand pane, click on <em>CCS General</em>.</p></li>
<li><p>On the right hand side, click on the <em>RTSC</em> tab</p></li>
<li><p>For <em>XDCtools version:</em> select 3.32.0.06_core</p></li>
<li><p>In the list of <em>Products and Repositories</em>, <em>check</em> the following…</p>
<ul>
<li><p>IPC 3.43.2.04</p></li>
<li><p>SYS/BIOS 6.45.1.29</p></li>
<li><p>am57xx PDK 1.0.4</p></li>
</ul>
</li>
<li><p>For <em>Target</em>, select ti.targets.elf.C66</p></li>
<li><p>For <em>Platform</em>, select ti.platforms.evmDRA7XX</p></li>
<li><p>Once the platform is selected, edit its name buy hand and
append :dsp1 to the end. After this it should be
ti.platforms.evmDRA7XX:dsp1</p></li>
<li><p>Go ahead and leave the <em>Build-profile</em> set to debug.</p></li>
<li><p>Hit the OK button.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Now we want to copy configuration and source files from the
ex02_messageq IPC example into our project. The IPC example is located
at <em>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq</em>. To
copy files into your CCS project, you can simply select the files you
want in Windows explorer then drag and drop them into your project in
CCS.</p>
<p>Copy these files into your CCS project…</p>
<ul class="simple">
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/shared/AppCommon.h</p></li>
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/shared/config.bld</p></li>
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/shared/ipc.cfg.xs</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Now copy these files into your CCS project…</p>
<ul class="simple">
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/dsp1/Dsp1.cfg</p></li>
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/dsp1/MainDsp1.c</p></li>
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/dsp1/Server.c</p></li>
<li><p>C:/ti/ipc_3_43_02_04/examples/DRA7XX_linux_elf/ex02_messageq/dsp1/Server.h</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you copy Dsp1.cfg into your CCS project, it
should show up greyed out. This is because the LED blink example
already has a cfg file (gpio_test_evmAM572x.cfg). The Dsp1.cfg will be
used for copying and pasting. When it’s all done, you can delete it
from your project.</p>
</div>
<p>Finally, you will likely want to use a custom resource table so copy
these files into your CCS project…</p>
<ul class="simple">
<li><p>C:/ti/ipc_3_43_02_04/packages/ti/ipc/remoteproc/rsc_table_vayu_dsp.h</p></li>
<li><p>C:/ti/ipc_3_43_02_04/packages/ti/ipc/remoteproc/rsc_types.h</p></li>
</ul>
<p>The rsc_table_vayu_dsp.h file defines an initialized structure so let’s
make a <em>.c</em> source file.</p>
<ul class="simple">
<li><p>In your CCS project, rename rsc_table_vayu_dsp.h to
rsc_table_vayu_dsp.c</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Now we want to <em>merge</em> the IPC example configuration file with the LED
blink example configuration file. Follow these steps…</div>
</div>
<ul class="simple">
<li><p>Open up <em>Dsp1.cfg</em> using a text editor (don’t open it using the GUI).
Right click on it and select <em>Open With -&gt; XDCscript Editor</em></p></li>
<li><p>We want to copy the entire contents into the clipboard. Select all
and copy.</p></li>
<li><p>Now just like above, open the gpio_test_evmAM572x.cfg config file in
the text editor. Go to the very bottom and <em>paste</em> in the contents
from the Dsp1.cfg file. Basically we’ve appended the contents of
Dsp1.cfg into gpio_test_evmAM572x.cfg.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>We’ve now added in all the necessary configuration and source files
into our project. Don’t expect it to build at this point, we have to
make edits first. These edits are listed below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can download the full CCS project with source files to use as a reference.
See link towards the end of this section.</p>
</div>
<ul class="simple">
<li><p>Edit <strong>gpio_test_evmAM572x.cfg</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Add the following to the beginning of your configuration file</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Program = xdc.useModule(&#39;xdc.cfg.Program&#39;);
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the Memory sections configuration as shown below</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* ================ Memory sections configuration ================ */</span>
<span class="c1">//Program.sectMap[&quot;.text&quot;] = &quot;EXT_RAM&quot;;</span>
<span class="c1">//Program.sectMap[&quot;.const&quot;] = &quot;EXT_RAM&quot;;</span>
<span class="c1">//Program.sectMap[&quot;.plt&quot;] = &quot;EXT_RAM&quot;;</span>
<span class="cm">/* Program.sectMap[&quot;BOARD_IO_DELAY_DATA&quot;] = &quot;OCMC_RAM1&quot;; */</span>
<span class="cm">/* Program.sectMap[&quot;BOARD_IO_DELAY_CODE&quot;] = &quot;OCMC_RAM1&quot;; */</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Since we are no longer using a shared folder, make the following change</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//var ipc_cfg = xdc.loadCapsule(&quot;../shared/ipc.cfg.xs&quot;);</span>
<span class="n">var</span> <span class="n">ipc_cfg</span> <span class="o">=</span> <span class="n">xdc</span><span class="p">.</span><span class="n">loadCapsule</span><span class="p">(</span><span class="s">&quot;../ipc.cfg.xs&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the following. We’ll be calling this function directly from
main.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//BIOS.addUserStartupFunction(&#39;&amp;IpcMgr_ipcStartup&#39;);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Increase the system stack size</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//Program.stack = 0x1000;</span>
<span class="n">Program</span><span class="p">.</span><span class="n">stack</span> <span class="o">=</span> <span class="mh">0x8000</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the entire TICK section</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* --------------------------- TICK --------------------------------------*/</span>
<span class="c1">// var Clock = xdc.useModule(&#39;ti.sysbios.knl.Clock&#39;);</span>
<span class="c1">// Clock.tickSource = Clock.TickSource_NULL;</span>
<span class="c1">// //Clock.tickSource = Clock.TickSource_USER;</span>
<span class="c1">// /* Configure BIOS clock source as GPTimer5 */</span>
<span class="c1">// //Clock.timerId = 0;</span>
<span class="c1">//</span>
<span class="c1">// var Timer = xdc.useModule(&#39;ti.sysbios.timers.dmtimer.Timer&#39;);</span>
<span class="c1">//</span>
<span class="c1">// /* Skip the Timer frequency verification check. Need to remove this later */</span>
<span class="c1">// Timer.checkFrequency = false;</span>
<span class="c1">//</span>
<span class="c1">// /* Match this to the SYS_CLK frequency sourcing the dmTimers.</span>
<span class="c1">//  * Not needed once the SYS/BIOS family settings is updated. */</span>
<span class="c1">// Timer.intFreq.hi = 0;</span>
<span class="c1">// Timer.intFreq.lo = 19200000;</span>
<span class="c1">//</span>
<span class="c1">// //var timerParams = new Timer.Params();</span>
<span class="c1">// //timerParams.period = Clock.tickPeriod;</span>
<span class="c1">// //timerParams.periodType = Timer.PeriodType_MICROSECS;</span>
<span class="c1">// /* Switch off Software Reset to make the below settings effective */</span>
<span class="c1">// //timerParams.tiocpCfg.softreset = 0x0;</span>
<span class="c1">// /* Smart-idle wake-up-capable mode */</span>
<span class="c1">// //timerParams.tiocpCfg.idlemode = 0x3;</span>
<span class="c1">// /* Wake-up generation for Overflow */</span>
<span class="c1">// //timerParams.twer.ovf_wup_ena = 0x1;</span>
<span class="c1">// //Timer.create(Clock.timerId, Clock.doTick, timerParams);</span>
<span class="c1">//</span>
<span class="c1">// var Idle = xdc.useModule(&#39;ti.sysbios.knl.Idle&#39;);</span>
<span class="c1">// var Deh = xdc.useModule(&#39;ti.deh.Deh&#39;);</span>
<span class="c1">//</span>
<span class="c1">// /* Must be placed before pwr mgmt */</span>
<span class="c1">// Idle.addFunc(&#39;&amp;ti_deh_Deh_idleBegin&#39;);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Make configuration change to use custom resource table. Add to the end
of the file.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>/* Override the default resource table with my own */
var Resource = xdc.useModule(&#39;ti.ipc.remoteproc.Resource&#39;);
Resource.customTable = true;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>main_led_blink.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Add the following external declarations</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span> <span class="n">Int</span> <span class="nf">ipc_main</span><span class="p">();</span>
<span class="k">extern</span> <span class="n">Void</span> <span class="nf">IpcMgr_ipcStartup</span><span class="p">(</span><span class="n">Void</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In main(), add a call to ipc_main() and IpcMgr_ipcStartup() just before
BIOS_start()</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ipc_main</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="n">callIpcStartup</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">IpcMgr_ipcStartup</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/* Start BIOS */</span>
<span class="n">BIOS_start</span><span class="p">();</span>
<span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the line that calls Board_init(boardCfg). This call is in
the original example because it assumes TI-RTOS is running on the Arm
but in our case here, we are running Linux and this call is
destructive so we comment it out.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined(EVM_K2E) || defined(EVM_C6678)</span>
    <span class="n">boardCfg</span> <span class="o">=</span> <span class="n">BOARD_INIT_MODULE_CLOCK</span> <span class="o">|</span>
    <span class="n">BOARD_INIT_UART_STDIO</span><span class="p">;</span>
<span class="cp">#else</span>
    <span class="n">boardCfg</span> <span class="o">=</span> <span class="n">BOARD_INIT_PINMUX_CONFIG</span> <span class="o">|</span>
    <span class="n">BOARD_INIT_MODULE_CLOCK</span> <span class="o">|</span>
    <span class="n">BOARD_INIT_UART_STDIO</span><span class="p">;</span>
<span class="cp">#endif</span>
    <span class="c1">//Board_init(boardCfg);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>MainDsp1.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The app now has it’s own main(), so rename this one and get rid of args</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//Int main(Int argc, Char* argv[])</span>
<span class="n">Int</span> <span class="nf">ipc_main</span><span class="p">()</span>
<span class="p">{</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>No longer using args so comment these lines</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//taskParams.arg0 = (UArg)argc;</span>
<span class="c1">//taskParams.arg1 = (UArg)argv;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>BIOS_start() is done in the app main() so comment it out here</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* start scheduler, this never returns */</span>
<span class="c1">//BIOS_start();</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment this out</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//Log_print0(Diags_EXIT, &quot;&lt;-- main:&quot;);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>rsc_table_vayu_dsp.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Set this #define before it’s used to select PHYS_MEM_IPC_VRING value</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define VAYU_DSP_1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Add this extern declaration prior to the symbol being used</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span> <span class="kt">char</span> <span class="n">ti_trace_SysMin_Module_State_0_outbuf__A</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>Server.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>No longer have shared folder so change include path</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* local header files */</span>
<span class="c1">//#include &quot;../shared/AppCommon.h&quot;</span>
<span class="cp">#include</span> <span class="cpf">&quot;../AppCommon.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="download-the-full-ccs-project">Download the Full CCS Project</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><a class="reference external" href="http://processors.wiki.ti.com/images/c/c9/GPIO_LedBlink_evmAM572x_c66xExampleProject_with_ipc.zip">GPIO_LedBlink_evmAM572x_c66xExampleProject_with_ipc.zip</a></p>
<p class="rubric" id="adding-ipc-to-an-existing-ti-rtos-application-on-the-ipu">Adding IPC to an existing TI RTOS application on the IPU</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A common thing people want to do is take an existing IPU application
that may be controlling serial or control interfaces and add IPC to it
so that the firmware can be loaded from the ARM. This is common when
migrating from a IPU only solution to a heterogeneous SoC with an
MPUSS (ARM) and IPUSS. This is the focus of this section.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In order to describe this process, we need an example TI RTOS test
case to work with. For this purpose, we’ll be using the
UART_BasicExample_evmAM572x_m4ExampleProject example that’s part of
the PDK (installed as part of the Processor SDK RTOS). This example
uses TI RTOS and does serial IO using UART3 port on the AM572x GP EVM,
it’s labeled Serial Debug on the EVM silkscreen.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>There were several steps taken to make this whole process work, each of
which will be described in following sections</p>
<ol class="arabic simple">
<li><p>Build and run the out-of-box UART M4 example on the EVM using Code
Composer Studio (CCS)</p></li>
<li><p>Build and run the ex02_messageQ example from the IPC software bundle
and turn it into a CCS project. Build it and modify the Linux startup
code to use this new image. This is just a sanity check step to make
sure we can build the IPC examples in CCS and have them run at boot
up on the EVM.</p></li>
<li><p>In CCS, make a clone of the out-of-box UART M4 example and rename it
to denote it’s the IPC version of the example. Then using the
ex02_messageq example as a reference, add in the IPC pieces to the
UART example code. Build from CCS then add it to the Linux firmware
folder.</p></li>
</ol>
<p class="rubric" id="running-uart-readwrite-pdk-example-from-ccs">Running UART Read/Write PDK Example from CCS</p>
<p>Developers are required to run pdkProjectCreate script to generate this
example as described in the <a class="reference external" href="index_how_to_guides.html#rebuild-drivers-from-pdk-directory">Processor SDK RTOS wiki
article</a>.</p>
<p>For the UART M4 example run the script with the following arguments:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">pdkProjectCreate</span><span class="p">.</span><span class="n">bat</span> <span class="n">AM572x</span> <span class="n">evmAM572x</span> <span class="n">little</span> <span class="n">uart</span> <span class="n">m4</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p>After you run the script, you can find the UART M4 example project at
&lt;SDK_INSTALL_PATH&gt;/pdk_am57xx_1_0_4/packages/MyExampleProjects/UART_BasicExample_evmAM572x_m4ExampleProject.</p>
<p>Import the project in CCS and build the example. You can now connect to
the EVM using an emulator and CCS using the instructions provided here:
<a class="reference external" href="http://processors.wiki.ti.com/index.php/AM572x_GP_EVM_Hardware_Setup">http://processors.wiki.ti.com/index.php/AM572x_GP_EVM_Hardware_Setup</a></p>
<p>Connect to the ARM core and make sure GEL runs multicore initialization
and brings the IPUSS out of reset. Connect to IPU2 core0 and load and
run the M4 UART example. When you run the code you should see the
following log on the serial IO console:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">uart</span> <span class="n">driver</span> <span class="n">and</span> <span class="n">utils</span> <span class="n">example</span> <span class="n">test</span> <span class="nl">cases</span> <span class="p">:</span>
<span class="n">Enter</span> <span class="mi">16</span> <span class="n">characters</span> <span class="n">or</span> <span class="n">press</span> <span class="n">Esc</span>
<span class="mi">1234567890123456</span>  <span class="o">&lt;-</span> <span class="n">user</span> <span class="n">input</span>
<span class="n">Data</span> <span class="n">received</span> <span class="n">is</span>
<span class="mi">1234567890123456</span>  <span class="o">&lt;-</span> <span class="n">loopback</span> <span class="n">from</span> <span class="n">user</span> <span class="n">input</span>
<span class="n">uart</span> <span class="n">driver</span> <span class="n">and</span> <span class="n">utils</span> <span class="n">example</span> <span class="n">test</span> <span class="nl">cases</span> <span class="p">:</span>
<span class="n">Enter</span> <span class="mi">16</span> <span class="n">characters</span> <span class="n">or</span> <span class="n">press</span> <span class="n">Esc</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="build-and-run-ex02-messageq-ipc-example">Build and Run ex02_messageq IPC example</p>
<p>Follow instructions described in Article <a class="reference external" href="http://processors.wiki.ti.com/index.php/Processor_SDK_IPC_Quick_Start_Guide#Run_IPC_Linux_examples">Run IPC Linux
Examples</a></p>
<p class="rubric" id="update-linux-kernel-device-tree-to-remove-uart-that-will-be-controlled-by-m4">Update Linux Kernel device tree to remove UART that will be
controlled by M4</p>
<p>Linux kernel enables all SOC HW modules which are required for its
configuration. Appropriate drivers configure required clocks and
initialize HW registers. For all unused IPs clocks are not configured.</p>
<p>The uart3 node is disabled in kernel using device tree. Also this
restricts kernel to put those IPs to sleep mode.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">uart3</span> <span class="p">{</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s">&quot;disabled&quot;</span><span class="p">;</span>
    <span class="n">ti</span><span class="p">,</span><span class="n">no</span><span class="o">-</span><span class="n">idle</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p class="rubric" id="add-ipc-to-the-uart-example">Add IPC to the UART Example</p>
<p>The first step is to clone our out-of-box UART example CCS project and
rename it to denote it’s using IPC. The easiest way to do this is using
CCS. Here are the steps…</p>
<ul class="simple">
<li><p>In the <em>Edit</em> perspective, go into your <em>Project Explorer</em> window and
right click on your UART_BasicExample_evmAM572x_m4ExampleProject
project and select <em>copy</em> from the pop-up menu. Maske sure the
project is not is a closed state.</p></li>
<li><p>Rick click in and empty area of the project explorer window and
select past.</p></li>
<li><p>A dialog box pops up, modify the name to denote it’s using IPC. A
good name is UART_BasicExample_evmAM572x_m4ExampleProject_with_ipc.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This is the project we’ll be working with from here on. The next thing
we want to do is select the proper RTSC platform and other components.
To do this, follow these steps.</p>
<ul class="simple">
<li><p>Right click on the
UART_BasicExample_evmAM572x_m4ExampleProject_with_ipc project and
select <em>Properties</em></p></li>
<li><p>In the left hand pane, click on <em>CCS General</em>.</p></li>
<li><p>On the right hand side, click on the <em>RTSC</em> tab</p></li>
<li><p>For <em>XDCtools version:</em> select 3.xx.x.xx_core</p></li>
<li><p>In the list of <em>Products and Repositories</em>, <em>check</em> the following…</p>
<ul>
<li><p>IPC 3.xx.x.xx</p></li>
<li><p>SYS/BIOS 6.4x.x.xx</p></li>
<li><p>am57xx PDK x.x.x</p></li>
</ul>
</li>
<li><p>For <em>Target</em>, select <strong>ti.targets.arm.elf.M4</strong></p></li>
<li><p>For <em>Platform</em>, select <strong>ti.platforms.evmDRA7XX</strong></p></li>
<li><p>Once the platform is selected, edit its name buy hand and
append :ipu2 to the end. After this it should be
ti.platforms.evmDRA7XX:ipu2</p></li>
<li><p>Go ahead and leave the <em>Build-profile</em> set to debug.</p></li>
<li><p>Hit the OK button.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Now we want to copy configuration and source files from the
ex02_messageq IPC example into our project. The IPC example is located
at <em>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq</em>. To
copy files into your CCS project, you can simply select the files you
want in Windows explorer then drag and drop them into your project in
CCS.</p>
<p>Copy these files into your CCS project…</p>
<ul class="simple">
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/shared/AppCommon.h</p></li>
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/shared/config.bld</p></li>
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/shared/ipc.cfg.xs</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Now copy these files into your CCS project…</p>
<ul class="simple">
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/ipu2/Ipu2.cfg</p></li>
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/ipu2/MainIpu2.c</p></li>
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/ipu2/Server.c</p></li>
<li><p>C:/ti/ipc_3_xx_xx_xx/examples/DRA7XX_linux_elf/ex02_messageq/ipu2/Server.h</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you copy Ipu2.cfg into your CCS project, it
should show up greyed out. If not, right click and exclude it from
build. This is because the UART example already has a cfg file
(uart_m4_evmAM572x.cfg). The Ipu2.cfg will be used for copying and
pasting. When it’s all done, you can delete it from your project.</p>
</div>
<p>Finally, you will likely want to use a custom resource table so copy
these files into your CCS project…</p>
<ul class="simple">
<li><p>C:/ti/ipc_3_xx_xx_xx/packages/ti/ipc/remoteproc/rsc_table_vayu_ipu.h</p></li>
<li><p>C:/ti/ipc_3_xx_xx_xx/packages/ti/ipc/remoteproc/rsc_types.h</p></li>
</ul>
<p>The rsc_table_vayu_dsp.h file defines an initialized structure so let’s
make a <em>.c</em> source file.</p>
<ul class="simple">
<li><p>In your CCS project, rename rsc_table_vayu_ipu.h to
rsc_table_vayu_ipu.c</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Now we want to <em>merge</em> the IPC example configuration file with the LED
blink example configuration file. Follow these steps…</p>
<ul class="simple">
<li><p>Open up <em>Ipu2.cfg</em> using a text editor (don’t open it using the GUI).
Right click on it and select <em>Open With -&gt; XDCscript Editor</em></p></li>
<li><p>We want to copy the entire contents into the clipboard. Select all
and copy.</p></li>
<li><p>Now just like above, open the uart_m4_evmAM572x.cfg config file in
the text editor. Go to the very bottom and <em>paste</em> in the contents
from the Ipu2.cfg file. Basically we’ve appended the contents of
Ipu2.cfg into uart_m4_evmAM572x.cfg.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>We’ve now added in all the necessary configuration and source files
into our project. Don’t expect it to build at this point, we have to
make edits first. These edits are listed below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can download the full CCS project with source files to use as a reference.
See link towards the end of this section.</p>
</div>
<ul class="simple">
<li><p>Edit <strong>uart_m4_evmAM572x.cfg</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Add the following to the beginning(at the top) of your configuration
file</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Program = xdc.useModule(&#39;xdc.cfg.Program&#39;);
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Since we are no longer using a shared folder, make the following
change</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//var ipc_cfg = xdc.loadCapsule(&quot;../shared/ipc.cfg.xs&quot;);</span>
<span class="n">var</span> <span class="n">ipc_cfg</span> <span class="o">=</span> <span class="n">xdc</span><span class="p">.</span><span class="n">loadCapsule</span><span class="p">(</span><span class="s">&quot;../ipc.cfg.xs&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the following. We’ll be calling this function directly from
main.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//BIOS.addUserStartupFunction(&#39;&amp;IpcMgr_ipcStartup&#39;);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Increase the system stack size</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//Program.stack = 0x1000;</span>
<span class="n">Program</span><span class="p">.</span><span class="n">stack</span> <span class="o">=</span> <span class="mh">0x8000</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the entire TICK section</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* --------------------------- TICK --------------------------------------*/</span>
<span class="c1">// var Clock = xdc.useModule(&#39;ti.sysbios.knl.Clock&#39;);</span>
<span class="c1">// Clock.tickSource = Clock.TickSource_NULL;</span>
<span class="c1">// //Clock.tickSource = Clock.TickSource_USER;</span>
<span class="c1">// /* Configure BIOS clock source as GPTimer5 */</span>
<span class="c1">// //Clock.timerId = 0;</span>
<span class="c1">//</span>
<span class="c1">// var Timer = xdc.useModule(&#39;ti.sysbios.timers.dmtimer.Timer&#39;);</span>
<span class="c1">//</span>
<span class="c1">// /* Skip the Timer frequency verification check. Need to remove this later */</span>
<span class="c1">// Timer.checkFrequency = false;</span>
<span class="c1">//</span>
<span class="c1">// /* Match this to the SYS_CLK frequency sourcing the dmTimers.</span>
<span class="c1">//  * Not needed once the SYS/BIOS family settings is updated. */</span>
<span class="c1">// Timer.intFreq.hi = 0;</span>
<span class="c1">// Timer.intFreq.lo = 19200000;</span>
<span class="c1">//</span>
<span class="c1">// //var timerParams = new Timer.Params();</span>
<span class="c1">// //timerParams.period = Clock.tickPeriod;</span>
<span class="c1">// //timerParams.periodType = Timer.PeriodType_MICROSECS;</span>
<span class="c1">// /* Switch off Software Reset to make the below settings effective */</span>
<span class="c1">// //timerParams.tiocpCfg.softreset = 0x0;</span>
<span class="c1">// /* Smart-idle wake-up-capable mode */</span>
<span class="c1">// //timerParams.tiocpCfg.idlemode = 0x3;</span>
<span class="c1">// /* Wake-up generation for Overflow */</span>
<span class="c1">// //timerParams.twer.ovf_wup_ena = 0x1;</span>
<span class="c1">// //Timer.create(Clock.timerId, Clock.doTick, timerParams);</span>
<span class="c1">//</span>
<span class="c1">// var Idle = xdc.useModule(&#39;ti.sysbios.knl.Idle&#39;);</span>
<span class="c1">// var Deh = xdc.useModule(&#39;ti.deh.Deh&#39;);</span>
<span class="c1">//</span>
<span class="c1">// /* Must be placed before pwr mgmt */</span>
<span class="c1">// Idle.addFunc(&#39;&amp;ti_deh_Deh_idleBegin&#39;);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Make configuration change to use custom resource table. Add to the end
of the file.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>/* Override the default resource table with my own */
var Resource = xdc.useModule(&#39;ti.ipc.remoteproc.Resource&#39;);
Resource.customTable = true;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>main_uart_example.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Add the following external declarations</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span> <span class="n">Int</span> <span class="nf">ipc_main</span><span class="p">();</span>
<span class="k">extern</span> <span class="n">Void</span> <span class="nf">IpcMgr_ipcStartup</span><span class="p">(</span><span class="n">Void</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In main(), add a call to ipc_main() and IpcMgr_ipcStartup() just before
BIOS_start()</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ipc_main</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">callIpcStartup</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">IpcMgr_ipcStartup</span><span class="p">();</span>
 <span class="p">}</span>
 <span class="cm">/* Start BIOS */</span>
 <span class="n">BIOS_start</span><span class="p">();</span>
 <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment out the line that calls Board_init(boardCfg). This call is in
the original example because it assumes TI-RTOS is running on the Arm
but in our case here, we are running Linux and this call is destructive
so we comment it out. The board init call does all pinmux configuration,
module clock and UART peripheral initialization.</p>
<p>In order to run the UART Example on M4, you need to disable the UART in
the Linux DTB file and interact with the Linux kernel using Telnet (This
will be described later in the article). Since Linux will be running
uboot performs the pinmux configuration but clock and UART Stdio setup
needs to be performed by the M4.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Original code</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined(EVM_K2E) || defined(EVM_C6678)</span>
    <span class="n">boardCfg</span> <span class="o">=</span> <span class="n">BOARD_INIT_MODULE_CLOCK</span> <span class="o">|</span> <span class="n">BOARD_INIT_UART_STDIO</span><span class="p">;</span>
<span class="cp">#else</span>
    <span class="n">boardCfg</span> <span class="o">=</span> <span class="n">BOARD_INIT_PINMUX_CONFIG</span> <span class="o">|</span> <span class="n">BOARD_INIT_MODULE_CLOCK</span> <span class="o">|</span> <span class="n">BOARD_INIT_UART_STDIO</span><span class="p">;</span>
<span class="cp">#endif</span>
    <span class="n">Board_init</span><span class="p">(</span><span class="n">boardCfg</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Modified Code :</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">boardCfg</span> <span class="o">=</span> <span class="n">BOARD_INIT_UART_STDIO</span><span class="p">;</span>
<span class="n">Board_init</span><span class="p">(</span><span class="n">boardCfg</span><span class="p">);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>We are not done yet as we still need to configure turn the clock control
on for the UART without impacting the other clocks. We can do that by
adding the following code before Board_init API call:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CSL_l4per_cm_core_componentRegs</span> <span class="o">*</span><span class="n">l4PerCmReg</span> <span class="o">=</span>
    <span class="p">(</span><span class="n">CSL_l4per_cm_core_componentRegs</span> <span class="o">*</span><span class="p">)</span><span class="n">CSL_MPU_L4PER_CM_CORE_REGS</span><span class="p">;</span>
<span class="n">CSL_FINST</span><span class="p">(</span><span class="n">l4PerCmReg</span><span class="o">-&gt;</span><span class="n">CM_L4PER_UART3_CLKCTRL_REG</span><span class="p">,</span>
    <span class="n">L4PER_CM_CORE_COMPONENT_CM_L4PER_UART3_CLKCTRL_REG_MODULEMODE</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
<span class="k">while</span><span class="p">(</span><span class="n">CSL_L4PER_CM_CORE_COMPONENT_CM_L4PER_UART3_CLKCTRL_REG_IDLEST_FUNC</span> <span class="o">!=</span>
   <span class="n">CSL_FEXT</span><span class="p">(</span><span class="n">l4PerCmReg</span><span class="o">-&gt;</span><span class="n">CM_L4PER_UART3_CLKCTRL_REG</span><span class="p">,</span>
    <span class="n">L4PER_CM_CORE_COMPONENT_CM_L4PER_UART3_CLKCTRL_REG_IDLEST</span><span class="p">));</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Edit <strong>MainIpu2.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The app now has it’s own main(), so rename this one and get rid of args</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//Int main(Int argc, Char* argv[])</span>
<span class="n">Int</span> <span class="nf">ipc_main</span><span class="p">()</span>
<span class="p">{</span>
</pre></div>
</div>
<p>No longer using args so comment these lines</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//taskParams.arg0 = (UArg)argc;</span>
<span class="c1">//taskParams.arg1 = (UArg)argv;</span>
</pre></div>
</div>
<p>BIOS_start() is done in the app main() so comment it out here</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* start scheduler, this never returns */</span>
<span class="c1">//BIOS_start();</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Comment this out</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//Log_print0(Diags_EXIT, &quot;&lt;-- main:&quot;);</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>rsc_table_vayu_ipu.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Set this #define before it’s used to select PHYS_MEM_IPC_VRING value</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define VAYU_IPU_2</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Add this extern declaration prior to the symbol being used</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span> <span class="kt">char</span> <span class="n">ti_trace_SysMin_Module_State_0_outbuf__A</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Edit <strong>Server.c</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>No longer have shared folder so change include path</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* local header files */</span>
<span class="c1">//#include &quot;../shared/AppCommon.h&quot;</span>
<span class="cp">#include</span> <span class="cpf">&quot;../AppCommon.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="handling-ammu-l1-unicache-mmu-and-l2-mmu">Handling AMMU (L1 Unicache MMU) and L2 MMU</p>
<p>There are two MMUs inside each of the IPU1, and IPU2 subsystems. The L1
MMU is referred to as IPU_UNICACHE_MMU or AMMU and L2 MMU. The
description of how this is configured in IPC-remoteproc has been
described in section
<a class="reference external" href="http://processors.wiki.ti.com/index.php/Linux_IPC_on_AM57xx#Changing_Cortex_M4_IPU_Memory_Map">Changing_Cortex_M4_IPU_Memory_Map</a>.
IPC handling of L1 and L2 MMU is different from how the PDK driver
examples setup the memory access using these MMUs which the users need
to manage when integrating the components. This difference is
highlighted below:</p>
<img alt="../_images/IPU_MMU_Peripheral_access.png" src="../_images/IPU_MMU_Peripheral_access.png" />
<ul class="simple">
<li><p>PDK examples use addresses (0x4X000000) to peripheral registers and
use following MMU setting</p>
<ul>
<li><p>L2 MMU uses default 1:1 Mapping</p></li>
<li><p>AMMU configuration translates physical 0x4X000000 access to
logical 0x4X000000</p></li>
</ul>
</li>
<li><p>IPC+ Remote Proc ARM+M4 requires IPU to use logical address
(0x6X000000) and uses following MMU setting</p>
<ul>
<li><p>L2 MMU is configured such that MMU translates 0x6X000000 access to
addresss 0x4X000000</p></li>
<li><p>AMMU is configured for 1:1 mapping 0x6X000000 and 0x6X000000</p></li>
</ul>
</li>
</ul>
<p>Therefore after integrating IPC with PDK drivers, it is recommended that
the alias addresses are used to access peripherals and PRCM registers.
This requires changes to the addresses used by PDK drivers and in
application code.</p>
<p>The following changes were then made to the IPU application source code:</p>
<p>Add UART_soc.c file to the project and modify the base addresses for all
IPU UART register instance in the UART_HwAttrs to use alias addresses:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifdef _TMS320C6X</span>
    <span class="n">CSL_DSP_UART3_REGS</span><span class="p">,</span>
    <span class="n">OSAL_REGINT_INTVEC_EVENT_COMBINER</span><span class="p">,</span>
<span class="cp">#elif defined(__ARM_ARCH_7A__)</span>
    <span class="n">CSL_MPU_UART3_REGS</span><span class="p">,</span>
    <span class="mi">106</span><span class="p">,</span>
<span class="cp">#else</span>
    <span class="p">(</span><span class="n">CSL_IPU_UART3_REGS</span> <span class="o">+</span> <span class="mh">0x20000000</span><span class="p">),</span>    <span class="c1">//Base Addr = 0x48000000 + 0x20000000 = 0x68000000</span>
    <span class="mi">45</span><span class="p">,</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p>Adding custom SOC configuration also means that you should use the
generic UART driver instead of driver with built in SOC setup. To do
this comment the following line in .cfg:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>var Uart              = xdc.loadPackage(&#39;ti.drv.uart&#39;);
//Uart.Settings.socType = socType;
</pre></div>
</div>
<p>There is also an instance in the application code where we added pointer
to PRCM registers that need to be changed as follows.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span> <span class="n">CSL_l4per_cm_core_componentRegs</span> <span class="o">*</span><span class="n">l4PerCmReg</span> <span class="o">=</span>
<span class="p">(</span><span class="n">CSL_l4per_cm_core_componentRegs</span> <span class="o">*</span><span class="p">)</span> <span class="mh">0x6a009700</span><span class="p">;</span> <span class="c1">//CSL_MPU_L4PER_CM_CORE_REGS;</span>
</pre></div>
</div>
<p>Now, you are ready to build the firmware. After the .out is built,
change the extension to .xem4 and copy it over to the location in the
filesystem that is used to load M4 firmware.</p>
</div>
</div>
<div class="section" id="customizing-memory-map-for-creating-multicore-applications-on-am57xx-using-ipc">
<h3>10.2.5.2. Customizing Memory map for creating Multicore Applications on AM57xx using IPC<a class="headerlink" href="#customizing-memory-map-for-creating-multicore-applications-on-am57xx-using-ipc" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.ti.com/lit/an/sprac60/sprac60.pdf">http://www.ti.com/lit/an/sprac60/sprac60.pdf</a></p>
</div>
<div class="section" id="ipc-debugging-tools-and-techniques-on-am57xx">
<h3>10.2.5.3. IPC Debugging Tools and Techniques on AM57xx<a class="headerlink" href="#ipc-debugging-tools-and-techniques-on-am57xx" title="Permalink to this headline">¶</a></h3>
<p>The sections relevant to AM57xx have been pulled from the <a class="reference external" href="http://www.ti.com/lit/an/sprac12/sprac12.pdf">Debugging Tools and Techniques With IPC3.x Application Note</a> and placed here.</p>
<div class="section" id="id32">
<h4>10.2.5.3.1. Introduction<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<p>During development of software, it is common to encounter issues that must be debugged to provide a
robust software offering. When developing software that uses the IPC3.x product for inter-processor
communication, there are tools and techniques available to aid in the debugging process. These tools and
techniques help to more quickly understand and debug the issue. This document addresses all three
HLOS’s supported by IPC3.x: Android™ platform, Linux®, and QNX®. Where applicable, differences
between the OS’s are noted.
This document aims to provide tools, techniques, and resources for debugging issues encountered when
using the IPC3.x to communicate with remote core software.</p>
</div>
<div class="section" id="debug-tools">
<h4>10.2.5.3.2. Debug Tools<a class="headerlink" href="#debug-tools" title="Permalink to this headline">¶</a></h4>
<p>There are several tools that can be leveraged for debugging the IPC, from simple tracing to using Code
Composer Studio™ (CCS) to attach to the remote cores. Each provides different advantages in
the debugging process.</p>
<div class="section" id="tracing">
<h5>10.2.5.3.2.1. Tracing<a class="headerlink" href="#tracing" title="Permalink to this headline">¶</a></h5>
<p>When an issue occurs, checking the traces is often the first thing done. The traces can give quick insight
into what may be happening. In normal, non-error cases, you might see little to no traces from the IPC.
But when there is an error, there often is an error trace that can be used to shed light on the issue. An
error trace often gives an error code and a module or function name that can be used to identify where the
error was thrown.</p>
</div>
<div class="section" id="linux-and-android-debugfs">
<h5>10.2.5.3.2.2. Linux and Android - Debugfs<a class="headerlink" href="#linux-and-android-debugfs" title="Permalink to this headline">¶</a></h5>
<p>Another useful place to look for debug info is in the debugfs. Information for each remote processor can
be found there, as well as remote core traces, state information, and more.</p>
</div>
<div class="section" id="code-composer-studio">
<h5>10.2.5.3.2.3. Code Composer Studio<a class="headerlink" href="#code-composer-studio" title="Permalink to this headline">¶</a></h5>
<p>Connecting over JTAG using Code Composer Studio provides the ability to see exactly what is happening
on the remote core, providing access to a wealth of information including viewing memory, registers, and
stepping through the code.</p>
</div>
</div>
<div class="section" id="traces">
<h4>10.2.5.3.3. Traces<a class="headerlink" href="#traces" title="Permalink to this headline">¶</a></h4>
<p>The first place to check when an issue occurs is the traces. Often an error code or a trace regarding an
error gives some clue. Both the remote core traces and the HLOS-side traces can be checked.</p>
<div class="section" id="linux-and-android-enabling-ipc-traces">
<h5>10.2.5.3.3.1. Linux and Android - Enabling IPC Traces<a class="headerlink" href="#linux-and-android-enabling-ipc-traces" title="Permalink to this headline">¶</a></h5>
<p>By default, the IPC only prints error traces. To enable additional tracing, use the IPC_DEBUG
environment variable at runtime. This feature is only supported on Linux and is available starting in IPC
3.22.00.05. Table 1 lists the two levels of tracing supported.</p>
<p>Table 1. IPC_DEBUG Trace Levels</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trace Level</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enables all warnings and errors to be printed</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Turns on all tracing (including socket and LAD client tracing).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="qnx-enabling-ipc-traces">
<h5>10.2.5.3.3.2. QNX – Enabling IPC Traces<a class="headerlink" href="#qnx-enabling-ipc-traces" title="Permalink to this headline">¶</a></h5>
<p>When using QNX, additional traces are enabled by setting environment variables. There are separate
environment variables for enabling traces in the resource manager and the user libraries.</p>
<p><strong>Resource Manager Traces</strong></p>
<p>Enable additional traces in the slog by setting the environment variable IPC_DEBUG_SLOG_LEVEL at
runtime. By default, only errors and warnings are printed. The IPC_DEBUG_SLOG_LEVEL can be set
before launching IPC to enable more traces. Setting the level to 7 enables all IPC traces. The default level
is 2.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">export</span> <span class="n">IPC_DEBUG_SLOG_LEVEL</span><span class="o">=</span><span class="mi">7</span>
</pre></div>
</div>
<p>These traces are printed to the slog, and can be viewed by using the sloginfo command. All IPC traces
use 42 as identification in the slog, and you can filter the slog to view only these traces:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>sloginfo –m42
</pre></div>
</div>
<p><strong>User Library Traces</strong></p>
<p>User library traces can be enabled by using the variable IPC_DEBUG when launching the application.
Valid levels are 1 to 3, with 3 being the most verbose. For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">IPC_DEBUG</span><span class="o">=&lt;</span><span class="n">level</span><span class="o">&gt;</span> <span class="n">app_host</span>
</pre></div>
</div>
</div>
<div class="section" id="linux-and-android-remote-core-traces">
<h5>10.2.5.3.3.3. Linux and Android - Remote Core Traces<a class="headerlink" href="#linux-and-android-remote-core-traces" title="Permalink to this headline">¶</a></h5>
<p>The remote core traces can be checked by using debugfs. Run the following command, replacing the “X”
with the core-id for the remote core to be checked.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">remoteproc</span><span class="o">/</span><span class="n">remoteprocX</span><span class="o">/</span><span class="n">trace0</span>
</pre></div>
</div>
<p>Check the following when checking the traces after an error recovery has occurred:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">remoteproc</span><span class="o">/</span><span class="n">remoteprocX</span><span class="o">/</span><span class="n">trace0_last</span>
</pre></div>
</div>
<p>This provides the last traces that happened before error recovery was triggered. For more information
about debugging remote core faults and exceptions, see <a class="reference internal" href="#debugging-mmu-faults-and-exceptions">Debugging MMU Faults and Exceptions</a>.</p>
<p>The core-id, “X”, starts at 0 and increments to include all of the remote cores supported by the remoteproc
module in the dts file. Because the number of remoteprocs supported can vary depending on the dts
configuration, it is not ensured that a certain remote core will always have a certain core-id if the
remoteprocs supported in the dts file changes.</p>
<p>The core associated with a particular core-id can be found by checking the name of the remoteproc (see <a class="reference internal" href="#linux-and-android-remoteproc">Linux and Android - Remoteproc</a>). Table 2 associates the remoteproc name with the common name of the
remote processor.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">remoteproc</span><span class="o">/</span><span class="n">remoteprocX</span><span class="o">/</span><span class="n">name</span>
</pre></div>
</div>
<p>Table 2. Remoteproc Names for AM57xx</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Debugfs Name</p></th>
<th class="head"><p>Remote Core Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>58820000.ipu</p></td>
<td><p>IPU1</p></td>
</tr>
<tr class="row-odd"><td><p>55020000.ipu</p></td>
<td><p>IPU2</p></td>
</tr>
<tr class="row-even"><td><p>40800000.dsp</p></td>
<td><p>DSP1</p></td>
</tr>
<tr class="row-odd"><td><p>41000000.dsp</p></td>
<td><p>DSP2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="qnx-remote-core-traces">
<h5>10.2.5.3.3.4. QNX - Remote Core Traces<a class="headerlink" href="#qnx-remote-core-traces" title="Permalink to this headline">¶</a></h5>
<p>The remote core traces can be checked by using sysfs. Run the following command, replacing &lt;core
name&gt; with the core name for the remote core to check. Valid core names for AM57xx are IPU1, IPU2,
DSP1, and DSP2.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ipc</span><span class="o">-</span><span class="n">trace</span><span class="o">/&lt;</span><span class="n">core</span> <span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>When checking the traces after error recovery has happened, check the logfile specified at IPC startup, if
one was specified. When starting IPC, specify a logfile using the “-c” option. When an error recovery
happens, the last traces are dumped to this log file. For more information about debugging remote core
faults and exceptions, see <a class="reference internal" href="#debugging-mmu-faults-and-exceptions">Debugging MMU Faults and Exceptions</a>.</p>
</div>
<div class="section" id="qnx-adding-traces">
<h5>10.2.5.3.3.5. QNX - Adding Traces<a class="headerlink" href="#qnx-adding-traces" title="Permalink to this headline">¶</a></h5>
<p>In some cases, you may want to add traces to get more information about the issue. If the issue is reliably
reproducible, one technique is to add additional traces to get more information. If the issue is timing-related, this technique may not be helpful, as it may mask the issue</p>
<p><strong>SYS-BIOS</strong></p>
<p>You can add traces in the SYS-BIOS IPC code that come to the trace buffer by using the System_printf()
API. After adding traces to the SYS-BIOS IPC and rebuilding the IPC, you must rebuild the remote core
image. The traces come to the remote core trace buffer and can be viewed by following the instructions in
<a class="reference internal" href="#linux-and-android-remote-core-traces">Linux and Android - Remote Core Traces</a>.</p>
<p><strong>Linux</strong></p>
<p>Additionally, traces can be added in the Linux code. The modules of interest when adding traces are the
remoteproc, iommu, and rpmsg modules in the kernel, and the MessageQ, MMRPC, and LAD modules in
the user space.</p>
<p>In the kernel are these modules in the following paths:</p>
<ul class="simple">
<li><p>drivers/remoteproc/</p></li>
<li><p>drivers/iommu/</p></li>
<li><p>drivers/rpmsg/</p></li>
</ul>
<p>Most of the user space code can be found in the IPC package, in the linux folder. The MMRPC code is
found in the packages/ti/ipc/mm/ folder.</p>
</div>
</div>
<div class="section" id="remote-core-status-information">
<h4>10.2.5.3.4. Remote Core Status Information<a class="headerlink" href="#remote-core-status-information" title="Permalink to this headline">¶</a></h4>
<p>Useful information about the status of the remote cores can be found in debugfs.</p>
<div class="section" id="linux-and-android-remoteproc">
<h5>10.2.5.3.4.1. Linux and Android - Remoteproc<a class="headerlink" href="#linux-and-android-remoteproc" title="Permalink to this headline">¶</a></h5>
<p>Information about each remote core can be found in the following, where the “X” can be replaced with the
remote core id.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">remoteproc</span><span class="o">/</span><span class="n">remoteprocX</span><span class="o">/&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Table 3 lists what can be found for each core.</p>
<p>Table 3. Remoteproc Debugfs Entries</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entry</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>Processor name, comprised of the RAM address and the processor type,
(for example, 58820000.ipu for IPU1). For a complete list of names, see Table 2.</p></td>
</tr>
<tr class="row-odd"><td><p>recovery</p></td>
<td><p>Returns either “enabled” or “disabled”, indicating if recovery is enabled or disabled for
the remote processor.</p></td>
</tr>
<tr class="row-even"><td><p>state</p></td>
<td><p>Gives the state of the remote processor. State is one of:
* offline (0)
* suspended (1)
* running (2)
* crashed (3)</p></td>
</tr>
<tr class="row-odd"><td><p>trace0</p></td>
<td><p>Returns the contents of the remote processor trace buffer.</p></td>
</tr>
<tr class="row-even"><td><p>trace0_last</p></td>
<td><p>Created after recovering the remote core. Returns the contents of the remote processor
trace buffer before recovery was triggered.</p></td>
</tr>
<tr class="row-odd"><td><p>version</p></td>
<td><p>Returns the version. Currently returns nothing.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="linux-and-android-iommu-info">
<h5>10.2.5.3.4.2. Linux and Android - IOMMU Info<a class="headerlink" href="#linux-and-android-iommu-info" title="Permalink to this headline">¶</a></h5>
<p>Information about the IOMMU can also be found in debugfs. It can be found in the following path, where
“XXXXXXXX” is replaced by the register address for the remote core MMU registers.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">omap_iommu</span><span class="o">/</span><span class="n">XXXXXXXX</span><span class="p">.</span><span class="n">mmu</span><span class="o">/&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Table 4 gives the corresponding core name for each MMU for AM57xx, and the register address in the TRM.</p>
<p>Table 4. IOMMU Entry Names</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>IOMMU Entry</p></th>
<th class="head"><p>Core Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>58882000.mmu</p></td>
<td><p>IPU1</p></td>
</tr>
<tr class="row-odd"><td><p>55082000.mmu</p></td>
<td><p>IPU2</p></td>
</tr>
<tr class="row-even"><td><p>40d01000.mmu</p></td>
<td><p>DSP1 (MMU1)</p></td>
</tr>
<tr class="row-odd"><td><p>40d02000.mmu</p></td>
<td><p>DSP1 (MMU2)</p></td>
</tr>
<tr class="row-even"><td><p>41501000.mmu</p></td>
<td><p>DSP2 (MMU1)</p></td>
</tr>
<tr class="row-odd"><td><p>41502000.mmu</p></td>
<td><p>DSP2 (MMU2)</p></td>
</tr>
</tbody>
</table>
<p>Some of this information is inaccessible from a suspended state. Table 5 lists what can be found for each core.</p>
<p>Table 5. IOMMU Debugfs Entries</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entry</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>nr_tlb_entries</p></td>
<td><p>Gives the number of tlb entries</p></td>
</tr>
<tr class="row-odd"><td><p>pagetable</p></td>
<td><p>Dumps the pagetable entries</p></td>
</tr>
<tr class="row-even"><td><p>regs</p></td>
<td><p>Gives the values of the MMU registers</p></td>
</tr>
<tr class="row-odd"><td><p>tlb</p></td>
<td><p>Lists the tlb entries.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="qnx-remote-core-state-information">
<h5>10.2.5.3.4.3. QNX – Remote Core State Information<a class="headerlink" href="#qnx-remote-core-state-information" title="Permalink to this headline">¶</a></h5>
<p>Find out the current state of the remote core by issuing the following command:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ipc</span><span class="o">-</span><span class="n">state</span><span class="o">/&lt;</span><span class="n">core_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The “core_name” is the name of the remote core. Valid names for AM57xx are IPU1, IPU2, DSP1, and
DSP2. The current state will show as “running” or “reset”.</p>
</div>
</div>
<div class="section" id="using-code-composer-studio">
<h4>10.2.5.3.5. Using Code Composer Studio<a class="headerlink" href="#using-code-composer-studio" title="Permalink to this headline">¶</a></h4>
<p>A useful tool for debugging issues is Code Composer Studio. CCS allows easy connection to the remote
core in order to see the state of the remote core.</p>
<div class="section" id="debug-symbols">
<h5>10.2.5.3.5.1. Debug Symbols<a class="headerlink" href="#debug-symbols" title="Permalink to this headline">¶</a></h5>
<p>The remote core image must be built with debug symbols to see information such as the call stack and
variables. Once attached, load the symbols. The symbols are built into the executable itself. When loading
symbols, point to the same executable that is loaded on the target (or the unstripped version locally, if it is stripped to save space when loading to the target.)</p>
</div>
<div class="section" id="linux-and-android-disabling-remoteproc-auto-suspend">
<h5>10.2.5.3.5.2. Linux and Android - Disabling Remoteproc Auto-Suspend<a class="headerlink" href="#linux-and-android-disabling-remoteproc-auto-suspend" title="Permalink to this headline">¶</a></h5>
<p>You may want to disable auto-suspend of the remote cores (provided that is not what is being debugged).
When the core is suspended, you will not be able to connect to the remote core using CCS. Auto-suspend
can be disabled by setting the power control to “on” for the remote core.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">on</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">bus</span><span class="o">/</span><span class="n">platform</span><span class="o">/</span><span class="n">devices</span><span class="o">/&lt;</span><span class="n">device</span><span class="o">&gt;/</span><span class="n">power</span><span class="o">/</span><span class="n">control</span>
</pre></div>
</div>
<p>The remote core device name for each remote core can be found in Table 2.</p>
</div>
<div class="section" id="linux-and-android-disabling-watchdog">
<h5>10.2.5.3.5.3. Linux and Android – Disabling Watchdog<a class="headerlink" href="#linux-and-android-disabling-watchdog" title="Permalink to this headline">¶</a></h5>
<p>You may decide to disable the watchdog timers when debugging and using CCS. Otherwise, while
connected to the target, the watchdog may expire, triggering an abort sequence. Disable the watchdog
timers for a remote core by removing their definitions from the dts file. For example, to disable the
watchdog timers for IPU1, change the dts file as below:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">ipu1</span> <span class="p">{</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s">&quot;okay&quot;</span><span class="p">;</span>

    <span class="n">memory</span><span class="o">-</span><span class="n">region</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">ipu1_cma_pool</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="n">mboxes</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">mailbox5</span> <span class="o">&amp;</span><span class="n">mbox_ipu1_legacy</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="n">timers</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">timer11</span><span class="o">&gt;</span><span class="p">;</span>

   <span class="o">-</span> <span class="n">watchdog</span><span class="o">-</span><span class="n">timers</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">timer7</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;&amp;</span><span class="n">timer8</span><span class="o">&gt;</span><span class="p">;</span>

   <span class="o">+</span> <span class="cm">/*watchdog-timers = &lt;&amp;timer7&gt;, &lt;&amp;timer8&gt;;*/</span>
</pre></div>
</div>
</div>
<div class="section" id="sys-bios-disabling-watchdog">
<h5>10.2.5.3.5.4. SYS/BIOS – Disabling Watchdog<a class="headerlink" href="#sys-bios-disabling-watchdog" title="Permalink to this headline">¶</a></h5>
<p>When using QNX, you can disable the watchdog from within the remote core image itself.
If using Linux or Android, this step is not required; simply follow the instructions in <a class="reference internal" href="#linux-and-android-disabling-watchdog">Linux and Android – Disabling Watchdog</a>.</p>
<p>To disable the usage of the watchdog from the remote core without completely disabling the device
exception module (DEH), comment out the calls to Watchdog_init in the SYS/BIOS IPC code. These calls
can be found in packages/ti/deh/Deh.c, packages/ti/deh/DehDsp.c, and packages/ti/ipc/ipcmgr/IpcMgr.c.</p>
<p>packages/ti/deh/Deh.c:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* ======== Deh_Module_startup ========</span>
<span class="cm">*/</span>
<span class="n">Int</span> <span class="nf">Deh_Module_startup</span><span class="p">(</span><span class="n">Int</span> <span class="n">phase</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="n">AMMU_Module_startupDone</span><span class="p">()</span> <span class="o">==</span> <span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
<span class="o">-</span> <span class="n">Watchdog_init</span><span class="p">(</span><span class="n">ti_sysbios_family_arm_m3_Hwi_excHandlerAsm__I</span><span class="p">);</span>
<span class="o">+</span> <span class="c1">//Watchdog_init(ti_sysbios_family_arm_m3_Hwi_excHandlerAsm__I);</span>
<span class="k">return</span> <span class="n">Startup_DONE</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">return</span> <span class="n">Startup_NOTDONE</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>packages/ti/deh/DehDsp.c:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Int</span> <span class="nf">Deh_Module_startup</span><span class="p">(</span><span class="n">Int</span> <span class="n">phase</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#if defined(HAS_AMMU)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">AMMU_Module_startupDone</span><span class="p">()</span> <span class="o">==</span> <span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
<span class="o">-</span> <span class="n">Watchdog_init</span><span class="p">((</span><span class="n">Void</span> <span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="n">Void</span><span class="p">))</span><span class="n">ti_sysbios_family_c64p_Exception_handler</span><span class="p">);</span>
<span class="o">+</span> <span class="c1">//Watchdog_init((Void (*)(Void))ti_sysbios_family_c64p_Exception_handler);</span>
<span class="k">return</span> <span class="n">Startup_DONE</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">return</span> <span class="n">Startup_NOTDONE</span><span class="p">;</span>
<span class="cp">#else</span>
<span class="o">-</span> <span class="n">Watchdog_init</span><span class="p">((</span><span class="n">Void</span> <span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="n">Void</span><span class="p">))</span><span class="n">ti_sysbios_family_c64p_Exception_handler</span><span class="p">);</span>
<span class="o">+</span> <span class="c1">//Watchdog_init((Void (*)(Void))ti_sysbios_family_c64p_Exception_handler);</span>
<span class="k">return</span> <span class="n">Startup_DONE</span><span class="p">;</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p>packages/ti/ipc/ipcmgr/IpcMgr.c:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>Void IpcMgr_rpmsgStartup(Void)
{
Assert_isTrue(MultiProc_self() != MultiProc_getId(&quot;HOST&quot;), NULL);
RPMessage_init(MultiProc_getId(&quot;HOST&quot;));
-#ifdef IpcMgr_USEDEH
+#if 0
/*
* When using DEH, initialize the Watchdog timers if not already done
* (i.e. late-attach)
*/
#ifdef IpcMgr_DSP
Watchdog_init((Void (*)(Void))ti_sysbios_family_c64p_Exception_handler);
#elif IpcMgr_IPU
Watchdog_init(ti_sysbios_family_arm_m3_Hwi_excHandlerAsm__I);
#endif
#endif
}
[...]
Void IpcMgr_ipcStartup(Void)
{
UInt procId = MultiProc_getId(&quot;HOST&quot;);
Int status;
/* TransportRpmsgSetup will busy wait until host kicks ready to recv: */
status = TransportRpmsgSetup_attach(procId, 0);
Assert_isTrue(status &gt;= 0, NULL);
/* Sets up to communicate with host&#39;s NameServer: */
status = NameServerRemoteRpmsg_attach(procId, 0);
Assert_isTrue(status &gt;= 0, NULL);
-#ifdef IpcMgr_USEDEH
+#if 0
/*
* When using DEH, initialize the Watchdog timers if not already done
* (i.e. late-attach)
*/
#ifdef IpcMgr_DSP
Watchdog_init((Void (*)(Void))ti_sysbios_family_c64p_Exception_handler);
#elif IpcMgr_IPU
Watchdog_init(ti_sysbios_family_arm_m3_Hwi_excHandlerAsm__I);
#endif
#endif
}
</pre></div>
</div>
<p>Following this, rebuild the IPC and the remote core image to have an image with DEH, but without
watchdog enabled.</p>
</div>
<div class="section" id="attaching-before-the-issue">
<h5>10.2.5.3.5.5. Attaching Before the Issue<a class="headerlink" href="#attaching-before-the-issue" title="Permalink to this headline">¶</a></h5>
<p>In certain cases, you may want to attach to the remote core before the issue has occurred. If the issue is
reliably reproducible and always occurs at the same location, then adding a breakpoint close to where the
issue happens could be a good way to get a better picture of what is happening.</p>
<p>One instance where it may be difficult is if the issue is happening during boot-up of the remote core. In
this case, it may be necessary to add a while loop in the main function, to attach before the issue occurs.
Add a loop similar to this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="k">volatile</span> <span class="kt">int</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="n">foo</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, after attaching, load the symbols, add the breakpoints, change “foo” to 0, and continue running.</p>
</div>
<div class="section" id="attaching-after-the-issue">
<h5>10.2.5.3.5.6. Attaching After the Issue<a class="headerlink" href="#attaching-after-the-issue" title="Permalink to this headline">¶</a></h5>
<p>You can also attach to the core after the issue, load the symbols, and see the state and view memory.
You can view the Exception module’s exception CallStack ROV view and the task module’s per task
CallStack ROV view. For more information about the runtime object viewer (ROV) in the RTSC
documentation online, see <a class="reference external" href="http://rtsc.eclipse.org/docs-tip/Runtime_Object_Viewer/">Runtime Object Viewer</a>.</p>
</div>
<div class="section" id="viewing-the-state-of-the-remote-core">
<h5>10.2.5.3.5.7. Viewing the State of the Remote Core<a class="headerlink" href="#viewing-the-state-of-the-remote-core" title="Permalink to this headline">¶</a></h5>
<p>Once attached and with symbols loaded, the state of the processor can be inspected. You can see the
program counter, memory windows, registers, call stack, and the ROV, among other things.</p>
</div>
</div>
<div class="section" id="debugging-mmu-faults-and-exceptions">
<h4>10.2.5.3.6. Debugging MMU Faults and Exceptions<a class="headerlink" href="#debugging-mmu-faults-and-exceptions" title="Permalink to this headline">¶</a></h4>
<p>Errors commonly manifest as MMU faults, exceptions, and watchdog errors (if using a version of IPC with
watchdog available and enabled).</p>
<div class="section" id="linux-and-android-disabling-error-recovery">
<h5>10.2.5.3.6.1. Linux and Android - Disabling Error Recovery<a class="headerlink" href="#linux-and-android-disabling-error-recovery" title="Permalink to this headline">¶</a></h5>
<p>To debug an error, it may be necessary to turn of error recovery. Error recovery can be disabled by giving
the following command:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">disabled</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">remoteproc</span><span class="o">/</span><span class="n">remoteprocX</span><span class="o">/</span><span class="n">recovery</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#linux-and-android-remoteproc">Linux and Android - Remoteproc</a> for more information.</p>
</div>
<div class="section" id="qnx-disabling-error-recovery">
<h5>10.2.5.3.6.2. QNX – Disabling Error Recovery<a class="headerlink" href="#qnx-disabling-error-recovery" title="Permalink to this headline">¶</a></h5>
<p>To disable error recovery on QNX using IPC version 3.22 and above, give the -d option when launching
the ipc binary. For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>ipc –d IPU2 dra7x-ipu2-fw.xem4
</pre></div>
</div>
</div>
<div class="section" id="crash-dump">
<h5>10.2.5.3.6.3. Crash Dump<a class="headerlink" href="#crash-dump" title="Permalink to this headline">¶</a></h5>
<p>If any of these three errors are encountered, you will get a crash dump from the remote core which is
visible in the remote core traces. If error recovery is disabled, the dump can be found in trace0 (when
using Linux/Android) or in /dev/ipc-trace/&lt;core_name&gt; (when using QNX); otherwise, the trace is found in
trace0_last (when using Linux/Android) and in the logfile (when using QNX).</p>
<p>An example of the crash dump will look like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">Exception</span> <span class="n">occurred</span> <span class="n">at</span> <span class="p">(</span><span class="n">PC</span><span class="p">)</span> <span class="o">=</span> <span class="mo">0000</span><span class="n">c976</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">CPU</span> <span class="nl">context</span><span class="p">:</span> <span class="kr">thread</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">BIOS</span> <span class="n">Task</span> <span class="nl">name</span><span class="p">:</span> <span class="p">{</span><span class="n">empty</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">name</span><span class="p">}</span> <span class="nl">handle</span><span class="p">:</span> <span class="mh">0x80060090</span><span class="p">.</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">BIOS</span> <span class="n">Task</span> <span class="n">stack</span> <span class="nl">base</span><span class="p">:</span> <span class="mh">0x800600e0</span><span class="p">.</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">BIOS</span> <span class="n">Task</span> <span class="n">stack</span> <span class="nl">size</span><span class="p">:</span> <span class="mh">0x800</span><span class="p">.</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="p">[</span><span class="n">t</span><span class="o">=</span><span class="mh">0x18f6df13</span><span class="p">]</span> <span class="n">ti</span><span class="p">.</span><span class="n">sysbios</span><span class="p">.</span><span class="n">family</span><span class="p">.</span><span class="n">arm</span><span class="p">.</span><span class="n">m3</span><span class="p">.</span><span class="nl">Hwi</span><span class="p">:</span> <span class="nl">ERROR</span><span class="p">:</span> <span class="n">line</span> <span class="mi">1078</span><span class="o">:</span> <span class="nl">E_hardFault</span><span class="p">:</span> <span class="n">FORCED</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">ti</span><span class="p">.</span><span class="n">sysbios</span><span class="p">.</span><span class="n">family</span><span class="p">.</span><span class="n">arm</span><span class="p">.</span><span class="n">m3</span><span class="p">.</span><span class="nl">Hwi</span><span class="p">:</span> <span class="n">line</span> <span class="mi">1078</span><span class="o">:</span> <span class="nl">E_hardFault</span><span class="p">:</span> <span class="n">FORCED</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="p">[</span><span class="n">t</span><span class="o">=</span><span class="mh">0x18f9a0cb</span><span class="p">]</span> <span class="n">ti</span><span class="p">.</span><span class="n">sysbios</span><span class="p">.</span><span class="n">family</span><span class="p">.</span><span class="n">arm</span><span class="p">.</span><span class="n">m3</span><span class="p">.</span><span class="nl">Hwi</span><span class="p">:</span> <span class="nl">ERROR</span><span class="p">:</span> <span class="n">line</span> <span class="mi">1155</span><span class="o">:</span> <span class="nl">E_busFault</span><span class="p">:</span> <span class="nl">PRECISERR</span><span class="p">:</span> <span class="n">Immediate</span> <span class="n">Bus</span> <span class="n">Fault</span><span class="p">,</span> <span class="n">exact</span> <span class="n">addr</span> <span class="n">known</span><span class="p">,</span> <span class="nl">address</span><span class="p">:</span> <span class="mi">96000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">ti</span><span class="p">.</span><span class="n">sysbios</span><span class="p">.</span><span class="n">family</span><span class="p">.</span><span class="n">arm</span><span class="p">.</span><span class="n">m3</span><span class="p">.</span><span class="nl">Hwi</span><span class="p">:</span> <span class="n">line</span> <span class="mi">1155</span><span class="o">:</span> <span class="nl">E_busFault</span><span class="p">:</span> <span class="nl">PRECISERR</span><span class="p">:</span> <span class="n">Immediate</span> <span class="n">Bus</span>

<span class="n">Fault</span><span class="p">,</span> <span class="n">exact</span> <span class="n">addr</span> <span class="n">known</span><span class="p">,</span> <span class="nl">address</span><span class="p">:</span> <span class="mi">96000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R0</span> <span class="o">=</span> <span class="mh">0x96000000</span> <span class="n">R8</span> <span class="o">=</span> <span class="mh">0xffffffff</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R1</span> <span class="o">=</span> <span class="mh">0x00000000</span> <span class="n">R9</span> <span class="o">=</span> <span class="mh">0xffffffff</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R2</span> <span class="o">=</span> <span class="mh">0x00000000</span> <span class="n">R10</span> <span class="o">=</span> <span class="mh">0xffffffff</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R3</span> <span class="o">=</span> <span class="mh">0x80060814</span> <span class="n">R11</span> <span class="o">=</span> <span class="mh">0xffffffff</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R4</span> <span class="o">=</span> <span class="mh">0x00013098</span> <span class="n">R12</span> <span class="o">=</span> <span class="mh">0x8006074c</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R5</span> <span class="o">=</span> <span class="mh">0x0000000a</span> <span class="n">SP</span><span class="p">(</span><span class="n">R13</span><span class="p">)</span> <span class="o">=</span> <span class="mh">0x80060820</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R6</span> <span class="o">=</span> <span class="mh">0xffffffff</span> <span class="n">LR</span><span class="p">(</span><span class="n">R14</span><span class="p">)</span> <span class="o">=</span> <span class="mh">0x0000c973</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">R7</span> <span class="o">=</span> <span class="mh">0xffffffff</span> <span class="n">PC</span><span class="p">(</span><span class="n">R15</span><span class="p">)</span> <span class="o">=</span> <span class="mh">0x0000c976</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">PSR</span> <span class="o">=</span> <span class="mh">0x61000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">ICSR</span> <span class="o">=</span> <span class="mh">0x00438803</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">MMFSR</span> <span class="o">=</span> <span class="mh">0x00</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">BFSR</span> <span class="o">=</span> <span class="mh">0x82</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">UFSR</span> <span class="o">=</span> <span class="mh">0x0000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">HFSR</span> <span class="o">=</span> <span class="mh">0x40000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">DFSR</span> <span class="o">=</span> <span class="mh">0x00000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">MMAR</span> <span class="o">=</span> <span class="mh">0x96000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">BFAR</span> <span class="o">=</span> <span class="mh">0x96000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">AFSR</span> <span class="o">=</span> <span class="mh">0x00000000</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">Stack</span> <span class="n">trace</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mo">00</span> <span class="p">[</span><span class="n">op</span> <span class="n">faaaf00e</span><span class="p">]</span> <span class="mo">00006</span><span class="n">abd</span> <span class="p">(</span><span class="n">ret</span> <span class="n">from</span> <span class="n">call</span> <span class="n">to</span> <span class="mo">00015010</span><span class="p">)</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mo">01</span> <span class="p">[</span><span class="n">op</span> <span class="n">ff49f005</span><span class="p">]</span> <span class="mo">00006</span><span class="n">ac3</span> <span class="p">(</span><span class="n">ret</span> <span class="n">from</span> <span class="n">call</span> <span class="n">to</span> <span class="mo">0000</span><span class="n">c954</span><span class="p">)</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="o">--</span> <span class="p">[</span><span class="n">op</span> <span class="mi">98009000</span><span class="p">]</span> <span class="mo">000154</span><span class="n">c9</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="o">--</span> <span class="p">[</span><span class="n">op</span> <span class="mo">00000000</span><span class="p">]</span> <span class="mo">000</span><span class="n">a0001</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="o">--</span> <span class="p">[</span><span class="n">op</span> <span class="mi">80084</span><span class="n">a64</span><span class="p">]</span> <span class="mf">0000f</span><span class="n">ec9</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="o">--</span> <span class="p">[</span><span class="n">op</span> <span class="mo">0001</span><span class="n">a75c</span><span class="p">]</span> <span class="mo">00006</span><span class="mi">8</span><span class="n">b9</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="o">--</span> <span class="p">[</span><span class="n">op</span> <span class="mi">80084</span><span class="n">a64</span><span class="p">]</span> <span class="mf">0000f</span><span class="n">ec9</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="o">--</span> <span class="p">[</span><span class="n">op</span> <span class="n">bd0ef919</span><span class="p">]</span> <span class="mo">00015</span><span class="n">b91</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">Stack</span> <span class="n">dump</span> <span class="n">base</span> <span class="mf">800600e0</span> <span class="n">size</span> <span class="mi">2048</span> <span class="n">sp</span> <span class="mi">80060820</span><span class="o">:</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mi">80060820</span><span class="o">:</span> <span class="mo">00000001</span> <span class="mo">00006</span><span class="n">abd</span> <span class="mi">96000000</span> <span class="mo">00000000</span> <span class="n">ffffffff</span> <span class="mo">00006</span><span class="n">ac3</span> <span class="mo">0000000</span><span class="n">a</span> <span class="mo">00006</span><span class="n">bf4</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mi">80060840</span><span class="o">:</span> <span class="mo">00000000</span> <span class="mo">00000000</span> <span class="mi">80041800</span> <span class="mi">80060</span><span class="n">ab0</span> <span class="mo">000000</span><span class="mi">80</span> <span class="mi">56414</span><span class="n">c53</span> <span class="mf">50495f</span><span class="mi">45</span> <span class="n">be003155</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mi">80060860</span><span class="o">:</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mi">80060880</span><span class="o">:</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="n">bebebebe</span> <span class="mo">00000000</span> <span class="mo">00000000</span> <span class="mo">00000001</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mi">800608</span><span class="nl">a0</span><span class="p">:</span> <span class="mo">00000001</span> <span class="mo">000154</span><span class="n">c9</span> <span class="mo">000130</span><span class="mi">9</span><span class="n">a</span> <span class="mo">0000000</span><span class="n">a</span> <span class="mo">00000000</span> <span class="mi">80041820</span> <span class="mo">00000001</span> <span class="n">ffffffff</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="mi">800608</span><span class="nl">c0</span><span class="p">:</span> <span class="n">ffffffff</span> <span class="mf">0000f</span><span class="n">ec9</span> <span class="mo">00000000</span> <span class="mo">00000000</span> <span class="mo">00006</span><span class="mi">8</span><span class="n">b9</span> <span class="mf">0000f</span><span class="n">ec9</span> <span class="mo">00015</span><span class="n">b91</span> <span class="n">bebebebe</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">91.045</span><span class="p">]</span> <span class="n">Terminating</span> <span class="n">execution</span><span class="p">...</span>
</pre></div>
</div>
</div>
<div class="section" id="exception-dump-decoding">
<h5>10.2.5.3.6.4. Exception Dump Decoding<a class="headerlink" href="#exception-dump-decoding" title="Permalink to this headline">¶</a></h5>
<p>Some useful information that can be found in the dump is the fault address, PC address, register contents, and call stack.</p>
<p>When an error occurs, you gets a crash dump from the remote core that looks similar to the one in <a class="reference internal" href="#crash-dump">Crash Dump</a>.</p>
<p>The particular dump example above is from a MMU read fault. This dump provides important information
in helping to understand what has happened. Some of the useful parts are broken down in the following
section.</p>
<p><strong>Timestamp</strong></p>
<p>All traces (not just exception dumps) provide a timestamp for each trace. The time starts from the booting
of the remote core.</p>
<blockquote>
<div><p>[0] <strong>[ 91.045]</strong> Exception occurred at (PC) = 0000c976</p>
<p>[0] <strong>[ 91.045]</strong> CPU context: thread</p>
<p>[0] <strong>[ 91.045]</strong> BIOS Task name: {empty-instance-name} handle: 0x80060090.</p>
</div></blockquote>
<p>The timestamp information can be useful even in non-crash situations, indicating the amount of time taken
between two events. You can add traces at each event and then see when the events run.</p>
<p>For example, to check that a certain event is happening every second, put a trace at that event, then
check the timestamps to see that it is happening as expected.</p>
<p><strong>PC Address</strong></p>
<p>The PC address where the exception occurred is also provided. This can be used, in
conjunction with the map file or CCS, to identify the line of code where the exception happened.</p>
<blockquote>
<div><p>[0] [ 91.045] <strong>Exception occurred at (PC) = 0000c976</strong></p>
<p>[0] [ 91.045] CPU context: thread</p>
<p>[0] [ 91.045] BIOS Task name: {empty-instance-name} handle: 0x80060090.</p>
</div></blockquote>
<p><strong>Task Information</strong></p>
<p>The information about the task that was executing when the exception occurred is also provided.</p>
<blockquote>
<div><p>[0] [ 91.045] Exception occurred at (PC) = 0000c976</p>
<p>[0] [ 91.045] CPU context: thread</p>
<p>[0] <strong>[ 91.045] BIOS Task name: {empty-instance-name} handle: 0x80060090.</strong></p>
<p>[0] <strong>[ 91.045] BIOS Task stack base: 0x800600e0.</strong></p>
<p>[0] <strong>[ 91.045] BIOS Task stack size: 0x800.</strong></p>
</div></blockquote>
<p><strong>Fault Information</strong></p>
<p>The information about the fault is also provided. This can look different depending on the
type of exception that occurred, but often provides a fault address to identify the source of the fault.</p>
<blockquote>
<div><p>[0] [ 91.045] Exception occurred at (PC) = 0000c976</p>
<p>[0] [ 91.045] CPU context: thread</p>
<p>[0] [ 91.045] BIOS Task name: {empty-instance-name} handle: 0x80060090.</p>
<p>[0] [ 91.045] BIOS Task stack base: 0x800600e0.</p>
<p>[0] [ 91.045] BIOS Task stack size: 0x800.</p>
<p>[0] [ 91.045] <strong>[t=0x18f6df13] ti.sysbios.family.arm.m3.Hwi: ERROR: line 1078: E_hardFault: FORCED</strong></p>
<p>[0] [ 91.045] <strong>ti.sysbios.family.arm.m3.Hwi: line 1078: E_hardFault: FORCED</strong></p>
<p>[0] [ 91.045] <strong>[t=0x18f9a0cb] ti.sysbios.family.arm.m3.Hwi: ERROR: line 1155: E_busFault: PRECISERR: Immediate Bus Fault, exact addr known, address: 96000000</strong></p>
<p>[0] [ 91.045] <strong>ti.sysbios.family.arm.m3.Hwi: line 1155: E_busFault: PRECISERR: Immediate Bus Fault, exact addr known, address: 96000000</strong></p>
</div></blockquote>
<p><strong>Registers</strong></p>
<p>A dump of the register contents at the time of the exception is also provided.</p>
<img alt="../_images/RegisterDump.PNG" src="../_images/RegisterDump.PNG" />
<p><strong>Stack Trace</strong></p>
<p>The stack trace is also provided (see Figure 6). This can be used in conjunction with the source code and
the map file or CCS to get more information about what was executing at the time of the crash.</p>
<img alt="../_images/StackTraceDump.PNG" src="../_images/StackTraceDump.PNG" />
</div>
<div class="section" id="mmu-faults">
<h5>10.2.5.3.6.5. MMU Faults<a class="headerlink" href="#mmu-faults" title="Permalink to this headline">¶</a></h5>
<p>MMU faults occur when an address that is not mapped to the remote core MMU is accessed. This can be
due to a read, write, or an attempt to execute the address. When an MMU fault occurs, a crash dump from
the remote core occurs that looks similar to the example provided in <a class="reference internal" href="#crash-dump">Crash Dump</a>.</p>
<p>Some debugging techniques, as well as common times when an MMU fault occurs, are given as
examples in the following sections.</p>
<p><strong>Using CCS to Halt the Code When the Fault Happens</strong></p>
<p>If the fault always happens at the same address, pre-map the location and then set up CCS with a
breakpoint for that address. In this way, you can view the state of the remote core when the fault happens
and see the call stack. From there, put a breakpoint at the surrounding code and step through to see
where the fault happens.</p>
<p>Pre-mapping the address can be done either through the remote core resource table, or through CCS.
With CCS, you can connect to the debug DAP and then bring up a memory window to inspect the MMU
registers. Directly program the MMU from here to map some unused memory to the fault address location.</p>
<p>For example:</p>
<ul class="simple">
<li><p>MMU CAM: 0x9600000E (Change the most significant 20 bits here to match the fault address. For example, it would be 96000 if the fault address is 0x96000010)</p></li>
<li><p>MMU RAM: 0xBA300000 (Change the most significant 20 bits here to match an unused 4-KB physical region in the memory map)</p></li>
<li><p>MMU Lock: 0x00000400</p></li>
<li><p>MMU LD: 0x00000001</p></li>
</ul>
<p><strong>Using the Crash Dump to Find the Location of the Fault</strong></p>
<p>The crash dump call stack can indicate where the crash occurred. Using that information, connect to the
remote core with CCS and put a breakpoint in the code at the most recent function in the call stack before
the crash. From there, step through the code until the crash happens.</p>
<p><strong>Example – Accessing a Memory Region That is Not Mapped</strong></p>
<p>When using the L2 MMU, every address accessed by the remote core must be mapped. An attempt to
access an un-mapped address results in an MMU fault. The following example explores the crash dump of
an access to an un-mapped area.</p>
<p>Here is an example fault dump:</p>
<img alt="../_images/StackTraceDump2.PNG" src="../_images/StackTraceDump2.PNG" />
<p>From the crash dump, the fault address is 0x96000000. The address will not be found in the resource
table, which is why the fault occurred.</p>
<p>Avoid hard-coding of virtual addresses for peripherals and memory blocks with a one-time physical to
virtual address lookup using the resource table. There is an API available for this called
Resource_physToVirt() in the resource module. This alerts that the address is not mapped in the resource
table when the translation fails.</p>
<p>From here, either use the crash dump to see the PC and call stack or follow the instructions under the section “Using CCS to Halt the Code When the Fault Happens.” Error recovery, watchdog timers, and remoteproc autosuspend
may need to be disabled to connect CCS. See <a class="reference internal" href="#linux-and-android-disabling-error-recovery">Linux and Android - Disabling Error Recovery</a>, <a class="reference internal" href="#linux-and-android-disabling-watchdog">Linux and Android – Disabling Watchdog</a>, and <a class="reference internal" href="#linux-and-android-disabling-remoteproc-auto-suspend">Linux and Android - Disabling Remoteproc Auto-Suspend</a> for more
information on disabling these.</p>
<p>For this example, use the PC address which, as seen in the crash dump, is at 0xcfa6</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">[</span> <span class="mf">107.092</span><span class="p">]</span> <span class="n">Exception</span> <span class="n">occurred</span> <span class="n">at</span> <span class="p">(</span><span class="n">PC</span><span class="p">)</span> <span class="o">=</span> <span class="mo">0000</span><span class="n">cfa6</span>
</pre></div>
</div>
<p>Find the corresponding function by looking this address up in the map file for the remote core image. If the
PC address is invalid due to an issue such as stack corruption, then this may not yield useful results. In
this case, something useful is found:</p>
<img alt="../_images/SourceInsightCrashDump.PNG" src="../_images/SourceInsightCrashDump.PNG" />
<p>Alternatively, use CCS to see the location of the fault. If CCS was already connected to the remote core
before the fault happened, the core will have halted in the abort function. From here, directly set the PC
address and see the line that caused the fault:</p>
<img alt="../_images/CCSFault.PNG" src="../_images/CCSFault.PNG" />
<p>Use this technique at any time after booting the remote core to see what a PC address corresponds to. It
will display the line that caused the error. This may, however, prevent proper execution because the
registers and call stack won’t have proper values.</p>
<p>You can now isolate the particular line in the fxnFault() function that was executing. That code is found in
the file &lt;ipc_package&gt;/packages/ti/ipc/tests/fault.c:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
        <span class="n">System_printf</span><span class="p">(</span><span class="s">&quot;Generating read MMU Fault...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="n">a</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="p">(</span><span class="mh">0x96000000</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
<p>Figure 8 clearly shows what caused the fault in this code, but when it is not clear, use CCS to see the fault in action. Once connected and the symbols are loaded, put a breakpoint in this function (if this function does not happen often). Once the breakpoint is hit, step through the code to find what is causing the fault.</p>
<p>Upon stepping through, observe that the variable, a, is being set to the contents of 0x96000000, which is
equal to the fault address. This is the fault in this example.</p>
<p>Next, decide if this is a valid value that needs mapping, or if this is an invalid value that passed due to
some error in the code. If it is still not known where the value is coming from, use CCS to trace it back
through the call stack to fix the code. If it turns out that the address is an address that must be accessible to the remote core, then map it through the resource table to the appropriate physical memory.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="evm-hardware-setup">
<h1>10.3. EVM Hardware Setup<a class="headerlink" href="#evm-hardware-setup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="am65x-evm">
<h2>10.3.1. AM65x EVM<a class="headerlink" href="#am65x-evm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="evm-layout-and-key-components">
<h3>10.3.1.1. EVM Layout and Key Components<a class="headerlink" href="#evm-layout-and-key-components" title="Permalink to this headline">¶</a></h3>
<p>Refer to the image below which highlights the key components available on the AM65x EVM.</p>
<img alt="../_images/AM65x_IDK_Diagram.png" src="../_images/AM65x_IDK_Diagram.png" />
<p>The complete feature set for the AM65x EVM is described in AM65x EVM User Manual. This section only provides description
of components that are required to complete basic EVM setup for debugging code using an emulator and Code Composer Studio.</p>
<div class="section" id="supported-jtag-debug-probes-emulators">
<h4>10.3.1.1.1. Supported JTAG Debug Probes (Emulators)<a class="headerlink" href="#supported-jtag-debug-probes-emulators" title="Permalink to this headline">¶</a></h4>
<p>The AM65x EVM includes a cTI20 JTAG connector for external emulators and a micro USB connector for the on-board XDS110 emulator.</p>
<p>For XDS110 connect a USB cable to the micro USB connector J23 on the front of the board.</p>
<p>For external XDS200, connect the emulator to the cTI20 pin connector.</p>
<p>For Lauterbach or emulators with MIPI60 or TI14 pin connector, an adapter must be used to connect the emulator.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not connect an XDS560 emulator to the J16 application board connector. This may damage the EVM and the emulator pod.</p>
</div>
<a class="reference internal image-reference" href="../_images/AM65x_JTAG.png"><img alt="../_images/AM65x_JTAG.png" src="../_images/AM65x_JTAG.png" style="width: 600px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>If you are using an external emulator pod, you must select which connector sources the clock. The AM65x EVM can support the MIPI60 or cTI20 connector. The JTAG select jumper must be set correctly to specify the clock source as either the MIPI60 or the cTI20 connector.</p>
<img alt="../_images/AM65x_Clock_Select.png" src="../_images/AM65x_Clock_Select.png" />
</div>
<div class="section" id="bootmode-switches">
<h4>10.3.1.1.2. BOOTMODE Switches<a class="headerlink" href="#bootmode-switches" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/AM65x_Boot_Modes.png" src="../_images/AM65x_Boot_Modes.png" />
<p><strong>MCU BOOTMODE shown:</strong></p>
<p>MCUBOOTMODE[8:0] – <strong>0000</strong> 10 <strong>011</strong></p>
<p>Values in bold are fixed with resistors.</p>
<p><strong>BOOTMODE shown:</strong></p>
<p>BOOTMODE[18:0] - 1111111000011110000</p>
<div class="section" id="recommended-boot-mode">
<h5>10.3.1.1.2.1. Recommended Boot Mode<a class="headerlink" href="#recommended-boot-mode" title="Permalink to this headline">¶</a></h5>
<p>BOOTMODE[18:0] = 000000000 0000000000  MCUBOOTMODE[8:0]= 000000011 (SLEEP BOOT)</p>
<dl class="simple">
<dt><strong>Boot Settings</strong></dt><dd><ul class="simple">
<li><p>SW2 – All switches OFF</p></li>
<li><p>SW3 – All switches OFF</p></li>
</ul>
</dd>
</dl>
<p>BOOTMODE[18:0] = 000000100 0000000110     MCUBOOTMODE[8:0]= 000000011 (SD BOOT)</p>
<img alt="../_images/AM65x_Boot_Switches.png" src="../_images/AM65x_Boot_Switches.png" />
<p>For full details on supported boot modes, please refer to the table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SW3.4</p></th>
<th class="head"><p>SW3.3</p></th>
<th class="head"><p>SW3.2</p></th>
<th class="head"><p>SW3.1</p></th>
<th class="head"><p>Primary Boot Device Selected</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>Sleep (No boot - debug mode)</p></td>
</tr>
<tr class="row-odd"><td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>OSPI</p></td>
</tr>
<tr class="row-even"><td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>QSPI</p></td>
</tr>
<tr class="row-odd"><td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>Hyperflash</p></td>
</tr>
<tr class="row-even"><td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>SPI (on QSPI/OSPI port 0 in legacy SPI mode)</p></td>
</tr>
<tr class="row-odd"><td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>I2C</p></td>
</tr>
<tr class="row-even"><td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>MMC/SD card, eMMC boot from UDA or file system</p></td>
</tr>
<tr class="row-odd"><td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>Ethernet</p></td>
</tr>
<tr class="row-even"><td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>USB</p></td>
</tr>
<tr class="row-odd"><td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>PCIe</p></td>
</tr>
<tr class="row-even"><td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>UART</p></td>
</tr>
<tr class="row-odd"><td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>GPMC XIP</p></td>
</tr>
<tr class="row-odd"><td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>eMMC boot from boot partition (with auto-fall back to file system)</p></td>
</tr>
<tr class="row-even"><td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
<td><p>Reserved (acts as no boot)</p></td>
</tr>
<tr class="row-odd"><td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
<td><p>Reserved (acts as no boot)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On the AM65x EVM, ensure that the PLL configuration is set to 25 MHz (see bolded line in table below).</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit 2</p></th>
<th class="head"><p>Bit 1</p></th>
<th class="head"><p>Bit 0</p></th>
<th class="head"><p>PLL REF CLK (MHz)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>Sleep (No boot - debug mode)</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>24</p></td>
</tr>
<tr class="row-odd"><td><p><strong>0</strong></p></td>
<td><p><strong>1</strong></p></td>
<td><p><strong>1</strong></p></td>
<td><p><strong>25</strong></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>26</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>27</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>No PLL Configuration Done (slow speed backup)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="uart-connection">
<h4>10.3.1.1.3. UART Connection<a class="headerlink" href="#uart-connection" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Connect a micro USB cable between UART port (J42) of the EVM and host PC.</p></li>
<li><p>Open a serial console (e.g. Tera Term) on host PC, connect to COM port on which SOC UART0 port is connected. Four COM ports should appear in the serial console application. Connect to the first COM port in the list.</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>First COM port – SoC MAIN UART0</p></li>
<li><p>Second COM port – MCU UART</p></li>
<li><p>Third COM port – Wakeup UART</p></li>
<li><p>Fourth COM port – SoC MAIN UART1</p></li>
</ul>
</div></blockquote>
<img alt="../_images/AM65x_Tera_Term.png" src="../_images/AM65x_Tera_Term.png" />
<ol class="arabic simple" start="3">
<li><p>Open a serial console (e.g Tera Term) on host PC, connect to COM port on which EVM UART port is connected and set the following configuration.</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Baud rate - 115200</p></li>
<li><p>Data length - 8 bit</p></li>
<li><p>Parity - None</p></li>
<li><p>Stop bits - 1</p></li>
<li><p>Flow control - None</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="powering-the-evm">
<h4>10.3.1.1.4. Powering the EVM<a class="headerlink" href="#powering-the-evm" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 30%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Connector</p></th>
<th class="head"><p>Specifications</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Power DIN, 4-pin</p></td>
<td><p>24VDC, 5A Output (Max)</p></td>
<td><p>CUI Inc.SDI120-24-U-P51</p></td>
</tr>
<tr class="row-odd"><td><p>Barrel Plug, 2.5mm I.D x 5.5mm
O.D x 9.55</p></td>
<td><p>12-24VDC, positive center,
2.71A Output (Max)</p></td>
<td><p>CUI Inc. SDI65-24UD-P6</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The DIN connector power supply is recommended to provide enough power for applications that make use of the PCIe interface.</p>
</div>
</div>
</div>
<div class="section" id="minimum-hardware-setup-required-to-connect-to-evm">
<h3>10.3.1.2. Minimum Hardware Setup Required to Connect to EVM<a class="headerlink" href="#minimum-hardware-setup-required-to-connect-to-evm" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Connect micro USB cable to J23 and connect USB to Host PC on which CCS is installed.</p></li>
<li><p>Connect micro USB cable to J42 for UART serial IO.</p></li>
<li><p>Set boot switches to “Sleep Boot” or “SD Boot” as described in the BOOT Switches section.</p></li>
<li><p>Connect power supply to DC jack and power on EVM.</p></li>
<li><p>Set switches and jumpers as indicated below.</p></li>
</ol>
</div></blockquote>
<dl class="simple">
<dt><strong>Boot Settings</strong></dt><dd><ul class="simple">
<li><p>SW2 - All switches OFF</p></li>
<li><p>SW3 - All switches OFF</p></li>
</ul>
</dd>
<dt><strong>Jumpers</strong></dt><dd><ul class="simple">
<li><p>J4 – Short all the pins</p></li>
<li><p>JP37 – Short pins 1 &amp; 2</p></li>
<li><p>J43 - Short pins 1 &amp; 2</p></li>
<li><p>J8 – Short pins 1 &amp; 2</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="am65x-debug-software-setup">
<h3>10.3.1.3. AM65x Debug Software Setup<a class="headerlink" href="#am65x-debug-software-setup" title="Permalink to this headline">¶</a></h3>
<p>The following software packages are required to setup the AM65x EVM</p>
<ul class="simple">
<li><p>Code Composer Studio IDE Environment</p></li>
<li><p>Processor SDK RTOS for AM65xx</p></li>
</ul>
<div class="section" id="ccs-host-setup">
<h4>10.3.1.3.1. CCS Host Setup<a class="headerlink" href="#ccs-host-setup" title="Permalink to this headline">¶</a></h4>
<p>1. Download CCS from the following link:
<a class="reference external" href="http://processors.wiki.ti.com/index.php/Download_CCS">http://processors.wiki.ti.com/index.php/Download_CCS</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check the <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_release_specific.html#release-notes">Processor SDK Release Notes</a> for the recommended CCS version.</p>
</div>
<p>Ensure that at least “Sitara AMx Processors” is selected:</p>
<blockquote>
<div><img alt="../_images/AM65x_CCS_Install.png" src="../_images/AM65x_CCS_Install.png" />
</div></blockquote>
<div class="section" id="install-the-latest-emulation-package-and-device-support-package">
<h5>10.3.1.3.1.1. Install the latest Emulation Package and Device Support Package<a class="headerlink" href="#install-the-latest-emulation-package-and-device-support-package" title="Permalink to this headline">¶</a></h5>
<p>1. In CCS, navigate to Help -&gt; Check for Updates and select “Sitara device support”
and “TI Emulators” and click Next.</p>
<blockquote>
<div><img alt="../_images/CCS_Check_for_Updates.PNG" src="../_images/CCS_Check_for_Updates.PNG" />
</div></blockquote>
<p>2. Click “Next” again, select “I accept the terms of the license agreements”
and click Finish to begin the installation.</p>
<blockquote>
<div><img alt="../_images/CCS_Updating_Software.png" src="../_images/CCS_Updating_Software.png" />
</div></blockquote>
<p>3. You may be prompted to restart CCS for the updates to take effect. Click “Restart Now” when
prompted to complete the installation.</p>
<p><strong>Disable Automatic Updates</strong></p>
<p>To disable automatic updates in CCS, navigate to Windows -&gt; Preferences -&gt; Install/Update -&gt; Automatic Updates, and uncheck “Automatically find new updates and notify me.”</p>
<p>This is a precautionary step to avoid automatic updates overwriting files updated through TI Emulation Updates for AM65x</p>
</div>
</div>
<div class="section" id="basic-ccs-setup">
<h4>10.3.1.3.2. Basic CCS Setup<a class="headerlink" href="#basic-ccs-setup" title="Permalink to this headline">¶</a></h4>
<p>The Basic CCS setup is similar to earlier Sitara devices which involves creation of target configuration and connecting
to cores using the GEL files. This step is suitable for new board bring up and getting hello world going on the AM65x cores.</p>
<p>Users can use this setup for benchmarking code on cores, test basic pin functionality or to run diagnostics. However, multi-core application developers
requiring resource management, power management or security services will require the advanced CCS setup in addition to the basic core setup.</p>
<p>We recommend that you follow the steps in basic setup and then migrate to the advanced SOC CCS setup for application development.</p>
<div class="section" id="creating-the-target-configuration">
<h5>10.3.1.3.2.1. Creating the Target Configuration<a class="headerlink" href="#creating-the-target-configuration" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>In CCS, open the Target Configurations window by navigating to View -&gt; Target Configurations.</p></li>
<li><p>In Target Configurations, right click and select “New Target Configuration.”</p></li>
<li><p>Populate the Target Configuration File name, set the location, and click Finish.</p></li>
</ol>
<blockquote>
<div><img alt="../_images/AM65x_Target_Configuration.png" src="../_images/AM65x_Target_Configuration.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Select “Texas Instruments XDS110 USB Debug Probe” for the Connection and “GPEVM_AM65x” for the Board or Device.</p></li>
</ol>
<blockquote>
<div><img alt="../_images/AM65x_Target_Configuration2.png" src="../_images/AM65x_Target_Configuration2.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The GEL files are automatically populated in the Target Configuration when selecting an EVM instead of an SOC. The SOC option is generally used for custom board bring up or secondary boot debugging.</p>
</div>
<ol class="arabic simple" start="5">
<li><p>Navigate to the “Advanced” tab to ensure the GEL files are populated in the “initialization script” field for the various cores.</p></li>
</ol>
<blockquote>
<div><img alt="../_images/AM65x_Target_Configuration3.png" src="../_images/AM65x_Target_Configuration3.png" />
</div></blockquote>
<p>The initialization script for the Cortex M3 will setup the MCU domain and Main domain PLL clocks, PSC registers, and bring the R5 and Cortex A53 cores out of reset.</p>
<p>The initialization script for the Cortex A53 and Cortex R5 will perform a similar step to setup the DDR clocks and initialize DDR from the cores if required.</p>
<ol class="arabic simple" start="6">
<li><p>Save the Target Configuration.</p></li>
</ol>
<blockquote>
<div><img alt="../_images/AM65x_Target_Configuration4.png" src="../_images/AM65x_Target_Configuration4.png" />
</div></blockquote>
</div>
<div class="section" id="connecting-to-the-cores-on-am65x">
<h5>10.3.1.3.2.2. Connecting to the Cores on AM65x<a class="headerlink" href="#connecting-to-the-cores-on-am65x" title="Permalink to this headline">¶</a></h5>
<p>1. <strong>Launch Target Configuration</strong>
In CCS Editor View, go to View -&gt; Target Configuration, and right click on the configuration that was created in the previous section and select “Launch Selected Configuration.”</p>
<ol class="arabic simple" start="2">
<li><p><strong>Connect to DMSC_Cortex_M3</strong></p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When connecting to the M3 core for the first time, you may be prompted with a firmware update. Please click “Update” to update the emulator firmware.</p>
</div>
<img alt="../_images/AM65x_FW_Update.png" src="../_images/AM65x_FW_Update.png" />
<p>On AM65x DMSC_Cortex_M3 is the boot master and is the first core that wakes up and starts the R5F ROM. Upon launching the target configuration, <strong>connect to DMSC_Cortex_M3 first</strong>, as this will automatically perform the PSC and PLL initialization. The following GEL output will appear in the CCS Console:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Configuring</span> <span class="n">AM65xEVM</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Init</span> <span class="n">value</span> <span class="n">actual</span> <span class="nl">value</span><span class="p">:</span> <span class="mh">0x00000888</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Register</span> <span class="nl">value</span><span class="p">:</span> <span class="mh">0x00000888</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ATCM</span> <span class="n">is</span> <span class="n">on</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ATCM</span> <span class="n">configured</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Assuming</span> <span class="n">execution</span> <span class="n">from</span> <span class="n">M3</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">This</span> <span class="n">script</span> <span class="n">sets</span> <span class="n">the</span> <span class="n">first</span> <span class="n">address</span> <span class="n">translation</span> <span class="n">region</span> <span class="n">to</span> <span class="p">[</span><span class="mh">0x8000</span><span class="n">_0000</span><span class="p">,</span> <span class="mh">0x0000</span><span class="n">_0000</span><span class="p">].</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">It</span> <span class="n">also</span> <span class="n">sets</span> <span class="n">the</span> <span class="n">second</span> <span class="n">address</span> <span class="n">translation</span> <span class="n">region</span> <span class="n">to</span>    <span class="p">[</span><span class="mh">0x6000</span><span class="n">_0000</span><span class="p">,</span> <span class="mh">0x4000</span><span class="n">_0000</span><span class="p">].</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">all</span> <span class="n">PLLs</span> <span class="n">in</span> <span class="n">progress</span><span class="p">.</span> <span class="n">This</span> <span class="n">may</span> <span class="n">take</span> <span class="n">some</span> <span class="n">time</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">0</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">10</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">20</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">30</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">40</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">50</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">60</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">70</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">80</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">90</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">all</span> <span class="n">PLLs</span> <span class="n">done</span><span class="o">!</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">power</span> <span class="n">domains</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP_COMMON</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_DMSC</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP2MCU</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP2MAIN_INFRA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_DEBUG2DMSC</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP_GPIO</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU2MAIN_INFRA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU2MAIN</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU2WKUP</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN2MCU</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_COMMON</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_TEST</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_MCAN_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_MCAN_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_OSPI_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_OSPI_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_HYPERBUS</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_DEBUG</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_R5_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_R5_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_INFRA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_TEST</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_PBIST</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_CC_TOP</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_CLUSTER_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span>  <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_CLUSTER_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_2</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_3</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_DEBUG</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_DSS</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MMC</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_CAL</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_PCIE_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_PCIE_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_USB_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_USB_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_SAUL</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_PER_COMMON</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_NB</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_SERDES_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_SERDES_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_ICSSG_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_ICSSG_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_ICSSG_2</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_GPU</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_EMIF_DATA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_EMIF_CFG</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">power</span> <span class="n">domains</span> <span class="n">done</span><span class="o">!</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>3. <strong>Connect to Cortex A53 or Cortex R5F</strong>
Users must now connect to either the Cortex A53 (CortexA53_0_0) or Cortex R5 (MCU_PULSAR_Cortex_R5_0). The following GEL output will appear in the CCS console when connecting to the Cortex A53:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">VTT</span> <span class="n">Regulator</span> <span class="n">Enabled</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">PHY</span> <span class="n">Init</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000000F</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">DRAM</span> <span class="n">Init</span> <span class="n">to</span> <span class="n">complete</span><span class="p">...</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DRAM</span> <span class="n">Init</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000001F</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">write</span> <span class="n">leveling</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">leveling</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000003F</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">checking</span> <span class="n">status</span> <span class="n">per</span> <span class="n">byte</span><span class="p">...</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX0GSR0</span> <span class="o">=</span> <span class="mh">0x00932420</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX1GSR0</span> <span class="o">=</span> <span class="mh">0x009224A0</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX2GSR0</span> <span class="o">=</span> <span class="mh">0x00992620</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX3GSR0</span> <span class="o">=</span> <span class="mh">0x009825A0</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Read</span> <span class="n">DQS</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Read</span> <span class="n">DQS</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000007F</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">checking</span> <span class="n">status</span> <span class="n">per</span> <span class="n">byte</span><span class="p">...</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX0RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX1RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX2RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX3RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Write</span> <span class="n">leveling</span> <span class="n">adjustment</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">leveling</span> <span class="n">adjustment</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800000FF</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Read</span> <span class="n">deskew</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Read</span> <span class="n">deskew</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800001FF</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Write</span> <span class="n">deskew</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">deskew</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800003FF</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Read</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Read</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800007FF</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Write</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x80000FFF</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">VREF</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">VREF</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x80004FFF</span>
<span class="nl">CortexA53_0_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>

<span class="o">====</span>

<span class="n">DDR4</span> <span class="n">Initialization</span> <span class="n">has</span> <span class="n">PASSED</span><span class="o">!!!!</span>

<span class="o">====</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The same GEL output will be shown if connecting to the Cortex R5 first instead of the Cortex A53.</p>
<ol class="arabic simple" start="4">
<li><p>The EVM is now completely initialized to load and run code on the cores and access the full device address range. User level software is responsible to configure the pin multiplexing and peripheral configuration.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="advanced-am65x-debug-setup-with-dmsc-firmware-load">
<h4>10.3.1.3.3. Advanced AM65x Debug Setup with DMSC Firmware Load<a class="headerlink" href="#advanced-am65x-debug-setup-with-dmsc-firmware-load" title="Permalink to this headline">¶</a></h4>
<p><strong>Description</strong></p>
<p>AM65x EVM users testing basic functionality like R5F and A53 bring up and DDR configuration can use the basic setup described in the previous section for setting up the EVM. However, advanced application level debug that uses resource management for UDMAs, interrupt setup, power management to setup clock modules, or wakeup/power of slave cores will require loading of SYSFW (DMSC Firmware) on the M3 core so that the application can make API calls to leverage its services.</p>
<p>To load the SYSFW firmware, the DMSC ROM expects R5F secondary bootloader/application to provide board configuration message to initialize the cores and SOC services. The R5F application provided in SciClient  uses a default board configuration message to the SYSFW and sets up the device for application debugging.</p>
<p>For more details, refer to the Initialization Chapter in the TRM and the SciClient User guide.</p>
<p><strong>Additional Software Dependency</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Processor SDK RTOS for AM65x</p></li>
</ul>
</div></blockquote>
<p>Users are required to install Processor SDK RTOS to obtain the SciClient component package before proceeding to the Next Step.</p>
<p>After installing Processor SDK RTOS, users should locate the latest R5F CCS init app, SYSFW binary, and the debug server script within the following directory:</p>
<p>${PDK_INSTALL_PATH}/packages/ti/drv/sciclient/tools/ccsLoadDmsc</p>
<p>The following files are provided as part for the SciClient tools:</p>
<blockquote>
<div><ul class="simple">
<li><p>launch_am65xx.js: CCS Debug Server script to perform on target connect and load DMSC firmware and R5F CCS Init app.</p></li>
</ul>
<p><strong>Location:</strong>: ${PDK_INSTALL_PATH}/packages/ti/drv/sciclient/tools/ccsLoadDmsc</p>
<ul class="simple">
<li><p>sciclient_ccs_init_mcu1_0_release.xer5f: R5F Application with default board config</p></li>
</ul>
<p><strong>Location:</strong>: ${PDK_INSTALL_PATH}/packages/ti/drv/sciclient/tools/ccsLoadDmsc/am65xx</p>
<ul class="simple">
<li><p>ti-sci-firmware-am6x-gp.bin: TISCI SYSFW binary loaded on the DMSC</p></li>
</ul>
<p><strong>Location:</strong>: ${PDK_INSTALL_PATH}/packages/ti/drv/sciclient/src/V0</p>
</div></blockquote>
<p>AM65x Advanced Debug Script Flow</p>
<img alt="../_images/AM65x_Advanced_Flow.png" src="../_images/AM65x_Advanced_Flow.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="creating-debug-configuration-to-integrate-ccs-gel-and-dmsc-firmware-initialization">
<h5>10.3.1.3.3.1. Creating Debug Configuration to Integrate CCS GEL and DMSC Firmware Initialization<a class="headerlink" href="#creating-debug-configuration-to-integrate-ccs-gel-and-dmsc-firmware-initialization" title="Permalink to this headline">¶</a></h5>
<p>With the intent to maintain the same CCS target connect flow as existing devices, we provide a Debug Server Script (DSS) that users can link to in their target configuration to allow for loading SYSFW firmware on the DMSC as part of the target connect process.</p>
<p>The DSS script allows users to perform all of the initialization using a single click. When the script is run, the following actions happens sequentially:</p>
<ol class="arabic simple">
<li><p>Running On Target Connect M3 existing GEL scripts.</p></li>
<li><p>Loading the DMSC firmware <code class="docutils literal notranslate"><span class="pre">*</span></code>.bin file to DMSC M3.</p></li>
<li><p>Run the R5F Init code which performs the board configuration initialization.</p></li>
</ol>
<p>At the end of the setup, the R5F and A53 are in a clean state to load code and debug the application with the SYSFW loaded on the M3 core.</p>
<p><strong>Steps to Link and Run the DSS Script for DMSC Firmware Loading</strong></p>
<ol class="arabic simple">
<li><p>Update the file “pdk/packages/ti/drv/sciclient/tools/ccsLoadDmsc/launch_am65xx.js” for the following variable to your PC location:</p></li>
</ol>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span>     <span class="c1">//&lt;!!!!!! EDIT THIS !!!!!&gt;</span>
     <span class="c1">// Set this to 1 to allow loading the GEL files directly from the ccxml file.</span>
     <span class="n">disableGelLoad</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">disableGelLoad</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
     <span class="p">{</span>
     <span class="c1">//Path to GEL files</span>
<span class="hll">     <span class="n">gelFilePath</span> <span class="o">=</span> <span class="s">&quot;C:/ti/ccsv8/ccs_base/emulation/gel/AM65xEVM&quot;</span><span class="p">;</span>
</span>     <span class="p">}</span>
     <span class="c1">// Path to the directory in which this file would be residing. CCS expects</span>
     <span class="c1">// absolute paths to load the binaries.</span>
<span class="hll">     <span class="n">thisJsFileDirectory</span> <span class="o">=</span> <span class="s">&quot;pdk/packages/ti/drv/sciclient/tools/ccsLoadDmsc&quot;</span><span class="p">;</span>
</span>     <span class="c1">//&lt;!!!!!! EDIT THIS !!!!!&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set disableGelLoad =1 if GEL files is linked to the cores in the target configuration file.</p></li>
<li><p>The variable “gelFilePath” doesn’t need to be updated if CCS is installed in the default C:/ti/ directory.</p></li>
<li><p>The variable “thisJsFileDirectory” needs to be updated to point to the PDK install directory.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Connect the Javascript to the CCXML file with the steps shown below.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step needs to be repeated if you switch workspaces or clean your workspace.</p>
</div>
<p>In the debug view after completing the basic CCS setup, Click on Debug Configurations from the button as show below:</p>
<img alt="../_images/CCS_Debug_Config.png" src="../_images/CCS_Debug_Config.png" />
<p>Select the CCXML file from the left-hand side and populate the path to the launch_am65xx.js file in the “Initialization Script” free form field and click on “Apply”.</p>
<img alt="../_images/CCS_Debug_XML.png" src="../_images/CCS_Debug_XML.png" />
<p>Once you Launch the CCXML file, the java script will automatically run and connect to R5F.</p>
<p><strong>Steps to re-run the script once ccxml is already launched:</strong></p>
<p>In the CCS window, navigate to “View → Scripting Console.”</p>
<p>In the CCS Scripting Console, type:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>  <span class="n">load</span> <span class="p">(</span><span class="s">&quot;&lt;Your Path&gt;</span><span class="se">\\</span><span class="s">launch_am65xx.js&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This would give the following output on the scripting console:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">js</span><span class="p">:</span><span class="o">&gt;</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">User</span><span class="se">\\</span><span class="s">Documents</span><span class="se">\\</span><span class="s">PDK</span><span class="se">\\</span><span class="s">pdk</span><span class="se">\\</span><span class="s">packages</span><span class="se">\\</span><span class="s">ti</span><span class="se">\\</span><span class="s">drv</span><span class="se">\\</span><span class="s">sciclient</span><span class="se">\\</span><span class="s">tools</span><span class="se">\\</span><span class="s">ccsLoadDmsc</span><span class="se">\\</span><span class="s">launch_am65xx.js&quot;</span><span class="p">)</span>
<span class="n">Connecting</span> <span class="n">to</span> <span class="n">DMSC_Cortex_M3_0</span><span class="o">!</span>
<span class="n">Loading</span> <span class="n">DMSC</span> <span class="n">Firmware</span><span class="p">...</span>
<span class="n">DMSC</span> <span class="n">Firmware</span> <span class="n">Load</span> <span class="n">Done</span><span class="p">...</span>
<span class="n">DMSC</span> <span class="n">Firmware</span> <span class="n">run</span> <span class="n">starting</span> <span class="n">now</span><span class="p">...</span>
<span class="n">Connecting</span> <span class="n">to</span> <span class="n">MCU</span> <span class="n">Cortex_R5_0</span><span class="o">!</span>
</pre></div>
</div>
<p>GEL Output Log:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Configuring</span> <span class="n">AM65xEVM</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Init</span> <span class="n">value</span> <span class="n">actual</span> <span class="nl">value</span><span class="p">:</span> <span class="mh">0x00000888</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Register</span> <span class="nl">value</span><span class="p">:</span> <span class="mh">0x00000888</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ATCM</span> <span class="n">is</span> <span class="n">on</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ATCM</span> <span class="n">configured</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Assuming</span> <span class="n">execution</span> <span class="n">from</span> <span class="n">M3</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">This</span> <span class="n">script</span> <span class="n">sets</span> <span class="n">the</span> <span class="n">first</span> <span class="n">address</span> <span class="n">translation</span> <span class="n">region</span> <span class="n">to</span> <span class="p">[</span><span class="mh">0x8000</span><span class="n">_0000</span><span class="p">,</span> <span class="mh">0x0000</span><span class="n">_0000</span><span class="p">].</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">It</span> <span class="n">also</span> <span class="n">sets</span> <span class="n">the</span> <span class="n">second</span> <span class="n">address</span> <span class="n">translation</span> <span class="n">region</span> <span class="n">to</span>    <span class="p">[</span><span class="mh">0x6000</span><span class="n">_0000</span><span class="p">,</span> <span class="mh">0x4000</span><span class="n">_0000</span><span class="p">].</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">all</span> <span class="n">PLLs</span> <span class="n">in</span> <span class="n">progress</span><span class="p">.</span> <span class="n">This</span> <span class="n">may</span> <span class="n">take</span> <span class="n">some</span> <span class="n">time</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">0</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">10</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">20</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">30</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">40</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">50</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">60</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">70</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">80</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="mi">90</span> <span class="n">Percent</span> <span class="n">Complete</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">all</span> <span class="n">PLLs</span> <span class="n">done</span><span class="o">!</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">power</span> <span class="n">domains</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP_COMMON</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_DMSC</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP2MCU</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP2MAIN_INFRA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_DEBUG2DMSC</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_WKUP_GPIO</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU2MAIN_INFRA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU2MAIN</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU2WKUP</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN2MCU</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_COMMON</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_TEST</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_MCAN_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_MCAN_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_OSPI_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_OSPI_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_HYPERBUS</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_DEBUG</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_R5_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MCU_R5_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_INFRA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_TEST</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_PBIST</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_CC_TOP</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_CLUSTER_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_CLUSTER_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_2</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_A53_3</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MAIN_DEBUG</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_DSS</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_MMC</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_CAL</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_PCIE_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_PCIE_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_USB_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_USB_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_SAUL</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_PER_COMMON</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_NB</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">No</span> <span class="n">change</span> <span class="n">needed</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_SERDES_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_SERDES_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_ICSSG_0</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_ICSSG_1</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_ICSSG_2</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_GPU</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_EMIF_DATA</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">LPSC_EMIF_CFG</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">domain</span> <span class="n">and</span> <span class="n">module</span> <span class="n">state</span> <span class="n">changed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nl">DMSC_Cortex_M3_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Powering</span> <span class="n">up</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">power</span> <span class="n">domains</span> <span class="n">done</span><span class="o">!</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">VTT</span> <span class="n">Regulator</span> <span class="n">Enabled</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">PHY</span> <span class="n">Init</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000000F</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">DRAM</span> <span class="n">Init</span> <span class="n">to</span> <span class="n">complete</span><span class="p">...</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DRAM</span> <span class="n">Init</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000001F</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">write</span> <span class="n">leveling</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">leveling</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000003F</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">checking</span> <span class="n">status</span> <span class="n">per</span> <span class="n">byte</span><span class="p">...</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX0GSR0</span> <span class="o">=</span> <span class="mh">0x00A728A0</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX1GSR0</span> <span class="o">=</span> <span class="mh">0x00AA2920</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX2GSR0</span> <span class="o">=</span> <span class="mh">0x00AB2920</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX3GSR0</span> <span class="o">=</span> <span class="mh">0x00AA2A20</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Read</span> <span class="n">DQS</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Read</span> <span class="n">DQS</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x8000007F</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">checking</span> <span class="n">status</span> <span class="n">per</span> <span class="n">byte</span><span class="p">...</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX0RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX1RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX2RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">DDRSS_DDRPHY_DX3RSR0</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Write</span> <span class="n">leveling</span> <span class="n">adjustment</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">leveling</span> <span class="n">adjustment</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800000FF</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Read</span> <span class="n">deskew</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Read</span> <span class="n">deskew</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800001FF</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Write</span> <span class="n">deskew</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">deskew</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800003FF</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Read</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Read</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x800007FF</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">Write</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Write</span> <span class="n">Eye</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x80000FFF</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">Waiting</span> <span class="k">for</span> <span class="n">VREF</span> <span class="n">training</span> <span class="n">to</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
<span class="n">VREF</span> <span class="n">training</span> <span class="n">complete</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDRSS_DDRPHY_PGSR0</span> <span class="o">=</span> <span class="mh">0x80004FFF</span>
<span class="nl">MCU_PULSAR_Cortex_R5_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>

<span class="o">====</span>

<span class="n">DDR4</span> <span class="n">Initialization</span> <span class="n">has</span> <span class="n">PASSED</span><span class="o">!!!!</span>

<span class="o">====</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="additional-notes-for-gel-users">
<h5>10.3.1.3.3.2. Additional Notes for GEL Users<a class="headerlink" href="#additional-notes-for-gel-users" title="Permalink to this headline">¶</a></h5>
<p><strong>R5F in Split Mode Configuration</strong></p>
<p>AM65x EVM ships with the dual Cortex R5F configured in lockstep mode. The AM65x EVM GEL file provides a GEL function “Change_MCUSS_to_SplitMode”
that can be added to OnTargetConnect or invoked from the DMSC_Cortex_M3 to set the dual R5F in split mode.</p>
<p><strong>Configuring PRU-ICSS in Sync Mode</strong></p>
<p>The PRU-ICSS subsystem can be configured to SYNC mode (250 Mhz) using the GEL function “PRU_ICSSG_SyncMode_250MHz” from Cortex A53 or R5F</p>
</div>
</div>
</div>
</div>
<div class="section" id="am572x-gp-evm-hardware-setup">
<h2>10.3.2. AM572x GP EVM Hardware Setup<a class="headerlink" href="#am572x-gp-evm-hardware-setup" title="Permalink to this headline">¶</a></h2>
<p class="rubric" id="id33">Description</p>
<p>The AM572x Evaluation Module provides an affordable platform to quickly
start evaluation of Sitara™ ARM® Cortex®-A15 AM57x Processors (AM5728,
AM5726, AM5718, AM5716) and accelerate development for HMI, machine
vision, networking, medical imaging and many other industrial
applications. It is a development platform based on the dual ARM
Cortex-A15, dual C66x DSP processor that is integrated with tons of
connectivity such as PCIe, SATA, HDMI, USB 3.0/2.0, Dual Gigabit
Ethernet, and more.</p>
<p>The AM572x Evaluation Module also integrates video and 3D/2D graphics
acceleration, as well as a qual-core Programmable Real-time Unit (PRU)
and dual ARM Cortex-M4 cores.</p>
<p class="rubric" id="contents-of-the-kit">Contents of the kit</p>
<img alt="../_images/EVM_modules.png" src="../_images/EVM_modules.png" />
<p><strong>Module:</strong></p>
<ul class="simple">
<li><p>Processor Module</p></li>
<li><p>LCD Module</p></li>
<li><p>Camera Module</p></li>
</ul>
<p><strong>Other components:</strong></p>
<ul class="simple">
<li><p>µSD card with Linux SDK</p></li>
<li><p>USB-to-serial debug cable</p></li>
<li><p>HDMI cable for optional external display</p></li>
<li><p>LCD brackets</p></li>
</ul>
<p><strong>Printed documentation:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ti.com/lit/ug/sprw275/sprw275.pdf">Quick start guide</a></p></li>
</ul>
<p class="rubric" id="id34">EVM Layout and Key Components</p>
<img alt="../_images/AM572X_GP_EVM_Overview.png" src="../_images/AM572X_GP_EVM_Overview.png" />
<p class="rubric" id="jtag-debug-probes-aka-emulators-supported">JTAG debug probes (aka Emulators) supported</p>
<p>List of standalone JTAG debug probes supported:</p>
<ul class="simple">
<li><p>XDS100-class JTAG debug probes (low cost, low performance). XDS100v1
is not supported.</p></li>
<li><p>XDS200-class JTAG debug probes (recommended)</p></li>
<li><p>XDS560v2-class JTAG debug probes (high performance)</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="host-drivers">Host Drivers</p>
<p>Download and install Virtual COM Port Drivers for TTL-232R-3V3 USB to
UART cable from the FTDI website:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ftdichip.com/Drivers/VCP.htm">VCP Drivers</a></p></li>
<li><p><a class="reference external" href="http://www.ftdichip.com/Products/Cables/USBTTLSerial.htm">TTL-232R-3V3
product</a></p></li>
</ul>
<p class="rubric" id="minimal-evm-setup">Minimal EVM setup</p>
<p class="rubric" id="setting-boot-switches">Setting boot switches</p>
<img alt="../_images/Boot_Switches.png" src="../_images/Boot_Switches.png" />
<p>Other Boot Pin configurations: <a class="reference external" href="http://processors.wiki.ti.com/AM572x_General_Purpose_EVM_HW_User_Guide#Boot_and_emulation_setup">GP EVM Boot
Options</a></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="connecting-emulator">Connecting Emulator</p>
<p><strong>Note: This EVM setup is only required for developers who need to
connect to cores using Code Composer studio to load application.</strong></p>
<p>The JTAG emulation pins for the EVM are on the back of the processor
module. User need to carefully unmount the processor module from the LCD
panel in order to get access to the JTAG pins.</p>
<p>Refer to the image below for how to safely separate the processor module
from the LCD panel.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="../_images/X15_PModule_disconnect.jpg" src="../_images/X15_PModule_disconnect.jpg" />
</td>
<td><img alt="../_images/JMI_0065.jpg" src="../_images/JMI_0065.jpg" />
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Image for how to connect the XDS200 Emulator to the 20 pin header is
shown below:</div>
</div>
<a class="reference internal image-reference" href="../_images/GPEVM_XDS200.jpg"><img alt="../_images/GPEVM_XDS200.jpg" src="../_images/GPEVM_XDS200.jpg" style="width: 426.0px; height: 320.0px;" /></a>
<p class="rubric" id="powering-up-the-evm">Powering up the EVM</p>
<p class="rubric" id="power-supply-specifications">Power Supply specifications</p>
<img alt="../_images/CUI_Isolated_Power_Supply.png" src="../_images/CUI_Isolated_Power_Supply.png" />
<p>Please note that a power supply is NOT included with the AM572x
Evaluation Module and needs to be purchased separately. A power supply
with the following specs is needed:</p>
<ul class="simple">
<li><p>12V DC output</p></li>
<li><p>5A output</p></li>
<li><p>Positive inner and negative outer terminals</p></li>
<li><p>Female barrel with 2.5mm inner diameter and 5.5mm outer diameter</p></li>
<li><p>Isolated power supply</p></li>
</ul>
<p class="rubric" id="pmic-auto-off-after-seven-seconds">PMIC auto-off after seven seconds</p>
<p>The Power Management Integrated Circuit (PMIC) on the TMDSEVM572X turns
off the board in seven seconds after power on to work around a hardware
errata. After seven seconds, the PMIC powers off unless software writes
to a PMIC register to keep it on.</p>
<p>In emulation setup, the GEL file will keep the PMIC on after you connect
to the A15 core on the SoC. While booting from ROM bootloader user
application software, would need to keep the PMIC ON while initializing
the board.</p>
<p>In Linux boot, the uboot code keeps the PMIC On and in the TI RTOS boot
scenario, the SBL component provides the same functionality</p>
<p><strong>NOTE</strong></p>
<ul class="simple">
<li><p>To allow quicker execution of the GEL before the PMIC shuts off, you
can increase the JTAG TCLK Frequency in Advance settings of your
target configuration to 15Mhz or to the maximum (20Mhz).</p></li>
<li><p>If the above CCS connect sequence does not work in the first attempt,
it means that the PMIC switched off before the GEL could initialize
I2C and modify the PMIC settings. In that case, the connection has
failed, hit connect in CCS debug view without removing the power
cable and then immediately hit the power switch besides the power
plug.</p></li>
</ul>
<p class="rubric" id="connect-power-to-the-evm">Connect Power to the EVM</p>
<img alt="../_images/Push_Power_EVM.png" src="../_images/Push_Power_EVM.png" />
<p class="rubric" id="ccs-setup">CCS Setup</p>
<p>There are two scenarios while connecting to the EVM :</p>
<ul class="simple">
<li><p><strong>Connect to EVM without a SD card boot image to boot the EVM</strong></p></li>
<li><p><strong>Connect to EVM after booting an image from the SD card</strong>.</p></li>
</ul>
<p class="rubric" id="connect-without-a-sd-card-boot-image">Connect without a SD card boot image</p>
<p class="rubric" id="configuring-target-configuration-files">Configuring target configuration files</p>
<p>Launch CCS and create new target configuration(File-&gt;New-&gt;Target
Configuration file) as shown in the images below and provide appropriate
name to the configuration. Select Spectrum digital XDS200 emulator and
target as GPEVM_AM572x_SiRevA.</p>
<p><strong>Note:</strong> For older revisions of CCSv6, If you don`t find the
GPEVM_AM572x_SiRevA target make sure you have installed the CCSv6
package with support for Sitara Processors and done the software update
correctly from the Help Menu to get the latest Sitara CSP package.</p>
<img alt="../_images/GPEVM_Target_configuration.jpg" src="../_images/GPEVM_Target_configuration.jpg" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In advance settings, make sure that the gel files are populated
correctly. The following GEL files and their corresponding cores are
provided below:</p>
<ul class="simple">
<li><p>IcePick_D: AM572x_ICEPickD_Utility.gel</p></li>
<li><p>CS_DAP_DebugSS: AM572x_dap_startup.gel</p></li>
<li><p>CS_DAP_PC: AM572x_CS_DAP_PC_Utility.gel</p></li>
<li><p>A15_0: AM572x_cortexa15_cpu0_startup.gel</p></li>
<li><p>A15_1: AM572x_cortexa15_cpu1_startup.gel</p></li>
<li><p>C66x_0: AM572x_dsp_startup.gel</p></li>
<li><p>C66x_1: AM572x_dsp_startup.gel</p></li>
<li><p>M4_IPU_1_C0: AM572x_cortexM4_startup.gel</p></li>
<li><p>M4_IPU_1_C1: AM572x_cortexM4_startup.gel</p></li>
<li><p>M4_IPU_2_C0: AM572x_cortexM4_startup.gel</p></li>
<li><p>M4_IPU_2_C1: AM572x_cortexM4_startup.gel</p></li>
<li><p>IVAHD: AM572x_ivahd_startup.gel</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="connecting-to-target">Connecting to target</p>
<p><strong>Step1 :</strong> Download Code composer Studio and AM572x Sitara CSP package
as described in the wiki article mentioned below:</p>
<p><a class="reference external" href="http://processors.wiki.ti.com/index.php/Processor_SDK_RTOS_Getting_Started_Guide#Code_Composer_Studio">Install Code composer Studio v6 for
AM572x</a></p>
<p><strong>Step2:</strong> AM572x EVM doesn`t have any boot switches to configure for
emulation mode. so configure the boot switches to SD Boot Mode. Dont
Populate the uSD card when the intent is to connect and load code over
emulator and not to boot the device using uSD card.</p>
<p><strong>Step3:</strong> Connect an XDS200 Emulator to emulation pins at the back of
the GP EVM as shown in
section.<a class="reference external" href="http://processors.wiki.ti.com/index.php/AM572x_GP_EVM_Hardware_Setup#Connecting_Emulator">Connecting_Emulator</a></p>
<p><strong>Step4:</strong> Launch CCS and create new target configuration as discussed
in the previous section.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Step5</strong>: Launch Target configuration you just created. AM572x is an
ARM master boot device so connect to the A15_0 first. It is also
recommended that you do a CPU reset from (Run-&gt;Reset-&gt;CPU Reset) Menu
on the A15 to put it in a clean state as the EVM is designed to come
up in SD boot mode.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Note: Keep in mind the PMIC shutdown issue discussed in previous
section while connecting to the target cores. Due to the PMIC shutdown
issue, users need to connect to A15_0 as soon as you push the power
button to enable power to the SoC.</strong></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Complete GEL log from A15 connect is provided below:</div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">IcePick_D</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">IVAHD</span> <span class="n">ICONT1</span> <span class="n">is</span> <span class="n">released</span> <span class="n">from</span> <span class="n">Wait</span><span class="o">-</span><span class="n">In</span><span class="o">-</span><span class="n">Reset</span><span class="p">.</span>
<span class="nl">IcePick_D</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">IVAHD</span> <span class="n">ICONT2</span> <span class="n">is</span> <span class="n">released</span> <span class="n">from</span> <span class="n">Wait</span><span class="o">-</span><span class="n">In</span><span class="o">-</span><span class="n">Reset</span><span class="p">.</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">CONFIGURE</span> <span class="n">DEBUG</span> <span class="n">DPLL</span> <span class="n">settings</span> <span class="n">to</span> <span class="mf">1.9</span> <span class="n">GHZs</span>  <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&gt;</span> <span class="n">Setup</span> <span class="n">DebugSS</span> <span class="mf">1.9</span><span class="n">GHz</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&lt;</span> <span class="n">Done</span> <span class="n">with</span> <span class="n">Setup</span> <span class="n">DebugSS</span> <span class="n">Trace</span> <span class="k">export</span> <span class="n">clock</span> <span class="p">(</span><span class="n">TPIU</span><span class="p">)</span> <span class="n">to</span> <span class="mi">97</span><span class="n">MHz</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&lt;</span> <span class="n">Done</span> <span class="n">with</span> <span class="n">Setup</span> <span class="n">DebugSS</span> <span class="n">PLL</span> <span class="n">Clocking</span> <span class="mf">1.9</span><span class="n">GHz</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&lt;</span> <span class="n">Done</span> <span class="n">with</span> <span class="n">Setup</span> <span class="n">DebugSS</span> <span class="n">ATB</span> <span class="n">Clocking</span> <span class="mi">380</span><span class="n">MHz</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&lt;</span> <span class="n">Done</span> <span class="n">with</span> <span class="n">Setup</span> <span class="n">DebugSS</span> <span class="n">Trace</span> <span class="k">export</span> <span class="n">clock</span> <span class="p">(</span><span class="n">TPIU</span><span class="p">)</span> <span class="n">to</span> <span class="mi">97</span><span class="n">MHz</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">TURNING</span> <span class="n">ON</span> <span class="n">L3_INSTR</span> <span class="n">and</span> <span class="n">L3_3</span> <span class="n">clocks</span> <span class="n">required</span> <span class="k">for</span> <span class="n">debug</span> <span class="n">instrumention</span> <span class="o">&lt;&lt;&lt;&lt;&lt;&lt;----</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&lt;&lt;&lt;</span> <span class="n">L3</span> <span class="n">instrumentation</span> <span class="n">clocks</span> <span class="n">are</span> <span class="n">enabled</span> <span class="o">&gt;&gt;&gt;&gt;</span> <span class="o">---</span>
<span class="nl">CS_DAP_DebugSS</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">Mapping</span> <span class="n">TIMER</span> <span class="n">supsend</span> <span class="n">sources</span> <span class="n">to</span> <span class="k">default</span> <span class="n">cores</span> <span class="o">&lt;&lt;&lt;&lt;&lt;&lt;----</span>
<span class="nl">CS_DAP_PC</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Cortex</span><span class="o">-</span><span class="n">A15</span> <span class="mi">1</span> <span class="n">is</span> <span class="n">not</span> <span class="n">in</span> <span class="n">WIR</span> <span class="n">mode</span> <span class="n">so</span> <span class="n">nothing</span> <span class="n">to</span> <span class="k">do</span><span class="p">.</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">GP</span> <span class="n">EVM</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">Target</span> <span class="n">Connect</span> <span class="n">Sequence</span> <span class="n">Begins</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">I2C</span> <span class="n">Init</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">Begin</span> <span class="n">MMC2</span> <span class="n">Pad</span> <span class="n">Configuration</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">End</span> <span class="n">MMC2</span> <span class="n">Pad</span> <span class="n">Configuration</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">PG2</span><span class="mf">.0</span> <span class="n">GP</span> <span class="n">device</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Clock</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">OPPNOM</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">Cortex</span> <span class="n">A15</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">Cortex</span> <span class="n">A15</span> <span class="n">DPLL</span> <span class="n">is</span> <span class="n">already</span> <span class="n">locked</span><span class="p">,</span> <span class="n">now</span> <span class="n">unlocking</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">Cortex</span> <span class="n">A15</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">IVA</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">IVA</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">already</span> <span class="n">locked</span><span class="p">,</span> <span class="n">now</span> <span class="n">unlocking</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">CORE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">CORE</span> <span class="n">DPLL</span> <span class="n">OPP</span>  <span class="n">already</span> <span class="n">locked</span><span class="p">,</span> <span class="n">now</span> <span class="n">unlocking</span><span class="p">....</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">CORE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">ABE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">ABE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GMAC</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GMAC</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GPU</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GPU</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DSP</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DSP</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PCIE_REF</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PCIE_REF</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Clock</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">all</span> <span class="n">modules</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">all</span> <span class="n">modules</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DDR3</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">clock</span> <span class="n">config</span> <span class="k">for</span> <span class="mi">532</span><span class="n">MHz</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">clock</span> <span class="n">config</span> <span class="k">for</span> <span class="mi">532</span><span class="n">MHz</span> <span class="n">is</span> <span class="n">in</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Launch</span> <span class="n">full</span> <span class="n">leveling</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Updating</span> <span class="n">slave</span> <span class="n">ratios</span> <span class="n">in</span> <span class="n">PHY_STATUSx</span> <span class="n">registers</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">as</span> <span class="n">per</span> <span class="n">HW</span> <span class="n">leveling</span> <span class="n">output</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">HW</span> <span class="n">leveling</span> <span class="n">is</span> <span class="n">now</span> <span class="n">disabled</span><span class="p">.</span> <span class="n">Using</span> <span class="n">slave</span> <span class="n">ratios</span> <span class="n">from</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">PHY_STATUSx</span> <span class="n">registers</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Launch</span> <span class="n">full</span> <span class="n">leveling</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Updating</span> <span class="n">slave</span> <span class="n">ratios</span> <span class="n">in</span> <span class="n">PHY_STATUSx</span> <span class="n">registers</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">as</span> <span class="n">per</span> <span class="n">HW</span> <span class="n">leveling</span> <span class="n">output</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">HW</span> <span class="n">leveling</span> <span class="n">is</span> <span class="n">now</span> <span class="n">disabled</span><span class="p">.</span> <span class="n">Using</span> <span class="n">slave</span> <span class="n">ratios</span> <span class="n">from</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">PHY_STATUSx</span> <span class="n">registers</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Two</span> <span class="n">EMIFs</span> <span class="n">in</span> <span class="n">interleaved</span> <span class="n">mode</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span><span class="n">GB</span> <span class="n">total</span><span class="p">)</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DDR3</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">Target</span> <span class="n">Connect</span> <span class="n">Sequence</span> <span class="n">DONE</span> <span class="o">!!!!!</span>  <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">IPU1SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">IPU1SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">IPU2SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">IPU2SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DSP1SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Clock</span> <span class="n">is</span> <span class="n">active</span> <span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Checking</span> <span class="k">for</span> <span class="n">data</span> <span class="n">integrity</span> <span class="n">in</span> <span class="n">DSPSS</span> <span class="n">L2RAM</span> <span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Data</span> <span class="n">integrity</span> <span class="n">check</span> <span class="n">in</span> <span class="n">GEM</span> <span class="n">L2RAM</span> <span class="n">is</span> <span class="n">sucessful</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DSP1SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&gt;&gt;</span> <span class="n">START</span> <span class="o">==&gt;</span> <span class="n">Enable</span> <span class="n">L3</span> <span class="n">Clk</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">&gt;&gt;</span> <span class="n">Change</span> <span class="n">Suspend</span> <span class="n">source</span> <span class="k">for</span> <span class="n">GPTimer5</span> <span class="n">to</span> <span class="n">DSP1</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DSP2SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Clock</span> <span class="n">is</span> <span class="n">active</span> <span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Checking</span> <span class="k">for</span> <span class="n">data</span> <span class="n">integrity</span> <span class="n">in</span> <span class="n">DSPSS</span> <span class="n">L2RAM</span> <span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Data</span> <span class="n">integrity</span> <span class="n">check</span> <span class="n">in</span> <span class="n">GEM</span> <span class="n">L2RAM</span> <span class="n">is</span> <span class="n">sucessful</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DSP2SS</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">IVAHD</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Clock</span> <span class="n">is</span> <span class="n">active</span> <span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">IVAHD</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRUSS</span> <span class="mi">1</span> <span class="n">and</span> <span class="mi">2</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRUSS</span> <span class="mi">1</span> <span class="n">and</span> <span class="mi">2</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">complete</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="multi-core-initialization">Multi-core Initialization</p>
<p>After connecting to the boot master core – typically the ARM core –
you may need to connect to a slave core in order to run code. Depending
on your SOC, the slave core can be</p>
<ul class="simple">
<li><p>DSP C66x</p></li>
<li><p>ARM M4</p></li>
<li><p>PRUSS</p></li>
<li><p>IVAHD</p></li>
</ul>
<p>Typically the slave cores will wait in reset state until the master core
wakes up the slave core to run code. To connect to the slave core on
AM57x, go to <strong>Scripts</strong> menu in CCS Debug View and under <strong>AM572x
MULTICORE Initialization</strong> enable the corresponding sub system clock.
For example, enable <code class="docutils literal notranslate"><span class="pre">DSP11SSClkEnable_API</span></code> for the first DSP core.
After running the clock enable option, you can connect to the core.</p>
<img alt="../_images/Multicore-Enable.jpg" src="../_images/Multicore-Enable.jpg" />
<p>If you wish to run TI RTOS code on DSP, please also run the <a class="reference external" href="http://processors.wiki.ti.com/index.php/AM572x_GP_EVM_Hardware_Setup#Timer_Suspend_Control_Options_for_DSP">Timer
Suspend Control
Options</a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="connect-after-booting-from-sd-card">Connect after booting from SD card</p>
<p>When you boot an image from the SD card, the secondary boot loader will
configure the device clocks, DDR and wake up the slave cores on the
AM572x processor on GP EVM hence you don`t need the GEL initialization
scripts to redo the clock and DDR settings.</p>
<p><strong>Note:</strong> If you are running the Image processing demo or have created
an SD card with the SBL (mlo) for booting the board then please follow
the following procedure</p>
<p class="rubric" id="configuring-target-configuration-files-1">Configuring target configuration files</p>
<p>Launch CCS and create new target configuration(File-&gt;New-&gt;Target
Configuration file) as shown in the images below and provide appropriate
name to the configuration. Select Spectrum digital XDS200 emulator and
target as AM5728_RevA. This target setting will not populate the GEL
files when you connect to the target</p>
<p><strong>Note:</strong> If you don`t find the AM572x_RevA target make sure you have
installed the CCSv6.1.1 package and done the software update correctly.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="../_images/COnfigure_targetConfigFiles_SDboot.png" src="../_images/COnfigure_targetConfigFiles_SDboot.png" />
<p class="rubric" id="gel-file-options">GEL file options</p>
<p class="rubric" id="changing-soc-operating-point">Changing SoC Operating point</p>
<p>The GEL file for setting the clocks on the SoC provides 3 Operating
points OPP_NOM, OPP_OD and OPP_HIGH.</p>
<p><strong>OPP_NOM PLL Settings:</strong></p>
<ul class="simple">
<li><p>ARM = 1000 MHz</p></li>
<li><p>DSP = 600 Mhz</p></li>
<li><p>IVA = 532 Mhz</p></li>
</ul>
<p><strong>OPP_OD PLL Settings:</strong></p>
<ul class="simple">
<li><p>ARM = 1176 MHz</p></li>
<li><p>DSP = 600 Mhz</p></li>
<li><p>IVA = 430 Mhz</p></li>
<li><p>GPU =500 Mhz</p></li>
</ul>
<p><strong>OPP_HIGH PLL Settings:</strong></p>
<ul class="simple">
<li><p>ARM = 1500 MHz</p></li>
<li><p>DSP = 700 Mhz</p></li>
<li><p>GPU = 425 Mhz</p></li>
<li><p>IVA = 388.3 Mhz</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="id35">Timer Suspend Control Options for DSP</p>
<p>On AM57xx devices, all the timers on the chip have their suspend control
signal routed to the A15 core. Which means that if any of the slave
cores are using these timers, the timers will continue to run even when
the slave core has been paused. The timer will only pause when the A15
core is halted.</p>
<p>This is confusing while debugging code on slave cores if you are relying
on timer for logging, inserting delays or if the timer keeps firing
interrupts even when the core is halted. One such scenario occurs with
<em>GPtimer5</em> when DSP developers are using SYS/BIOS. The OS uses
<em>GPtimer5</em> on the DSP and forces a frequency check to confirm the timer
configuration, however the OS can’t gain access to the timer due to the
hook up of the suspend control signals.</p>
<p>Due to this issue the SYS/BIOS developers will need to configure an
additional CCS configuration check to connect the GPTimer suspend
control signal to the DSP as shown in the image below:</p>
<img alt="../_images/GPtimer5_DSPConnect.png" src="../_images/GPtimer5_DSPConnect.png" />
<p class="rubric" id="other-how-to-options">Other How-To Options</p>
<p class="rubric" id="connecting-the-uart">Connecting the UART</p>
<p>Connecting FTDI cable to the 6 pin UART header for serial debug</p>
<a class="reference internal image-reference" href="../_images/GP_EVM_UART.jpg"><img alt="../_images/GP_EVM_UART.jpg" src="../_images/GP_EVM_UART.jpg" style="width: 667.5px; height: 444.5px;" /></a>
<p><strong>Note:</strong> Pin 1 corresponds to ground.</p>
<p>Connect the USB end to the host. If you connect to the EVM UART, use the
following host configuration setup in the serial terminal software
(Minicom, Teraterm, etc) Baud Rate: 115200 Data Bits: 8 Parity: None
Flow Control: Off</p>
<p class="rubric" id="connect-ethernet-cable-to-enable-network-connectivity">Connect Ethernet cable to enable Network Connectivity</p>
<p>For ethernet connectivity connect the ethernet cable to the top serial
port which is port 0 on the GP EVM.</p>
<a class="reference internal image-reference" href="../_images/AM572x_GP_EVM_Ethernet_connect.jpg"><img alt="../_images/AM572x_GP_EVM_Ethernet_connect.jpg" src="../_images/AM572x_GP_EVM_Ethernet_connect.jpg" style="width: 533.0px; height: 417.5px;" /></a>
<p>You can connect the other end of the cable directly to the host or
through a network switch based on the configuration required for your
test setup.</p>
</div>
<div class="section" id="tmdxidk5728-hardware-setup">
<h2>10.3.3. TMDXIDK5728 Hardware Setup<a class="headerlink" href="#tmdxidk5728-hardware-setup" title="Permalink to this headline">¶</a></h2>
<p class="rubric" id="id36">Description</p>
<p>The TMDXIDK5728 is a standalone test, development, and evaluation module
system that enables developers to write software and develop hardware
for industrial communication type applications. It has been equipped
with a TI AM572x processor and a defined set of features to allow the
user to experience industrial communication solutions using serial or
Ethernet based interfaces. Using standard interfaces, the IDK may
interface to other processors or systems and act as a communication
gateway in this case. In addition it can directly operate as a standard
remote I/O system or simple sensor connected to an industrial
communication network. The embedded emulation logic allows emulation and
debug using standard development tools such as TI’s Code Composer Studio
by just using the supplied USB cable.</p>
<p class="rubric" id="id37">EVM Layout and key components</p>
<img alt="../_images/AM572x_IDK_layout.png" src="../_images/AM572x_IDK_layout.png" />
<ul class="simple">
<li><p>PRU1ETH0 and PRU2ETH0 are not enabled by default</p></li>
</ul>
<p class="rubric" id="quick-start-guide">Quick Start Guide</p>
<p>This section talks about how to quickly setup the AM572x Industrial
Development Kit (IDK) EVM. This guide is a Beta version and it is
designed to help you through the initial setup of the EVM.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>1. Once you have received the TI-RTOS or Linux™ software from your TI
representative, create a bootable µSD card (using the included blank
µSD) and insert it into the EVM</strong></p></td>
</tr>
<tr class="row-even"><td><div class="thumb tleft"><div class="thumbinner" style="width:227px;"><div class="thumbcaption"><div class="magnify"><img alt="../_images/IDK_uSD.png" src="../_images/IDK_uSD.png" />
</td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>2. Connect the power cable to the power jack on the board and plug in
to an AC power source</strong></p></td>
</tr>
<tr class="row-even"><td><div class="thumb tleft"><div class="thumbinner" style="width:224px;"><div class="thumbcaption"><div class="magnify"><img alt="../_images/Power_cord_connect.png" src="../_images/Power_cord_connect.png" />
</td>
</tr>
</tbody>
</table>
<p>Note: When powering this IDK, always use the recommended power supply
(GlobTek Part Number TR9CA6500LCP-N, Model Number GT-43008-3306-1.0-T3)
or equivalent model having output voltage of +5VDC and output current
max 6.5 Amp as well as the applicable regional product regulatory/safety
certification requirements requirements such as (by example) UL, CSA,
VDE, CCC, PSE, etc.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>3. Connect the microUSB cable to USB JTAG/Console port on the EVM and
connect to the USB on the host. Connect Ethernet cable to GIG ETH0 if
Network connectivity is required</strong></p></td>
</tr>
<tr class="row-even"><td><div class="thumb tleft"><div class="thumbinner" style="width:225px;"><div class="thumbcaption"><div class="magnify"><img alt="../_images/JTAGUSB_UART.png" src="../_images/JTAGUSB_UART.png" />
</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The serial port will not show up on the host PC until you
power on the EVM.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>4. Select the power ON button to run power the IDK.</strong></p></td>
</tr>
<tr class="row-even"><td><div class="thumb tleft"><div class="thumbinner" style="width:226px;"><div class="thumbcaption"><div class="magnify"><img alt="../_images/PowerON.png" src="../_images/PowerON.png" />
</td>
</tr>
</tbody>
</table>
<p>After, you power on the EVM the Status, Industrial LED2, Industrial LED3
will turn on. If the microUSB cable is pluged in then the LED
corresponding to FTDI UARTtoUSB will be turned on.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td colspan="2"><p><strong>5.</strong> <strong>Users can now connect to UART and the on board XDS100 emulator
from the host machine.For UART port connections set the serial terminal
software Tera term/minicom/hyperterminal to baudrate 115200 to see log
messages. Connecting to target using emulator has been discussed in the
section below.</strong></p></td>
</tr>
<tr class="row-even"><td><div class="center"><div
class="thumb tnone"><div
class="thumbinner"
style="width:402px;"><img alt="../_images/Serial_connect.jpg" src="../_images/Serial_connect.jpg" />
<div
class="thumbcaption"><div class="magnify"></td>
<td><div class="center"><div
class="thumb tnone"><div
class="thumbinner"
style="width:302px;"><img alt="../_images/Baudrate.jpg" src="../_images/Baudrate.jpg" />
<div
class="thumbcaption"><div class="magnify"></td>
</tr>
</tbody>
</table>
<p class="rubric" id="connecting-idk-evm-to-code-composer-studio">Connecting IDK EVM to Code Composer Studio</p>
<p><strong>Step1 :</strong> Download Code composer Studio and AM572x Sitara CSP package
as described in the wiki article mentioned below:</p>
<p><a class="reference external" href="http://processors.wiki.ti.com/index.php/Processor_SDK_RTOS_Getting_Started_Guide#Code_Composer_Studio%7C">Install Code composer Studio for
AM572x</a></p>
<p><strong>Step2:</strong> Connect IDK EVM as described in the <a class="reference external" href="http://www.ti.com/lit/ml/sprw282a/sprw282a.pdf">Quick Start
Guide</a>. Populating
the uSD card is not required as the intent is to connect and load code
over emulator and not to boot the device using uSD card. AM572x IDK
doesn`t have any boot switches to configure for emulation mode.</p>
<p><strong>Step3:</strong> Launch CCS and create new target
configuration(File-&gt;New-&gt;Target Configuration file) as shown in the
images below and provide appropriate name to the configuration. Select
Texas Instuments XDS100v2 emulator and target as IDK_AM572x.</p>
<div
style="margin: 5px; padding: 2px 10px; background-color: #ecffff; border-left: 5px solid #3399ff;"><p><strong>NOTE</strong>
If you don`t find the IDK_AM572x target make sure you have installed
the Sitara Device support version 1.3.x package correctly</p>
</div><img alt="../_images/Target_configuration.png" src="../_images/Target_configuration.png" />
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Step4:</strong> In advance settings, Make sure that the corresponding IDK
GEL file are populated for all the cores. The following GEL files and
their corresponding cores are provided below:</div>
</div>
<ul class="simple">
<li><p>Cortex_A15_0:
....\emulation\boards\am572x\gel\idk_am572x.gel</p></li>
<li><p>C66x_DSP1:
....\emulation\boards\am572x\gel\AM572x_dsp_startup.gel</p></li>
<li><p>Cortex_M4_IPU1_C0:
....\emulation\boards\am572x\gel\AM572x_cortexM4_startup.gel</p></li>
</ul>
<p>Note: GEL files are located under
ccsv6\ccs_base\emulation\boards\am572x\gel after the CSP package
is installed</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Step5</strong>: Launch Target configuration you just created. AM572x is an
ARM master boot device so connect to the A15_0 first. It is also
recommended that you do a CPU reset from (Run-&gt;Reset-&gt;CPU Reset) Menu
on the A15 to put it in a clean state as the IDK is designed to come
up in SD boot mode.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Complete GEL log from A15 connect is provided below:</div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">Target</span> <span class="n">Connect</span> <span class="n">Sequence</span> <span class="n">Begins</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">Begin</span> <span class="n">MMC2</span> <span class="n">Pad</span> <span class="n">Configuration</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">End</span> <span class="n">MMC2</span> <span class="n">Pad</span> <span class="n">Configuration</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">PG1</span><span class="mf">.1</span> <span class="n">GP</span> <span class="n">device</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">I2C</span> <span class="n">Init</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Clock</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">OPPNOM</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">Cortex</span> <span class="n">A15</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">Cortex</span> <span class="n">A15</span> <span class="n">DPLL</span> <span class="n">is</span> <span class="n">already</span> <span class="n">locked</span><span class="p">,</span> <span class="n">now</span> <span class="n">unlocking</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">Cortex</span> <span class="n">A15</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">IVA</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">IVA</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">already</span> <span class="n">locked</span><span class="p">,</span> <span class="n">now</span> <span class="n">unlocking</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">CORE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">CORE</span> <span class="n">DPLL</span> <span class="n">OPP</span>  <span class="n">already</span> <span class="n">locked</span><span class="p">,</span> <span class="n">now</span> <span class="n">unlocking</span><span class="p">....</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">CORE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">ABE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">ABE</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GMAC</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GMAC</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GPU</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">GPU</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DSP</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DSP</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PCIE_REF</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">clock</span> <span class="n">config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">PCIE_REF</span> <span class="n">DPLL</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Clock</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">OPP</span> <span class="mi">0</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">all</span> <span class="n">modules</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">PRCM</span> <span class="n">Configuration</span> <span class="k">for</span> <span class="n">all</span> <span class="n">modules</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DDR3</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">...</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">clock</span> <span class="n">config</span> <span class="k">for</span> <span class="mi">532</span><span class="n">MHz</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>    <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">clock</span> <span class="n">config</span> <span class="k">for</span> <span class="mi">532</span><span class="n">MHz</span> <span class="n">is</span> <span class="n">in</span> <span class="n">DONE</span><span class="o">!</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Overall</span> <span class="n">DDR</span> <span class="n">configuration</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">EMIF1</span> <span class="n">and</span> <span class="n">EMIF1</span> <span class="n">DDR</span> <span class="n">IOs</span> <span class="n">config</span> <span class="p">(</span><span class="n">CTRL_MODULE_CORE_PAD</span> <span class="n">module</span><span class="p">)</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">config</span> <span class="p">(</span><span class="n">CTRL_MODULE_WKUP</span> <span class="n">module</span><span class="p">)</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">EMIF1</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="n">associated</span> <span class="n">DDR</span> <span class="n">PHYs</span> <span class="n">initial</span> <span class="n">config</span> <span class="p">(</span><span class="n">EMIF1</span> <span class="n">module</span><span class="p">)</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">EMIF1</span> <span class="n">channel</span> <span class="o">-</span> <span class="n">Launch</span> <span class="n">full</span> <span class="n">levelling</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">EMIF2</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="n">associated</span> <span class="n">DDR</span> <span class="n">PHYs</span> <span class="n">initial</span> <span class="n">config</span> <span class="p">(</span><span class="n">EMIF2</span> <span class="n">module</span><span class="p">)</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">EMIF1</span> <span class="n">channel</span> <span class="o">-</span> <span class="n">Launch</span> <span class="n">full</span> <span class="n">levelling</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">DEBUG</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">LISA</span> <span class="n">maps</span> <span class="n">in</span> <span class="n">non</span><span class="o">-</span><span class="n">interleaved</span> <span class="n">dual</span><span class="o">-</span><span class="n">EMIF</span> <span class="n">mode</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">DDR3</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">DONE</span><span class="o">!</span> <span class="o">&lt;&lt;&lt;---</span>
<span class="nl">CortexA15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">---&gt;&gt;&gt;</span> <span class="n">AM572x</span> <span class="n">Target</span> <span class="n">Connect</span> <span class="n">Sequence</span> <span class="n">DONE</span> <span class="o">!!!!!</span>  <span class="o">&lt;&lt;&lt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Step6</strong> : To connect to the DSP, M4,PRUSS or to IVAHD go to Scripts
menu and under AM572x MULTICORE Initialization enable the corresponding
Sub system clock Enable API.For Eg. FOr DSP1 select
DSP11SSClkEnable_API. After running the clock enable option, you can
connect to the core.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="../_images/Multicore-Enable.jpg" src="../_images/Multicore-Enable.jpg" />
<p class="rubric" id="related-links">Related Links</p>
<p><a class="reference external" href="http://www.ti.com/lit/ug/sprui64a/sprui64a.pdf">AM572x_Industrial_EVM_Hardware_Users_Guide</a></p>
</div>
<div class="section" id="ak2gx-gp-evm-hardware-setup">
<h2>10.3.4. 66AK2GX GP EVM Hardware Setup<a class="headerlink" href="#ak2gx-gp-evm-hardware-setup" title="Permalink to this headline">¶</a></h2>
<p class="rubric" id="id38">Description</p>
<p>The EVMK2G is a high performance, cost-efficient, standalone development
platform that enables users to evaluate and develop applications for the
Texas Instrument’s Keystone2 System-on-Chip (SoC) 66AK2GX. The Key
features of EVM are:</p>
<p><strong>Processor and controller</strong></p>
<ul class="simple">
<li><p>K2G SoC 66AK2GX is based on keystone II architecture with ARM cortex
A15 &#64;600MHz and C66x DSP &#64;600MHz</p></li>
<li><p>Board Management Controller (BMC) for board management functions like
system status and Boot mode control</p></li>
</ul>
<p><strong>Volatile and non volatile Memory/Interfaces:</strong></p>
<ul class="simple">
<li><p>2GByte of DDR3L with ECC</p></li>
<li><p>2Gbit of NAND Flash</p></li>
<li><p>128Mbit of SPI Flash</p></li>
<li><p>512Mbit of QSPI Flash</p></li>
<li><p>128kByte of I2C EEPROM for Boot support from I2C</p></li>
<li><p>Micro SD-Card slot</p></li>
<li><p>16GByte of eMMC</p></li>
</ul>
<p><strong>High speed and Serial Interfaces</strong></p>
<ul class="simple">
<li><p>Gigabit Ethernet port supporting 10/100/1000 Mbps data rate on RJ45
connector</p></li>
<li><p>PCIe x1 card slot</p></li>
<li><p>COM8 interface</p></li>
<li><p>DCAN and MLB interfaces</p></li>
<li><p>One USB2.0 host and one USB2.0 Dual-role ports</p></li>
<li><p>One RS232 serial interface on DB9 connector or UART over mini-USB
connector, One UART interface on 6 pin header</p></li>
</ul>
<p><strong>Multimedia and display:</strong></p>
<ul class="simple">
<li><p>4.3” LCD display with Capacitive touch (Sold separately)</p></li>
<li><p>HDMI transmitter</p></li>
<li><p>Audio Line In and Line Out</p></li>
</ul>
<p><strong>JTAG and Emulation:</strong></p>
<ul class="simple">
<li><p>MIPI 60-Pin JTAG header to support all types of external emulator</p></li>
<li><p>On Board XDS200 Emulator</p></li>
<li><p>Powered by DC power-wall adaptor (12V/5A)</p></li>
</ul>
<p class="rubric" id="id39">EVM Layout and Key Components</p>
<img alt="../_images/TI_K2GEVM.png" src="../_images/TI_K2GEVM.png" />
<p class="rubric" id="id40">JTAG debug probes (aka Emulators) supported</p>
<p>List of standalone JTAG debug probes supported:</p>
<ul class="simple">
<li><p>XDS100-class JTAG debug probes (low cost, low performance). XDS100v1
is not supported.</p></li>
<li><p>XDS200-class JTAG debug probes (recommended)</p></li>
<li><p>XDS560v2-class JTAG debug probes (high performance)</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="id41">Minimal EVM setup</p>
<p class="rubric" id="id42"><span id="settingbootswitches"></span>Setting boot switches</p>
<p>The DIP Switch /Boot mode switch (SW3) is used for selecting the boot
mode.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>For EVM Out of box experience uses SD/MMC boot as shown in the
image</strong>:</div>
</div>
<img alt="../_images/Boot_switch_SDboot.jpg" src="../_images/Boot_switch_SDboot.jpg" />
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>For Debugging over emulator use “No Boot/Sleep” Setting as shown
below</strong>:</div>
</div>
<a class="reference internal image-reference" href="../_images/Boot_Switch_NoBoot.jpg"><img alt="../_images/Boot_Switch_NoBoot.jpg" src="../_images/Boot_Switch_NoBoot.jpg" style="width: 500.5px; height: 266.5px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">The table below provides the list of all the boot modes supported on
the GP EVM</div>
</div>
<p><strong>Note: Read the PCB marking around the boot switch for your EVM to
interpret of ON and OFF marking on the switch</strong></p>
<ul class="simple">
<li><p>For Rev C K2G02 GP EVM: ON = ‘0’ and OFF = ‘1’</p></li>
<li><p>For Rev C/Rev D K2G12 GP EVM: ON = ‘1’ and OFF = ‘0’</p></li>
</ul>
<p>Other Boot Pin configurations:</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 42%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SW3[4:1]</p></th>
<th class="head"><p>BOOT MODE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0000 (0x0)</p></td>
<td><p>Sleep/No Boot</p></td>
</tr>
<tr class="row-odd"><td><p>0001 (0x1)</p></td>
<td><p>PCIe boot</p></td>
</tr>
<tr class="row-even"><td><p>0010 (0x2)</p></td>
<td><p>Ethernet Boot</p></td>
</tr>
<tr class="row-odd"><td><p>0011 (0x3)</p></td>
<td><p>I2C PLL Boot</p></td>
</tr>
<tr class="row-even"><td><p>0100 (0x4)</p></td>
<td><p>SPI No PLL Boot</p></td>
</tr>
<tr class="row-odd"><td><p>0101 (0x5)</p></td>
<td><p>SPI PLL-1 Boot</p></td>
</tr>
<tr class="row-even"><td><p>0110 (0x6)</p></td>
<td><p>USB Boot</p></td>
</tr>
<tr class="row-odd"><td><p>0111 (0x7)</p></td>
<td><p>MMC/SD Boot</p></td>
</tr>
<tr class="row-even"><td><p>1000 (0x8)</p></td>
<td><p>UART Boot</p></td>
</tr>
<tr class="row-odd"><td><p>1001 (0x9)</p></td>
<td><p>QSPI 96 Boot</p></td>
</tr>
<tr class="row-even"><td><p>1010 (0xa)</p></td>
<td><p>eMMC Boot</p></td>
</tr>
<tr class="row-odd"><td><p>1011 (0xb)</p></td>
<td><p>NAND Boot</p></td>
</tr>
<tr class="row-even"><td><p>1100 (0xc)</p></td>
<td><p>I2C No PLL Boot</p></td>
</tr>
<tr class="row-odd"><td><p>1101 (0xd)</p></td>
<td><p>SPI PLL-2 Boot</p></td>
</tr>
<tr class="row-even"><td><p>1110 (0xe)</p></td>
<td><p>SPI PLL-3 Boot</p></td>
</tr>
<tr class="row-odd"><td><p>1111 (0xf)</p></td>
<td><p>QSPI 48 Boot</p></td>
</tr>
</tbody>
</table>
<p class="rubric" id="id43"><span id="connectingemulator"></span>Connecting Emulator</p>
<p><strong>Note: This EVM setup is only required for developers who need to
connect to cores using Code Composer studio to load application.</strong></p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">The EVM supports two types of Emulation - “On-Board-XDS200 emulator”
and “60-pin MIPI Header”</div>
</div>
<p>When external emulator is not connected to MIPI 60-pin connector,
On-board XDS200 embedded JTAG emulator is the default type of emulation
(SoC JTAG signals are routed to XDS200 on-board emulator). When external
emulator is connected to MIPI 60-pin header, it is automatically
detected and SoC JTAG signals are routed to external emulator.</p>
<p><strong>On Board XDS200 emulator</strong></p>
<p>EVMK2G has on-board XDS200 embedded JTAG emulation circuitry. Hence user
does not require any external emulator to connect EVM with Code Composer
Studio (CCS). User can connect target SoC in EVM to CCS through USB
cable supplied in the EVM kit.</p>
<p>Use the USB to USB mini-B cable provided. Connect the USB mini-B
connector to the USB mini-B interface near to the audio line in on the
EVM, and the USB connector to your PC. This enables XDS-2xx emulation
and is directly useable by CCS.</p>
<img alt="../_images/XDS200_connect.png" src="../_images/XDS200_connect.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div
style="margin: 5px; padding: 2px 10px; background-color: #ecffff; border-left: 5px solid #3399ff;"><p><strong>NOTE</strong>
On Rev C boards and earlier revisions of the board, users who plan to
connect the USB cable to USB 3.0 cable need to follow the instructions
to update Emulation firmware using steps described in the article
<a class="reference external" href="http://dev.ti.com/tirex/explore/node?node=AADzJ8Y-La4f7Bi5Ga0TcA__FUz-xrs__LATEST">Updating_the_XDS200_firmware</a>
Without the firmware update, users are recommended to disconnect the
mini USB cable from the XDS USB connector before powering up the EVM and
reconnect after board power up is complete.</p>
</div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>MIPI 60-pin header for connecting External emulator</strong></div>
</div>
<p>If you are using a different JTAG, you can connect it at MIPI60
connector (EMU1). The MIPI 60-pin JTAG header is provided on-board for
high speed real-time emulation. All JTAG and EMUxx signals are
terminated on MIPI 60-pin header.</p>
<p>No emulation firmware upgrade is required if users plan to use an
external emulator The MIPI 60-pin JTAG header supports all standard
(XDS510 or XDS560) TI DSP emulators. Please refer to the documentation
supplied with your emulator for connection assistance.</p>
<p class="rubric" id="id44">Powering up the EVM</p>
<p class="rubric" id="id45">Power Supply specifications</p>
<p>The EVMK2G can be powered from a single +12V / 5.0A DC (60W) external
power supply connected to the DC power jack (J3). Internally, +12V input
is converted into required voltage levels using local DC-DC converters</p>
<p>Please note that a power supply is included with the 66AK2GX Evaluation
Module. The power supply has the following specs :</p>
<ul class="simple">
<li><p>12V DC output</p></li>
<li><p>5A output</p></li>
<li><p>Positive inner and negative outer terminals</p></li>
<li><p>Female barrel with 2.5mm inner diameter and 5.5mm outer diameter</p></li>
<li><p>Isolated power supply</p></li>
</ul>
<p class="rubric" id="id46">CCS Setup</p>
<p>This section describes the setup to connect to 66AK2GX GP EVM using
Code composer Studio environment and an emulator.</p>
<p>There are two scenarios while connecting to the EVM :</p>
<ul class="simple">
<li><p><strong>Connect to EVM without a SD card boot image to boot the EVM</strong></p></li>
<li><p><strong>Connect to EVM after booting an image from the SD card</strong>.</p></li>
</ul>
<p>Before discussing both these scenarios, let us look at how to pull in
the latest KeystoneII device support in CCSv6</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="update-ccs-v6-to-install-keystone-ii-device-support-package">Update CCS v6 to install Keystone II device Support package</p>
<p>All revisions of the board require this step to be performed in order to
get the latest GEL files and the target content for the K2G. This step
will not be required for CCS versions higher than version 6.1.3.
CCSv6.1.3 package contain KeystoneII device support package v1.1.4 which
doesn`t contain 66AK2GX GPEVM specific target files hence we recommend
this update.</p>
<p><strong>Step 1</strong> All CCS v6.1.3 and earlier version users are required to
update the Keystone Device Support package by going into the Help-&gt;Check
For Updates</p>
<img alt="../_images/Check_for_Updates.png" src="../_images/Check_for_Updates.png" />
<p><strong>Step 2</strong> Select Keystone2 device support package. Follow menu options
to continue with the update</p>
<p><strong>Step 3</strong> After the update is complete go to Help-&gt;Installation details
and check that Keystone2 device support package v1.1.5 or later are
installed as shown below</p>
<img alt="../_images/KeystoneII_device_support_package.png" src="../_images/KeystoneII_device_support_package.png" />
<p><strong>Note:</strong> The package can be downloaded separately from the link below
and manually unzipped into CCSv6 installation.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://processors.wiki.ti.com/index.php/Device_support_files">Device Support
Files</a></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Note for K2G devices:</strong> If using CCS v6.1.2 and Keystone2 device
support v1.1.7, 66AK2G02 would not show up in the list of devices when
creating the target configuration. This is due to an incompatibility
in the XML parser in CCS v6.1.2 with the K2G device xml. In order to
work-around this issue, make the change in 66AK2G02.xml as illustrated
below in order to have 66AK2G02 display in the device list. This
problem does not exist in CCS v6.1.3 onwards as the XML parser has
been updated.</div>
</div>
<div class="line-block">
<div class="line">C:\ti\ccsv6\ccs_base\common\targetdb\devices\66AK2G02.xml</div>
</div>
<div class="line-block">
<div class="line">Line #1</div>
</div>
<div class="line-block">
<div class="line">&lt;?xml version=”1.1” encoding=”UTF-8” standalone=”no”?&gt;</div>
<div class="line">to</div>
<div class="line">&lt;?xml version=”1.0” encoding=”UTF-8” standalone=”no”?&gt;</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="id47">Connect without a SD card boot image</p>
<p class="rubric" id="id48"><span id="configuringtargetconfigfile"></span>Configuring target configuration files</p>
<p>Launch CCS and create new target configuration(File-&gt;New-&gt;Target
Configuration file) as shown in the images below</p>
<img alt="../_images/CCS_target_configuration.png" src="../_images/CCS_target_configuration.png" />
<p>Provide appropriate name to the configuration. Select Spectrum digital
XDS200 emulator and target as K2G GPEVM.</p>
<p><strong>Note:</strong> If you don`t find the 66AK2G02 target make sure you have
installed the CCSv6.1.3 package or for CCSv6.1.2 and earlier ensure that
you have done the software update correctly as shown in the how to
section below.</p>
<img alt="../_images/K2G_GPEVM_Target_configuration.jpg" src="../_images/K2G_GPEVM_Target_configuration.jpg" />
<p>In advance settings, make sure that the gel files are populated
correctly. The following GEL files and their corresponding cores are
provided below:</p>
<ul class="simple">
<li><p>C66X Core: evmk2g.gel</p></li>
<li><p>A15 Core: evmk2g_arm.gel</p></li>
</ul>
<p class="rubric" id="id49">Connecting to target</p>
<p><strong>Step1 :</strong> Download Code composer Studio v6.1.3 or for CCSv6.1.2 and
earlier, ensure it contains Keystone device support package version
1.1.5 as described in the how to guide</p>
<p><a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_overview.html#code-composer-studio">Install Code composer Studio v6 for
K2G</a></p>
<dl class="simple">
<dt><strong>Step2:</strong> 66AK2GX GP EVM contains boot switches to configure for “No</dt><dd><p>boot/sleep” mode. So configure the boot switches to No Boot Mode as
described in the <a class="reference internal" href="#settingbootswitches">SettingBootSwitches</a></p>
</dd>
</dl>
<p><strong>Step3:</strong> Connect an XDS200 Emulator to XDS USB of the GP EVM as shown in <a class="reference internal" href="#connectingemulator">ConnectingEmulator</a></p>
<p><strong>Step4:</strong> Launch CCS and create new target configuration as discussed
in the previous section <a class="reference internal" href="#configuringtargetconfigfile">ConfiguringTargetConfigFile</a></p>
<p><strong>Step5</strong>: Launch Target configuration you just created.</p>
<img alt="../_images/K2G_Launch_targetConfig.png" src="../_images/K2G_Launch_targetConfig.png" />
<dl class="simple">
<dt><strong>Step6</strong>:K2G can be a DSP or an ARM master boot device so connect to</dt><dd><p>the C66x or the A15_0.</p>
</dd>
</dl>
<p><strong>GEL Log</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">=</span> <span class="mf">600.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ARM</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="n">with</span> <span class="n">ref</span> <span class="n">clock</span> <span class="mi">24</span><span class="n">MHz</span><span class="p">,</span> <span class="o">-</span><span class="n">sysclkp_period</span> <span class="mf">41.6666</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">=</span> <span class="mf">600.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">on</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">modules</span> <span class="n">and</span> <span class="n">DSP</span> <span class="n">domains</span><span class="p">...</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">on</span> <span class="n">PCIE</span> <span class="n">PSC</span> <span class="n">modules</span> <span class="n">and</span> <span class="n">DSP</span> <span class="n">domains</span><span class="p">...</span> <span class="n">Done</span><span class="p">.</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">UART</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">128</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">=</span> <span class="mf">384.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">NSS</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">=</span> <span class="mf">1000.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ICSS</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">=</span> <span class="mf">200.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DSS</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">198</span> <span class="o">/</span> <span class="mi">12</span> <span class="o">/</span> <span class="mi">16</span> <span class="o">=</span> <span class="mf">24.75</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">=</span> <span class="mf">200.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">XMC</span> <span class="n">setup</span> <span class="n">complete</span><span class="p">.</span> <span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="p">...</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="n">complete</span><span class="p">,</span> <span class="n">DDR3A</span> <span class="n">clock</span> <span class="n">now</span> <span class="n">running</span> <span class="n">at</span> <span class="mi">400</span><span class="n">MHz</span><span class="p">.</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3A</span> <span class="n">initialization</span> <span class="n">complete</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="connect-with-a-sd-card-boot-image">Connect with a SD card boot image</p>
<p>Launch CCS and create new target configuration(File-&gt;New-&gt;Target
Configuration file) as shown in the images below</p>
<img alt="../_images/CCS_target_configuration.png" src="../_images/CCS_target_configuration.png" />
<p>Provide appropriate name to the configuration. Select Spectrum digital
XDS200 emulator and target as 66AK2G02.</p>
<p><strong>Note:</strong> If you don`t find the 66AK2G02 target make sure you have
installed the CCSv6.1.3 package or for CCSv6.1.2 and earlier ensure that
you have done the software update correctly as shown in the how to
section below.</p>
<img alt="../_images/K2G_GPEVM_Target_configuration_alternate.jpg" src="../_images/K2G_GPEVM_Target_configuration_alternate.jpg" />
<p>In advance settings, make sure that the no gel files are populated.</p>
<p><strong>Step2:</strong> 66AK2G02 GP EVM contains boot switches to configure for
“SD/MMC boot” mode. So configure the boot switches to SD/MMC boot Mode
as described in the <a class="reference internal" href="#settingbootswitches">SettingBootSwitches</a></p>
<p><strong>Step3:</strong> Connect an XDS200 Emulator to XDS USB of the GP EVM as shown in
section <a class="reference internal" href="#connectingemulator">ConnectingEmulator</a></p>
<p><strong>Step4:</strong> Launch CCS and create new target configuration as discussed
in the previous section <a class="reference internal" href="#configuringtargetconfigfile">ConfiguringTargetConfigFile</a></p>
<p><strong>Step5</strong>: Launch Target configuration you just created.</p>
<img alt="../_images/K2G_Launch_targetConfig.png" src="../_images/K2G_Launch_targetConfig.png" />
<p><strong>Step6</strong>:K2G will boot with ARM master boot from the SD card so
connect to the A15_0. There will be no output on the console when you
connect to the core.</p>
<p><strong>Step7</strong> SD card boot image will typically load a secondary bootloader
like u-boot that will put the DSP in reset so user will need to follow
the instructions on the page that talks about <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/How_to_Guides.html#taking-the-c66x-out-of-reset-with-linux-running-on-the-arm-a15">Taking DSP out of reset</a></p>
<p><strong>Note:</strong> RTOS users don`t need to follow this step as the Secondary
bootloader (SBL) will put the DSP in idle state and not in reset if
there is no code running on the DSP.</p>
<p class="rubric" id="how-to-guide">How to guide</p>
<p>This section guides users who are using older versions of the GP EVM
which may require an update to the firmware flashed on the EVM or
hardware updates to workaround specific issues. Each section specifies
the affected versions and the fix for the issue.</p>
<p class="rubric" id="create-sd-card-to-boot-linux-on-the-gp-evm">Create SD card to boot Linux on the GP EVM</p>
<p>All pre-production boards (Rev C and earlier) will not contain a SD card
image in the kit without an image flashed on it for the Out of Box
experience described in the Quick start guide. User are required to
download the image seperately from the Processor SDK Linux portal and
run a script to create the SD boot image. The steps to create the image
are provided below:</p>
<p><strong>Step 1</strong> Download the image k2g-evm-linux-xx.xx.xx.xx.img.zip from the
link <a class="reference external" href="http://software-dl.ti.com/processor-sdk-linux/esd/K2G/latest/index_FDS.html">Latest Processor SDK
Linux</a></p>
<p><strong>Step 2</strong> Follow instructions to create a SD card for the EVM using the
instruction in the <a class="reference external" href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Overview_Getting_Started_Guide.html#linux-sd-card-creation-guide">SD Card Creation Guide</a></p>
<p class="rubric" id="update-the-bmc-firmware-on-the-evm">Update the BMC firmware on the EVM</p>
<p>The section describes how the Board Management controller firmware on
the board can be updated through the BMC UART interface. All boards
prior to RevC, require a BMC update for the following issue:</p>
<ul class="simple">
<li><p>CDCM chip on the board generates clocks to modules like PCIe and USB.
It is possible to use PCIe only in external clock mode on the EVM.
However there can be use-cases where PCIe clock should be enabled
with SoC running in internal clock mode.</p></li>
</ul>
<p><strong>Step 1</strong> Install the LM flash programmer from link provided below:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ti.com/tool/lmflashprogrammer">LMflashProgrammer tool</a></p></li>
</ul>
<p><strong>Step 2</strong> Obtain latest BMC software for the K2G GP EVM can be
obtained from the board manufacturer or from local TI contact.
Production EVMs are shipped with latest BMC version 0.6.1.0. You can
check the version of the BMC software by observing the version
indicated on BMC LCD on the GP EVM after power up.</p>
<p><strong>Step 3</strong> Connect the mini USB cable between host PC and ‘USB to SoC
UART0’ port (J23) on EVM</p>
<p><strong>Step 4</strong> Remove the jumper J10 and power on the K2G EVM</p>
<p><strong>Step 5</strong> Open the LM Flash programmer utility on the windows host
machine.</p>
<p><strong>Step 6</strong> In the LM Flash Programmer Utility ‘Configuration’ tab, in
the interface section, select ‘Serial (UART)’ from the drop-down box on
the left.Refer to the image provided below:</p>
<img alt="../_images/LMflashProg_Config.png" src="../_images/LMflashProg_Config.png" />
<p><strong>Step 7</strong> Select the BMC COM Port and set the ‘Baud Rate’ to 115200.</p>
<ul class="simple">
<li><p>There will be two COM ports that appears on EVMs ‘USB to SoC UART0’
port. Select the one which is connected to BMC. To find which port
corresponds to the BMC, you can open a serial terminal program or
Device Manager on your PC and check the port number corresponding to
“Silicon Labs CP210x: USB to UART Bridge: Standard COM Port (COM##)”
as shown below:</p></li>
</ul>
<img alt="../_images/BMCUARTPort.png" src="../_images/BMCUARTPort.png" />
<p><strong>Note:</strong> BMC outputs boot logs to serial console when EVM is powered
ON. Connect the ‘USB to SoC UART0’ port to standard serial console
application to find the right COM port that is connected to BMC.</p>
<p><strong>Step 8</strong> Set ‘Transfer Size’ to 60, and make sure ‘Disable Auto Baud
Support’ is unchecked.</p>
<p><strong>Step 9</strong> In the ‘Program’ tab, select the binary image file
bmc_evmKS2_K2G.bin in the section ‘Select.bin file’.</p>
<img alt="../_images/LMflashProg_program.png" src="../_images/LMflashProg_program.png" />
<p><strong>Step 10</strong> Leave all other options as default, and press the ‘Program’
button.</p>
<p><strong>Step 11</strong> Wait till ‘Program Complete’ status in the status bar.</p>
<p><strong>Step 12</strong> Connect the jumper J10 and reboot the EVM</p>
<p class="rubric" id="update-xds200-firmware-and-hardware-components-on-the-gp-evm">Update XDS200 firmware and hardware components on the GP EVM</p>
<p><strong>Note: This update is only required if you are using the on board
XDS200 debug probe.</strong></p>
<p>The RevB and RevC boards are using an earlier version of the XDS200
firmware. We have observed the following issues when hooking up the
internal XDS200 USB debug probe to a host machine.</p>
<ul class="simple">
<li><p><strong>XDS200 Emulator USB cable need to be re-plugged every time board is
power cycled/reset to avoid leakage on power supply VCC1V8_XDS which
can damage the regulator or other ICs</strong></p></li>
</ul>
<p class="rubric" id="workaround-for-this-issue">Workaround for this issue</p>
<ul class="simple">
<li><p>Use external emulators with the MIPI 60 adapter included int he kit.</p></li>
<li><p>Perform following firmware and hardware updates to the GP EVM (RevC
and earlier)</p></li>
</ul>
<p class="rubric" id="software-update-required">Software Update Required</p>
<p>Steps to update the XDS200 firmware on the EVM are archived on the article
<a class="reference external" href="http://dev.ti.com/tirex/explore/node?node=AADzJ8Y-La4f7Bi5Ga0TcA__FUz-xrs__LATEST">Updating_the_XDS200_firmware</a></p>
<p class="rubric" id="hardware-updates-required">Hardware updates required</p>
<ul class="simple">
<li><p>Replace R431 &amp; R442 to 200E</p></li>
<li><p>Mount resistors R95, R107, R108, R115.</p></li>
<li><p>Mount D2, R600, R599 components.</p></li>
<li><p>Remove FB3 and connect a wire from R64.2 ‘rVCC_VBUS_XDS’ and R67.2
‘VCC5V0_DCDC’ as shown in the image below:</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/R64_to_R67_HWMod.png"><img alt="../_images/R64_to_R67_HWMod.png" src="../_images/R64_to_R67_HWMod.png" style="width: 399.0px; height: 230.99999999999997px;" /></a>
<p class="rubric" id="update-the-evm-for-improved-usb-performance">Update the EVM for improved USB performance</p>
<p>The external resistors for the USB (R442 and R431) are currently 10k Ω.
We recommend that users need to replace these with 200 Ω / 1%.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="useful-resources-and-support">Useful Resources and Support</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ti.com/product/66ak2g02">66AK2G02 Product folder</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/product/66ak2g12">66AK2G12 Product folder</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/lit/pdf/sprui65a">66AK2Gx GP EVM Technical Reference Manual</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/tool/evmk2g">66AK2Gx GP EVM Product folder</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/tool/evmk2gx">66AK2Gx 1GHz GP EVM Product folder</a></p></li>
<li><p><a class="reference external" href="https://e2e.ti.com/support/dsp/c6000_multi-core_dsps/f/639">Keystone E2E Support
Forum</a></p></li>
</ul>
</div>
<div class="section" id="ak2g02-ice-evm-hardware-setup">
<h2>10.3.5. 66AK2G02 ICE EVM Hardware Setup<a class="headerlink" href="#ak2g02-ice-evm-hardware-setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id50">
<h3>10.3.5.1. Description<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<p>The K2G ICE EVM is a high performance, cost-efficient, standalone
development platform that enables users to evaluate and develop
industrial communications applications for the Texas Instrument’s
Keystone2 System-on-Chip (SoC) 66AK2G02. The K2G SOC (66AK2G02) is the new
device from TI’s Keystone II architecture with</p>
<ul class="simple">
<li><p>ARM® Cortex® -A15 Microprocessor Unit (ARM A15) Subsystem at up to
600MHz</p></li>
<li><p>C66x Fixed- and Floating-Point VLIW DSP Subsystem at up to 600MHz</p></li>
<li><p>Two Programmable Real-Time Unit and Industrial Communication
Subsystems (PRU-ICSS)</p></li>
<li><p>Multicore Shared Memory Controller (MSMC) with 1024KB of Shared L2
RAM</p></li>
<li><p>Up to 36-Bit DDR3 External Memory Interface (EMIF) with ECC (32-Bit
Data + 4-Bit ECC)</p></li>
<li><p>PCI-Express® 2.0 Port with Integrated PHY</p></li>
<li><p>Three Multichannel Audio Serial Port (McASP) Peripherals</p></li>
<li><p>Multichannel Buffered Serial Port (McBSP)</p></li>
<li><p>Six Enhanced High Resolution Pulse Width Modulation (eHRPWM)</p></li>
</ul>
<p>The key features of the EVM are:</p>
<ul class="simple">
<li><p>K2G SoC 66AK2G02 is based on keystone II architecture with ARM cortex
A15 &#64;600MHz and C66x DSP &#64;600MHz</p></li>
<li><p>515MByte of DDR3L</p></li>
<li><p>512Mbit of QSPI Flash</p></li>
<li><p>128kByte of I2C EEPROM</p></li>
<li><p>Micro SD-Card slot</p></li>
<li><p>Gigabit Ethernet port supporting 10/100/1000 Mbps data rate on RJ45
connector</p></li>
<li><p>4x 10/100 Industrial Ethernet connectors</p></li>
<li><p>PCIe x1 card edge connector</p></li>
<li><p>LCD display</p></li>
<li><p>Expansion connector for customer designs</p></li>
<li><p>XDS100 Emulator and UART over mini-USB connector</p></li>
<li><p>20-Pin JTAG header to support all types of external emulator</p></li>
<li><p>RoHS compliant design</p></li>
<li><p>Powered by DC power-wall adaptor (24V/2.5A) or PCIE Edge Connector</p></li>
</ul>
</div>
<div class="section" id="id51">
<h3>10.3.5.2. EVM Layout and Key Components<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/TI_K2G_ICE_EVM_TOP.png"><img alt="../_images/TI_K2G_ICE_EVM_TOP.png" src="../_images/TI_K2G_ICE_EVM_TOP.png" style="width: 393.5px; height: 273.0px;" /></a>
<a class="reference internal image-reference" href="../_images/TI_K2G_ICE_EVM_BOTTOM.png"><img alt="../_images/TI_K2G_ICE_EVM_BOTTOM.png" src="../_images/TI_K2G_ICE_EVM_BOTTOM.png" style="width: 333.5px; height: 282.0px;" /></a>
</div>
<div class="section" id="id52">
<h3>10.3.5.3. Supported JTAG Debug Probes (Emulators)<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>XDS100-class JTAG debug probes (low cost, low performance). The XDS100v1 is not supported.</p></li>
<li><p>XDS200-class JTAG debug probes (recommended)</p></li>
<li><p>XDS560v2-class JTAG debug probes (high performance)</p></li>
</ul>
</div>
<div class="section" id="id53">
<h3>10.3.5.4. Minimal EVM setup<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id54">
<h4>10.3.5.4.1. Setting Boot Switches<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<p>The DIP switch (SW3) is used for selecting the boot
mode.</p>
<p><strong>For the EVM Out-of-Box experience, use SD/MMC boot mode as shown in the image below</strong>:</p>
<a class="reference internal image-reference" href="../_images/K2GICE_Boot_MODE.png"><img alt="../_images/K2GICE_Boot_MODE.png" src="../_images/K2GICE_Boot_MODE.png" style="width: 314.5px; height: 197.5px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The table below lists all of the boot modes supported on the ICE EVM.</p>
<a class="reference internal image-reference" href="../_images/K2G_ICE_BOOTSW.png"><img alt="../_images/K2G_ICE_BOOTSW.png" src="../_images/K2G_ICE_BOOTSW.png" style="width: 473.5px; height: 230.5px;" /></a>
</div>
<div class="section" id="connecting-an-emulator">
<h4>10.3.5.4.2. Connecting an Emulator<a class="headerlink" href="#connecting-an-emulator" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This EVM setup is only required for developers who need to connect to cores using Code Composer Studio (CCS) to load their application.</p>
</div>
<p>The EVM supports two types of emulation via the on-board XDS100 emulator or the 20-pin JTAG header.</p>
<p>When an external emulator is not connected to the 20-pin JTAG Header, the on-board
XDS100 embedded JTAG emulator is the default type of emulation (SoC JTAG
signals are routed to the XDS100 on-board emulator). When an external emulator
is connected to the 20-pin JTAG Header, it is automatically detected and the SoC
JTAG signals are routed to the external emulator.</p>
<p><strong>On-board XDS100 Emulator</strong></p>
<p>The K2G ICE EVM has on-board XDS100 embedded JTAG emulation circuitry so an external emulator is not required.
Users can connect to the target SoC via CCS by connecting the USB cable, supplied in the ICE EVM kit, as shown in the image below.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference internal image-reference" href="../_images/ICE_K2G_connect.png"><img alt="../_images/ICE_K2G_connect.png" src="../_images/ICE_K2G_connect.png" style="width: 327.0px; height: 278.5px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>20-pin JTAG Header for Connecting an External Emulator</strong></p>
<p>Users have the option of connecting an external at the 20-pin JTAG
Header connector (EMU1). The 20-pin JTAG Header is provided on-board for
high speed real-time emulation. All JTAG and EMUxx signals are
terminated on 20-pin JTAG Header.</p>
</div>
<div class="section" id="id55">
<h4>10.3.5.4.3. Powering Up the EVM<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<p class="rubric" id="id56">Power Supply Specifications</p>
<p>The K2G ICE EVM can be powered from one of two sources. A single +24V /
2.5A DC (60W) external power supply connected to the DC power jack (J6).
In addition, the K2G ICE EVM can be powered from the 12V supply pins on
the PCIE edge connector. A power ANDing circuit is included in the
design which will prevent damage if the +24V is connected while the
board is installed on a PCIE backplane. The +24V supply will supply the
power for the board in that condition.</p>
</div>
</div>
<div class="section" id="id57">
<h3>10.3.5.5. CCS Setup<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<p>This section describes the setup to connect to 66AK2G02 ICE EVM using
Code composer Studio environment and an emulator.</p>
<p>There are two scenarios while connecting to the EVM :</p>
<ul class="simple">
<li><p><strong>Connect to EVM without a SD card boot image to boot the EVM</strong></p></li>
<li><p><strong>Connect to EVM after booting an image from the SD card</strong>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keystone II device support package in CCSv7.1 includes the support for K2G ICE board but CCSv7.0/ CCSv6 users may need to update the device support package as described in the section “Update CCS to Install Keystone II Device Support Package.”</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="update-ccs-to-install-keystone-ii-device-support-package">
<h4>10.3.5.5.1. Update CCS to Install Keystone II Device Support Package<a class="headerlink" href="#update-ccs-to-install-keystone-ii-device-support-package" title="Permalink to this headline">¶</a></h4>
<p>All revisions of the board require this step to be performed in order to
get the latest GEL files and the target content for the K2G if you are
using CCSv7.0 and earlier. This step will not be required for CCS
versions higher than version 7.1. CCSv7.0 or CCSv6.1.3 package contain
KeystoneII device support package v1.1.6 which doesn’t contain K2GICE
specific target files hence we recommend this update.</p>
<p>1. All CCS v6.1.3 or CCSv7.0 and earlier version users are
required to update the Keystone Device Support package by going into the
Help-&gt;Check For Updates</p>
<a class="reference internal image-reference" href="../_images/Check_for_Updates.png"><img alt="../_images/Check_for_Updates.png" src="../_images/Check_for_Updates.png" style="width: 221.5px; height: 225.5px;" /></a>
<p>2. Select Keystone2 device support package. Follow menu options
to continue with the update.</p>
<p>3. After the update is complete go to Help-&gt;Installation details
and check that Keystone2 device support package v1.1.9 or later are
installed as shown below.</p>
<a class="reference internal image-reference" href="../_images/KeystoneII_device_support_package.png"><img alt="../_images/KeystoneII_device_support_package.png" src="../_images/KeystoneII_device_support_package.png" style="width: 413.0px; height: 426.5px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The package can be downloaded separately from the link below and manually unzipped into CCS installation.</p>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://software-dl.ti.com/ccs/esd/documents/ccs_device_support_files.html">Device Support
Files</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For K2G Devices, if using CCS v6.1.2 and Keystone2 device support v1.1.7, 66AK2G02 would not show up in the list of devices when creating the target configuration. This is due to an incompatibility in the XML parser in CCS v6.1.2 with the K2G device xml. In order to work-around this issue, make the change in 66AK2G02.xml as illustrated below in order to have 66AK2G02 display in the device list. This problem does not exist in CCS v6.1.3 onwards as the XML parser has been updated.</p>
</div>
<p>C:\ti\ccsv6\ccs_base\common\targetdb\devices\66AK2G02.xml</p>
<p>Line #1</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.1&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span> <span class="n">standalone</span><span class="o">=</span><span class="s">&quot;no&quot;</span><span class="o">?&gt;</span>
</pre></div>
</div>
<p>to</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span> <span class="n">standalone</span><span class="o">=</span><span class="s">&quot;no&quot;</span><span class="o">?&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="connect-without-an-sd-card-boot-image">
<h4>10.3.5.5.2. Connect without an SD Card Boot Image<a class="headerlink" href="#connect-without-an-sd-card-boot-image" title="Permalink to this headline">¶</a></h4>
<p class="rubric" id="id58">Configuring target configuration files</p>
<p>Launch CCS and create a new target configuration (File-&gt;New-&gt;Target Configuration file) as shown in the images below.</p>
<a class="reference internal image-reference" href="../_images/CCS_target_configuration.png"><img alt="../_images/CCS_target_configuration.png" src="../_images/CCS_target_configuration.png" style="width: 550.0px; height: 343.0px;" /></a>
<p>Provide an appropriate name to the configuration. Select Spectrum Digital XDS100 emulator and target as K2G ICE EVM.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t find the K2GICE target make sure you have installed CCSv7.1 or higher. If using CCSv 7.0 or CCSv6.1.x and earlier, ensure that you have done the software update correctly as shown in the how to section below.</p>
</div>
<a class="reference internal image-reference" href="../_images/K2G_ICE_target_configuration.png"><img alt="../_images/K2G_ICE_target_configuration.png" src="../_images/K2G_ICE_target_configuration.png" style="width: 563.5px; height: 292.0px;" /></a>
<p>In advanced settings, make sure that the GEL files are populated correctly. The following GEL files and their corresponding cores are provided below.</p>
<ul class="simple">
<li><p>C66X Core: icek2g.gel</p></li>
<li><p>A15 Core: icek2g_arm.gel</p></li>
</ul>
<p class="rubric" id="id59">Connecting to target</p>
<p>1. Download Code composer Studio or for CCSv7.0 and earlier, ensure it contains Keystone device support package version 1.1.9 as described in the
how to guide “Update CCS to Install Keystone II Device Support Package.”</p>
<p>2. 66AK2G02 ICE EVM contains boot switches to configure for “No boot/sleep” mode. So configure the boot switches to “No Boot Mode” as described in
the “Setting Boot Switches” section.</p>
<p>3. Connect an XDS100 Emulator to the XDS USB port of the ICE EVM as shown in the
section “Connecting Emulator.”</p>
<p>4. Launch CCS and create a new target configuration as discussed in
the previous section “Configuring target configuration files.”</p>
<p>5. Launch the newly created
target configuration.</p>
<a class="reference internal image-reference" href="../_images/K2G_Launch_targetConfig.png"><img alt="../_images/K2G_Launch_targetConfig.png" src="../_images/K2G_Launch_targetConfig.png" style="width: 550.0px; height: 260.5px;" /></a>
<p>6. K2G can be a DSP or an ARM master boot device
so connect to the C66x or the A15_0.</p>
<p><strong>GEL Log</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">=</span> <span class="mf">600.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ARM</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="n">with</span> <span class="n">ref</span> <span class="n">clock</span> <span class="mi">24</span><span class="n">MHz</span><span class="p">,</span> <span class="o">-</span><span class="n">sysclkp_period</span> <span class="mf">41.6666</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">=</span> <span class="mf">600.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">on</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">modules</span> <span class="n">and</span> <span class="n">DSP</span> <span class="n">domains</span><span class="p">...</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">on</span> <span class="n">PCIE</span> <span class="n">PSC</span> <span class="n">modules</span> <span class="n">and</span> <span class="n">DSP</span> <span class="n">domains</span><span class="p">...</span> <span class="n">Done</span><span class="p">.</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">UART</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">128</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">=</span> <span class="mf">384.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">NSS</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">=</span> <span class="mf">1000.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ICSS</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">=</span> <span class="mf">200.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DSS</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">198</span> <span class="o">/</span> <span class="mi">12</span> <span class="o">/</span> <span class="mi">16</span> <span class="o">=</span> <span class="mf">24.75</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">24.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">=</span> <span class="mf">200.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">XMC</span> <span class="n">setup</span> <span class="n">complete</span><span class="p">.</span> <span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="p">...</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="n">complete</span><span class="p">,</span> <span class="n">DDR3A</span> <span class="n">clock</span> <span class="n">now</span> <span class="n">running</span> <span class="n">at</span> <span class="mi">400</span><span class="n">MHz</span><span class="p">.</span>
<span class="nl">A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3A</span> <span class="n">initialization</span> <span class="n">complete</span>
</pre></div>
</div>
</div>
<div class="section" id="connect-with-an-sd-card-boot-image">
<h4>10.3.5.5.3. Connect with an SD Card Boot Image<a class="headerlink" href="#connect-with-an-sd-card-boot-image" title="Permalink to this headline">¶</a></h4>
<p>1.  Launch CCS and create a new target configuration (File-&gt;New-&gt;Target
Configuration file) as shown in the images below.</p>
<a class="reference internal image-reference" href="../_images/CCS_target_configuration.png"><img alt="../_images/CCS_target_configuration.png" src="../_images/CCS_target_configuration.png" style="width: 550.0px; height: 343.0px;" /></a>
<p>Provide an appropriate name to the configuration. Select Spectrum digital XDS100 emulator and target as 66AK2G02.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t find the K2GICE target make sure you have installed CCSv7.1 or higher. If using CCSv 7.0 or CCSv6.1.x and earlier, ensure that you have done the software update correctly as shown in the how to section below.</p>
</div>
<a class="reference internal image-reference" href="../_images/K2G_GPEVM_Target_configuration_alternate.jpg"><img alt="../_images/K2G_GPEVM_Target_configuration_alternate.jpg" src="../_images/K2G_GPEVM_Target_configuration_alternate.jpg" style="width: 571.0px; height: 343.0px;" /></a>
<p>In advanced settings, make sure that no GEL files are populated.</p>
<p>2. 66AK2G02 GP EVM contains boot switches to configure for “SD/MMC boot” mode. So configure the boot switches to “SD/MMC Boot” as described in
the section “Setting Boot Switches.”</p>
<p>3. Connect an XDS100 Emulator to the XDS USB port of the GP EVM as shown in the
section “Connecting Emulator.”</p>
<p>4. Launch CCS and create a new target configuration as discussed in the previous
section “Configuring target configuration files”.</p>
<p>5. Launch the newly created
target configuration.</p>
<a class="reference internal image-reference" href="../_images/K2G_Launch_targetConfig.png"><img alt="../_images/K2G_Launch_targetConfig.png" src="../_images/K2G_Launch_targetConfig.png" style="width: 550.0px; height: 260.5px;" /></a>
<p>6. K2G will boot with ARM master boot from the SD card so connect to the A15_0. There will be no output on the console when you
connect to the core.</p>
<p>7. SD card boot image will typically load a secondary bootloader like u-boot that will put the DSP in reset so users will need to follow
the instructions in the guide <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/How_to_Guides.html#taking-the-c66x-out-of-reset-with-linux-running-on-the-arm-a15">How to take the C66x DSP out of reset with Linux running on A15</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>RTOS users do not need to follow this step as the Secondary Bootloader (SBL) will put the DSP in idle state and not in reset if there is no code running on the DSP.</p>
</div>
</div>
</div>
<div class="section" id="id60">
<h3>10.3.5.6. Useful Resources and Support<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ti.com/lit/ug/spruie3/spruie3.pdf">66AK2Gx ICE EVM User Guide</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/product/66AK2G12">66AK2Gx Product folder</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/lit/ug/sprui65/sprui65.pdf">66AK2Gx GP EVM Technical Reference
Manual</a></p></li>
<li><p><a class="reference external" href="http://www.ti.com/tool/k2gice">66AK2Gx ICE EVM Product folder</a></p></li>
<li><p><a class="reference external" href="https://e2e.ti.com/support/dsp/c6000_multi-core_dsps/f/639">Keystone E2E Support
Forum</a></p></li>
</ul>
</div>
</div>
<div class="section" id="evmk2e-hardware-setup-guide">
<h2>10.3.6. EVMK2E Hardware Setup Guide<a class="headerlink" href="#evmk2e-hardware-setup-guide" title="Permalink to this headline">¶</a></h2>
<div class="section" id="hardware-setup">
<h3>10.3.6.1. Hardware Setup<a class="headerlink" href="#hardware-setup" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The EVM board is sensitive to electrostatic discharges (ESD). Use a grounding strap or other device to prevent damaging the board. Be sure to connect communication cables before applying power to any equipment.</p>
</div>
<div class="section" id="attach-the-ethernet-cable">
<h4>10.3.6.1.1. Attach the Ethernet cable<a class="headerlink" href="#attach-the-ethernet-cable" title="Permalink to this headline">¶</a></h4>
<p>Using the Ethernet cable supplied, connect one end of the cable to the
Ethernet Port 0 (At bottom one) on the EVM and the other end to your PC.
The below picture shows which Ethernet Port is port 0:</p>
<img alt="../_images/Evmk2e-image001.jpg" src="../_images/Evmk2e-image001.jpg" />
</div>
<div class="section" id="connect-the-jtag-interface">
<h4>10.3.6.1.2. Connect the JTAG interface<a class="headerlink" href="#connect-the-jtag-interface" title="Permalink to this headline">¶</a></h4>
<p>Use the USB to USB mini-B cable provided. Connect the USB mini-B
connector to the USB mini-B interface near to the RST_PWR1 (Red color)
button on the EVM, and the USB connector to your PC. This enables
XDS-2xx emulation and is directly useable by CCS. If you are using a
different JTAG, you can connect it at MIPI60 connector (EMU1).</p>
</div>
<div class="section" id="k2e-set-the-boot-mode-switch-sw1">
<h4>10.3.6.1.3. K2E Set the boot mode switch SW1<a class="headerlink" href="#k2e-set-the-boot-mode-switch-sw1" title="Permalink to this headline">¶</a></h4>
<p class="rubric" id="k2e-spi-le-boot-mode">K2E SPI Little Endian Boot mode (Default factory setting)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MSB</span>                         <span class="n">LSB</span>
<span class="n">SW1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">2</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">3</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">4</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/Evmk2e-image002.jpg" src="../_images/Evmk2e-image002.jpg" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here a switch on “ON” position should be considered as “1”.</p>
</div>
<p class="rubric" id="k2e-set-no-boot-mode">K2E No Boot/JTAG DSP Little Endian Boot mode</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MSB</span>                      <span class="n">LSB</span>
<span class="n">SW1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">2</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">3</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">4</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/Evmk2e-image003.jpg" src="../_images/Evmk2e-image003.jpg" />
</div>
<div class="section" id="attach-the-serial-port-cable-to-the-soc-uart-port">
<h4>10.3.6.1.4. Attach the serial port cable to the SoC UART port<a class="headerlink" href="#attach-the-serial-port-cable-to-the-soc-uart-port" title="Permalink to this headline">¶</a></h4>
<p>Connect the SoC UART port to PC using the serial cable provided with the
EVM. The SoC UART port is the 4-pin white connector COM1 of the EVM.</p>
<p>Start TeraTerm or HyperTerminal and set configuration to</p>
<ul class="simple">
<li><p>Baud Rate or Bits per second: 115200</p></li>
<li><p>Data Bits: 8</p></li>
<li><p>Parity: None</p></li>
<li><p>Stop Bits: 1</p></li>
<li><p>Flow Control: None</p></li>
</ul>
</div>
<div class="section" id="connect-the-power-cable">
<h4>10.3.6.1.5. Connect the power cable<a class="headerlink" href="#connect-the-power-cable" title="Permalink to this headline">¶</a></h4>
<p>Connect the power cable to the EVM power jack on the board. To be ESD
safe, plug in the other end of the power cable only after you have
connected the power cord to the board. Then turn on the board.</p>
</div>
</div>
<div class="section" id="dip-switch-and-bootmode-configurations">
<h3>10.3.6.2. DIP Switch and Bootmode Configurations<a class="headerlink" href="#dip-switch-and-bootmode-configurations" title="Permalink to this headline">¶</a></h3>
<p><strong>EVM SW1 switch Bootmode Configuration</strong></p>
<p>The table below shows the bootmode combinations for the BMC v1.1.0.x.
and value selected from internal flash memory of LM3s2d93.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>DIP Switch
settings
Selected</strong></p></td>
<td><p><strong>High_value of
that bootmode</strong></p></td>
<td><p><strong>Low_value of
that bootmode</strong></p></td>
<td><p><strong>Selected
bootmode</strong></p></td>
</tr>
<tr class="row-even"><td><p>0000</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00010067</p></td>
<td><p>ARM NAND</p></td>
</tr>
<tr class="row-odd"><td><p>0001</p></td>
<td><p>0X00000000</p></td>
<td><p>0x00100001</p></td>
<td><p>DSP No Boot</p></td>
</tr>
<tr class="row-even"><td><p>0010</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00008005</p></td>
<td><p>ARM SPI</p></td>
</tr>
<tr class="row-odd"><td><p>0011</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00100003</p></td>
<td><p>ARM I2C Master</p></td>
</tr>
<tr class="row-even"><td><p>0100</p></td>
<td><p>0x00000000</p></td>
<td><p>0x0000006F</p></td>
<td><p>ARM UART Master</p></td>
</tr>
<tr class="row-odd"><td><p>0101</p></td>
<td><p>0x00000000</p></td>
<td><p>0x0001506B</p></td>
<td><p>ARM RBL EthNet</p></td>
</tr>
<tr class="row-even"><td><p>0110</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00001061</p></td>
<td><p>Sleep with Max PLL
and ARM Bypass</p></td>
</tr>
<tr class="row-odd"><td><p>0111</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00001061</p></td>
<td><p>Sleep with Max PLL</p></td>
</tr>
<tr class="row-even"><td><p>1000</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00010167</p></td>
<td><p>DSP NAND</p></td>
</tr>
<tr class="row-odd"><td><p>1001</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00001061</p></td>
<td><p>Sleep with Slow
PLL and ARM Bypass</p></td>
</tr>
<tr class="row-even"><td><p>1010</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00008105</p></td>
<td><p>DSP SPI-boot</p></td>
</tr>
<tr class="row-odd"><td><p>1011</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00100103</p></td>
<td><p>ARM I2C Master</p></td>
</tr>
<tr class="row-even"><td><p>1100</p></td>
<td><p>0x00000000</p></td>
<td><p>0x0000016F</p></td>
<td><p>DSP UART boot</p></td>
</tr>
<tr class="row-odd"><td><p>1101</p></td>
<td><p>0x00000000</p></td>
<td><p>0x0001516B</p></td>
<td><p>DSP RBL ENET</p></td>
</tr>
<tr class="row-even"><td><p>1110</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00003661</p></td>
<td><p>Sleep with Slow
PLL and Slow ARM
PLL</p></td>
</tr>
<tr class="row-odd"><td><p>1111</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00100001</p></td>
<td><p>DSP No-Boot</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="evm-k2e-how-to-guides">
<h3>10.3.6.3. EVM K2E How To Guides<a class="headerlink" href="#evm-k2e-how-to-guides" title="Permalink to this headline">¶</a></h3>
<div class="section" id="host-driver-for-on-board-mini-usb-connector">
<h4>10.3.6.3.1. Host driver for on-board mini-USB connector<a class="headerlink" href="#host-driver-for-on-board-mini-usb-connector" title="Permalink to this headline">¶</a></h4>
<p>The K2E EVM has a CP2105 device on-board. A driver must be installed on
the host PC in order to be able to communicate with the EVM using the
CP2105 mini-USB connector located at the corner edge of the EVM. The
driver can be downloaded from <a class="reference external" href="http://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx">CP2105 driver
download</a>.</p>
<p>Both Linux and Windows host machine drivers can be downloaded from this
page. For Linux host machine, please follow the instructions given in
the release notes. There are two versions of drivers for Linux kernel
version 3.x.x and 2.6.x. Please download appropriate drivers after
identifying the correct kernel version of the user’s host machine.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before testing the USB connection, make sure that the mini-USB cable is plugged into the port on the base board.</p>
</div>
<p>After installing the driver and connecting the USB cable, two COM ports
should be visible in the list of COM ports available to connect to in
the PC Host terminal console. The lower COM port (Enhanced) corresponds
to the SoC UART and the higher (Standard) one corresponds to the MCU
UART.</p>
</div>
<div class="section" id="bmc-version-check-and-update">
<h4>10.3.6.3.2. BMC Version Check and Update<a class="headerlink" href="#bmc-version-check-and-update" title="Permalink to this headline">¶</a></h4>
<p>BMC, or Board Management Controller, takes care of the power, clocks,
resets, bootmodes, etc. of the EVM.</p>
<p>You can check the version by:</p>
<ol class="arabic simple">
<li><p>Opening a hyperterminal or another similar type of console
application.</p></li>
<li><p>Set COM Port to higher value.</p>
<ul class="simple">
<li><p>When you connect to CP2105 mini-USB on the EVM it will provide two
COM port connections, one to the SOC UART and one to BMC UART.</p></li>
<li><p>The SOC UART will always be the “Enhanced” COM port, for example
COM6 (actual COM PORT values will vary.)</p></li>
</ul>
</li>
<li><p>Set COM port properties appropriately:</p>
<ul class="simple">
<li><p>Baud Rate or Bits per second: 115200</p></li>
<li><p>Data Bits: 8</p></li>
<li><p>Parity: None</p></li>
<li><p>Stop Bits: 1</p></li>
<li><p>Flow Control: None</p></li>
</ul>
</li>
<li><p>At BMC prompt type ‘ver’ (no quotes).</p></li>
<li><p>Check BMC version</p></li>
</ol>
<img alt="../_images/Evmk2e-image005.jpg" src="../_images/Evmk2e-image005.jpg" />
<p>If an in-field update is needed, downloaded the latest version
<a class="reference external" href="https://www.einfochips.com/index.php/partnerships/texas-instruments/k2e-evm.html#5-resources">here</a>
(labeled “BMC”) and follow instructions below.</p>
<div class="section" id="prepare-evm-for-in-field-update">
<h5>10.3.6.3.2.1. Prepare EVM for in-field update<a class="headerlink" href="#prepare-evm-for-in-field-update" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Remove power to the EVM.</p></li>
<li><p>Set boot mode to “No Boot mode” (see above).</p></li>
<li><p>Remove the MCU_BOOTSELECT (CN4) jumper (see picture below for
location of jumper.)</p></li>
<li><p>Make sure your</p>
<ul class="simple">
<li><p>USB cable is connected to CP2105 mini-USB (not XDS200 Emulator
USB) or</p></li>
<li><p>Connect 4pin UART cable to COM1: MCU UART connector</p></li>
</ul>
</li>
<li><p>Make sure no HyperTerminal/Console connected to BMC COM port are open
or active.</p></li>
<li><p>Use the LM Flash Programmer (available
<a class="reference external" href="http://www.ti.com/tool/lmflashprogrammer">here</a>) to update the
firmware, as detailed in the steps below.</p></li>
</ol>
<img alt="../_images/Evmk2e-image006.jpg" src="../_images/Evmk2e-image006.jpg" />
</div>
<div class="section" id="perform-in-field-update">
<h5>10.3.6.3.2.2. Perform in-field update<a class="headerlink" href="#perform-in-field-update" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Apply power to the EVM. No LED’s will be illuminated and no LCD
backlight or characters will be on because the BMC is waiting for a
command rather than executing from Flash.</p></li>
<li><p>Open the LM Flash programmer utility. (Default location Start Menu -&gt;
All Programs -&gt; Texas Instruments -&gt; Stellaris -&gt; LM Flash Programmer
-&gt; LM Flash Programmer )</p></li>
<li><p>In the LM Flash Programmer Utility ‘Configuration’ tab, in the
interface section, select ‘Serial (UART)’ from the drop-down box on
the left.</p></li>
<li><p>Select the BMC COM Port (the same COM port used to issue the ver
command earlier), and set the ‘Baud Rate’ to 115200.</p></li>
<li><p>Set ‘Transfer Size’ to 60, and make sure ‘Disable Auto Baud Support’
is unchecked. See image below.</p></li>
<li><p>In the ‘Program’ tab, Browse to the location of the binary file
containing the firmware update, and select it.</p></li>
<li><p>Leave all other options as default, and press the ‘Program’ button.</p></li>
<li><p>After the programming is complete, power off the board.</p></li>
<li><p>Reconnect the jumper.</p></li>
<li><p>Open the HyperTerminal/Console for the BMC COM port.</p></li>
<li><p>Apply power to the EVM. When BMC completes initialization of board it
will show latest version of BMC in Console.</p></li>
<li><p>If step 9 was done after power was applied, just type “ver” at BMC
prompt.</p></li>
</ol>
<img alt="../_images/Evmk2e-image007.jpg" src="../_images/Evmk2e-image007.jpg" />
</div>
</div>
<div class="section" id="ucd-power-management-update">
<h4>10.3.6.3.3. UCD Power Management Update<a class="headerlink" href="#ucd-power-management-update" title="Permalink to this headline">¶</a></h4>
<p>There is one power management module (a.k.a. UCD) located on the EVM. It
can be identified by its address: 104(68h). Each module contains
non-volatile registers that determine its operation. It may be necessary
to update these registers in the field after the board has been shipped.</p>
<p>This update can be performed through the BMC, which can issue commands
to the UCD modules to update the register settings. The <strong>Power
Management Configuration Update Tool</strong> performs the task of sending
commands to the BMC to get the current module versions, and perform
updates using configuration files.</p>
<p>The latest version of the tool is available from
<a class="reference external" href="https://www.einfochips.com/index.php/partnerships/texas-instruments/k2e-evm.html#5-resources">here</a>
along with instructions on using the tool, and the latest configuration
files (txt files). Please follow the instructions provided to check the
current module versions, and update them accordingly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The DIP switch configuration of the board when running the update is irrelevant.</p>
</div>
</div>
</div>
</div>
<div class="section" id="evmk2h-hardware-setup-guide">
<h2>10.3.7. EVMK2H Hardware Setup Guide<a class="headerlink" href="#evmk2h-hardware-setup-guide" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id61">
<h3>10.3.7.1. Hardware Setup<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The EVM board is sensitive to electrostatic discharges (ESD). Use a grounding strap or other device to prevent damaging the board. Be sure to connect communication cables before applying power to any equipment.</p>
</div>
<div class="section" id="ftdi-driver-installation-on-pc-host">
<h4>10.3.7.1.1. FTDI Driver Installation on PC Host<a class="headerlink" href="#ftdi-driver-installation-on-pc-host" title="Permalink to this headline">¶</a></h4>
<p>The K2 EVM has a FTDI FT2332HL device on board. A driver must be
installed on the PC Host in order to be able to communicate with the EVM
using the FTDI mini-USB connector located under the mini-USB connector
of the emulator daughter card. The driver can be downloaded from here
<a class="reference external" href="http://www.ftdichip.com/Drivers/D2XX.htm">FTDI Driver</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before testing the usb connection, make sure that the mini-usb cable is plugged into the port on the base board. (and not connected to the daughter card).</p>
</div>
<p>After installing the driver and connecting the USB cable, two COM ports
should be visible in the list of COM ports available to connect to in
the PC Host terminal console. The lower COM port corresponds to the SoC
UART and the higher one corresponds to the MCU UART.</p>
</div>
<div class="section" id="id62">
<h4>10.3.7.1.2. BMC Version Check and Update<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<p>Read
<a class="reference external" href="How_to_Guides_Hardware_Setup_with_CCS.html#bmc-in-field-update">BMC_In-Field_Update</a>
to check BMC version and update if necessary.</p>
</div>
<div class="section" id="ucd-power-management-modules-in-field-update">
<h4>10.3.7.1.3. UCD Power Management Modules In-Field Update<a class="headerlink" href="#ucd-power-management-modules-in-field-update" title="Permalink to this headline">¶</a></h4>
<p>There are three power management modules (sometimes called the UCDs)
located on the EVM. Each module can be identified by it’s address:
104(68h), 52(34h), and 78(4Eh). Each module contains non-volatile
registers that determine it’s operation. It may be necessary to update
these registers after the board has been shipped. This update can be
performed through the BMC, which can issue commands to the UCD modules
to update the register settings. The <strong>Power Management Configuration
Update Tool</strong> (bmc_tool.py) performs the task of sending commands to
the BMC to get the current module versions, and perform updates using
configuration files. Instructions for executing the update tool
(bmc_tool.py) are available here: <a class="reference download internal" download="" href="../_downloads/ae81bb7d8c07f73ca0b4a29068e0a498/Bmc_tool_ucd_update_guide_v2.pdf"><code class="xref download docutils literal notranslate"><span class="pre">BMC</span> <span class="pre">Tool</span> <span class="pre">UCD</span> <span class="pre">Update</span> <span class="pre">Guide</span></code></a></p>
<p>The latest version of the tool is available
<a class="reference external" href="http://wfcache.advantech.com/www/support/TI-EVM/Rev4_0/BMC/BMC_EVMK2K_1_0_2_6-20160330.zip">here</a>.
The latest configuration files (txt files) are available
<a class="reference external" href="http://wfcache.advantech.com/www/support/TI-EVM/Rev4_0/UCD/UCD_Configuration_Standard_Release.zip">here</a>.
Please follow the instructions provided to check the current module
versions, and update them accordingly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The DIP switch configuration of the board when running the update is irrelevant.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>BMC versions 1.0.1.3a and earlier will not work properly with the <strong>Get Versions</strong> feature of the Update Tool. Upgrade to a more recent version of the BMC to use this functionality.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id63">
<h4>10.3.7.1.4. Attach the Ethernet cable<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<p>Using the Ethernet cable supplied, connect one end of the cable to the
Ethernet Port 0 (marked ENET0 on the board) on the EVM and the other end
to your PC.</p>
<p>This picture shows which Ethernet Port is 0:</p>
<img alt="../_images/K2H_ENET0.jpg" src="../_images/K2H_ENET0.jpg" />
</div>
<div class="section" id="id64">
<h4>10.3.7.1.5. Connect the JTAG interface<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<p>Use the USB to USB mini-B cable provided. Connect the USB mini-B
connector to the USB mini-B interface on the XDS-2xx daughter card on
the EVM, and the USB connector to your PC. This enables XDS-2xx
emulation and is directly useable by CCS. If you are using a different
JTAG, connect it now.</p>
</div>
<div class="section" id="k2h-set-the-boot-mode-switch-sw1">
<h4>10.3.7.1.6. K2H Set the boot mode switch SW1<a class="headerlink" href="#k2h-set-the-boot-mode-switch-sw1" title="Permalink to this headline">¶</a></h4>
<p class="rubric" id="k2h-set-no-boot-mode">K2H No Boot/JTAG DSP Little Endian Boot mode</p>
<p>For <strong>Rev 0B EVM</strong>, the setting is as follows</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SW1</span> <span class="o">-</span> <span class="mi">4</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">3</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">2</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">1</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span>
</pre></div>
</div>
<p>For <strong>Rev 1.0 EVM</strong>, the setting is as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SW1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">2</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">3</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">4</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="k2h-spi-le-boot-mode">K2H SPI Little Endian Boot mode</p>
<p>For <strong>Rev 0B EVM</strong>, the setting is as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SW1</span> <span class="o">-</span> <span class="mi">4</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">3</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">2</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">1</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
<p>For <strong>Rev 1.0 EVM</strong>, the setting is as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SW1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">2</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span> <span class="mi">3</span><span class="p">(</span><span class="n">ON</span><span class="p">)</span> <span class="mi">4</span><span class="p">(</span><span class="n">OFF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ddr-configuration-rev-0b-evm-only">
<h4>10.3.7.1.7. DDR Configuration (Rev 0B EVM only)<a class="headerlink" href="#ddr-configuration-rev-0b-evm-only" title="Permalink to this headline">¶</a></h4>
<p>For <strong>Rev 0B EVM</strong>, the following procedure is required for proper DDR
configuration:</p>
<ul class="simple">
<li><p>Connect the MCU UART port to PC using the serial cable provided with
the EVM. The MCU UART port is the 4-pin white connector farthest from
the edge of the EVM. Alternatively it is also possible to connect a
mini-USB cable to the FTDI mini-USB connector of the EVM. This will
provide access to both the SoC and the MCU UART ports.</p></li>
<li><p>Start Tera Term or Hyper terminal and set to 115200 board rate, 8-bit
data, 1-bit stop and no parity/flow control.</p></li>
<li><p>Power on the EVM. MCU UART console will show user prompt once MCU
boot up is complete. Type the following commands at the console to
setup DDR3A. Ethernet requires DDR3A and will not work with DDR3B
which is default in Rev 0B EVMs.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BMC</span><span class="o">&gt;</span> <span class="n">setboot</span> <span class="mi">100001</span>
<span class="n">BMC</span><span class="o">&gt;</span> <span class="n">fullrst</span>
</pre></div>
</div>
</div>
<div class="section" id="id65">
<h4>10.3.7.1.8. Attach the serial port cable to the SoC UART port<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<p>Connect the SoC UART port to PC using the serial cable provided with the
EVM. The SoC UART port is the 4-pin white connector closest to the edge
of the EVM.</p>
<p>Start Tera Term or Hyper terminal and set to 115200 board rate, 8-bit
data, 1-bit stop and no parity/flow control.</p>
</div>
<div class="section" id="id66">
<h4>10.3.7.1.9. Connect the power cable<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<p>Connect the power cable to the EVM power jack on the board. To be ESD
safe, plug in the other end of the power cable only after you have
connected the power cord to the board. Then turn on the board.</p>
</div>
</div>
<div class="section" id="bmc-in-field-update">
<h3>10.3.7.2. BMC In-Field Update<a class="headerlink" href="#bmc-in-field-update" title="Permalink to this headline">¶</a></h3>
<p>BMC, or Board Management Controller, takes care of the power, clocks,
resets, bootmodes, etc. of the EVM.</p>
<p>For Rev1.0 EVMs an in-field update may be necessary as a very small
quantity were delivered with an old revision of the BMC. If your EVM is
using version 1.0.1.3 then it should be updated to version 1.0.1.3a. The
update corrects the way that the boot mode pins are interpreted.</p>
<p>You can check the version by:</p>
<p><strong>1. Opening a hyperterminal or another similar type of console
application.</strong></p>
<p><strong>2. Set COM Port to higher value</strong></p>
<ul class="simple">
<li><p>When you connect to FTDI mini-USB on the EVM it will provide 2 COM
port connections, one to the SOC UART and one to BMC UART.</p></li>
<li><p>The SOC UART will always be the lowest value COM port, for example
COM5, and the BMC UART will always be the higher value COM port, for
example COM6. (Actual COM PORT values will vary).</p></li>
</ul>
<p><strong>3. Set COM port properties appopriately:</strong></p>
<ul class="simple">
<li><p>Baud Rate or Bits per second: 115200</p></li>
<li><p>Data Bits: 8</p></li>
<li><p>Parity: None</p></li>
<li><p>Stop Bits: 1</p></li>
<li><p>Flow Control: None</p></li>
</ul>
<p><strong>4. At BMC prompt typer ‘ver’ (no quotes)</strong></p>
<p><strong>5. Check BMC Version</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="../_images/Bmc_ver_screenshot.JPG" src="../_images/Bmc_ver_screenshot.JPG" />
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p>If an in-field update is needed, downloaded the latest version
<a class="reference external" href="http://www.advantech.com/Support/TI-EVM/EVMK2HX_sd.aspx">here</a>
(labeled <strong>Board Management Controller Binaries (BMC)</strong>) and continue
with the following steps.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Prepare EVM for in-field update:</strong></p>
<ol class="arabic simple">
<li><p>Remove power to the EVM.</p></li>
<li><p>Set boot mode to “No Boot mode” ( See <a href="#id87"><span class="problematic" id="id88">NoBootLittleEndian_</span></a> )</p></li>
<li><p>Remove the MCU_BOOTSELECT (CN9) jumper (see picture below for
location of jumper: Referred as “<strong>G: MCU Reset Jumper for BMC field
update</strong>”).</p></li>
<li><p>Make sure your USB cable is connected to FTDI mini-USB (not XDS200
Emulator USB) OR connect 4pin UART cable to COM1: MCU UART connector.</p></li>
<li><p>Make sure no HyperTerminal/Console connected to BMC COM port are open
or active.</p></li>
<li><p>Use the LM Flash Programmer (available
<a class="reference external" href="http://www.ti.com/tool/lmflashprogrammer">here</a>) to update the
firmware, as detailed in the steps below.</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Perform in-field update:</strong></p>
<ol class="arabic">
<li><p>Apply power to the EVM. No LED’s will be illuminated and no LCD
backlight or characters will be on because the BMC is waiting for a
command rather than executing from Flash.</p></li>
<li><p>Open the LM Flash programmer utility. (Default location Start Menu -&gt;
All Programs -&gt; Texas Instruments -&gt; Stellaris -&gt; LM Flash Programmer
-&gt; LM Flash Programmer )</p></li>
<li><p>In the LM Flash Programmer Utility ‘Configuration’ tab, in the
interface section, select ‘Serial (UART)’ from the drop-down box on
the left.</p></li>
<li><p>Select the BMC COM Port (the same COM port used to issue the ver
command earlier), and set the ‘Baud Rate’ to 115200.</p></li>
<li><p>Set ‘Transfer Size’ to 60, and make sure ‘Disable Auto Baud Support’
is unchecked.</p>
<img alt="../_images/LMflashProg_Config.png" src="../_images/LMflashProg_Config.png" />
</li>
<li><p>In the ‘Program’ tab, Browse to the location of the binary file
containing the firmware update, and select it.</p></li>
<li><p>Leave all other options as default, and press the ‘Program’ button.</p></li>
<li><p>After the programming is complete, power off the board.</p></li>
<li><p>Reconnect the jumper.</p></li>
<li><p>Open the HyperTerminal/Console for the BMC COM port.</p></li>
<li><p>Apply power to the EVM. When BMC completes initialization of board it
will show latest version of BMC in Console.</p></li>
<li><p>If step 9 was done after power was applied, just type “ver” at BMC
prompt.</p></li>
</ol>
<img alt="../_images/K2EVM.jpg" src="../_images/K2EVM.jpg" />
</div>
<div class="section" id="id67">
<h3>10.3.7.3. DIP Switch and Bootmode Configurations<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rev-1-0-evm-sw1-switch-bootmode-configuration">
<span id="bootmodeconfiguration"></span><h4>10.3.7.3.1. Rev 1.0 EVM SW1 switch Bootmode Configuration<a class="headerlink" href="#rev-1-0-evm-sw1-switch-bootmode-configuration" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">The table below shows the bootmode combinations for the BMC v1.0.1.3a.</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DIP Switch
(p1, p2, p3, p4)</p></th>
<th class="head"><p>Bootmode</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0000</p></td>
<td><p>ARM NAND</p></td>
</tr>
<tr class="row-odd"><td><p>0001</p></td>
<td><p>DSP no-boot</p></td>
</tr>
<tr class="row-even"><td><p>0010</p></td>
<td><p>ARM SPI</p></td>
</tr>
<tr class="row-odd"><td><p>0011</p></td>
<td><p>ARM I2C</p></td>
</tr>
<tr class="row-even"><td><p>0100</p></td>
<td><p>ARM UART</p></td>
</tr>
<tr class="row-odd"><td><p>0101</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>0110</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>0111</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>1000</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>1001</p></td>
<td><p>Reserved<sup>[1]</sup></p></td>
</tr>
<tr class="row-even"><td><p>1010</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>1011</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>1100</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>1101</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>1110</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>1111</p></td>
<td><p>Reserved</p></td>
</tr>
</tbody>
</table>
<p><sup>[1]</sup>In revision BMC v1.0.1.4 this is 10 MHz SPI NOR. This will
not continue in future versions.</p>
</div>
<div class="section" id="changing-the-bootmode">
<h4>10.3.7.3.2. Changing the Bootmode<a class="headerlink" href="#changing-the-bootmode" title="Permalink to this headline">¶</a></h4>
<p>In BMC v1.0.1.x the only way to use a bootmode that is not supported by
the DIP switch combinations is to use the ‘setboot’ and ‘fullrst’
commands. To set the bootmode use the setboot command, which takes a 32
bit value in hex as its only argument:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">setboot</span> <span class="mo">00110</span><span class="n">CE7</span>
</pre></div>
</div>
<p>Then use the fullrst command to boot the SoC into this bootmode:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">fullrst</span>
</pre></div>
</div>
<p>This process is volatile, and will have to be repeated every time the
board is power cycled.</p>
<p>In BMC v1.0.2.x the setboot command has been removed. It has been
replaced with the bootmode command, which performs various functions
depending on the way in which the command is used. The command works
with 16 bootmodes, which are representative of the various DIP switch
combinations; the bootmodes are numbered 0 - 15. Bootmodes 8 - 15 are
User-Defined, and may be altered and stored using the command (explained
below). Each bootmode consists of a title, a high value, and a low
value. The high value is currently not used. The low value is a 32 bit
value in hex, and is the same as the value previously used by setboot.
The bits of low value (and the setboot argument) are shown in the table
below).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 11%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Devstat Bit</p></th>
<th class="head"><p>Config Pin Function</p></th>
<th class="head"><p>Normal Pin Function</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>30</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>29</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>28</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>27</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>26</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>25</p></td>
<td></td>
<td><p>PACLKSEL</p></td>
<td><p>PACLKSEL</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>24</p></td>
<td></td>
<td><p>CORECLKSEL</p></td>
<td><p>CORECLKSEL</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>23</p></td>
<td></td>
<td></td>
<td></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>22</p></td>
<td></td>
<td><p>AVSIFSEL1</p></td>
<td><p>TIMI1</p></td>
<td><p>Reserved: EVM forces these bits to strap values during reset</p></td>
</tr>
<tr class="row-even"><td><p>21</p></td>
<td></td>
<td><p>AVSIFSEL0</p></td>
<td><p>TIMI0</p></td>
<td><p>Reserved: EVM forces these bits to strap values during reset</p></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td></td>
<td><p>DDR3_REMAP_EN</p></td>
<td><p>GPIO16</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td></td>
<td><p>ARM_LENDIAN</p></td>
<td><p>GPIO15</p></td>
<td><p>0 = little, 1 = is not supported; do in SW</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td></td>
<td><p>MAINPLLODSEL</p></td>
<td><p>CORESEL3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td></td>
<td><p>ARMAVSSHARED</p></td>
<td><p>CORESEL2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>16</p></td>
<td><p>BOOTMODE15</p></td>
<td><p>CORESEL2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>15</p></td>
<td><p>BOOTMODE14</p></td>
<td><p>CORESEL1</p></td>
<td><p>Element</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>14</p></td>
<td><p>BOOTMODE13</p></td>
<td><p>CORESEL0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>13</p></td>
<td><p>BOOTMODE12</p></td>
<td><p>GPIO13</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>12</p></td>
<td><p>BOOTMODE11</p></td>
<td><p>GPIO12</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>11</p></td>
<td><p>BOOTMODE10</p></td>
<td><p>GPIO11</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>10</p></td>
<td><p>BOOTMODE9</p></td>
<td><p>GPIO10</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>9</p></td>
<td><p>BOOTMODE8</p></td>
<td><p>GPIO9</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>8</p></td>
<td><p>BOOTMODE7</p></td>
<td><p>GPIO8</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>7</p></td>
<td><p>BOOTMODE6</p></td>
<td><p>GPIO7</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>6</p></td>
<td><p>BOOTMODE5</p></td>
<td><p>GPIO6</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>5</p></td>
<td><p>BOOTMODE4</p></td>
<td><p>GPIO5</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>4</p></td>
<td><p>BOOTMODE3</p></td>
<td><p>GPIO4</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>3</p></td>
<td><p>BOOTMODE2</p></td>
<td><p>GPIO3</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>2</p></td>
<td><p>BOOTMODE1</p></td>
<td><p>GPIO2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>BOOTMODE0</p></td>
<td><p>GPIO1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>LENDIAN</p></td>
<td><p>GPIO0</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>There are 5 different formats to the bootmode command:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">bootmode</span>
</pre></div>
</div>
<p>When the command is entered with no arguments the current bootmode will
be displayed.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">bootmode</span> <span class="n">all</span>
</pre></div>
</div>
<p>This format will display all 16 bootmodes and mark the currently
selected bootmode.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>bootmode #x
</pre></div>
</div>
<p>This will change the currently selected bootmode to the bootmode
represented by x. For example, if the board is booted with DIP switch
setting 1(OFF) 2(OFF) 3(OFF) 4(ON) then the bootmode would be 1 - DSP
NO-BOOT. If ‘bootmode #2’ is entered, the bootmode represented by DIP
switch setting 1(OFF) 2(OFF) 3(ON) 4(OFF) would become the current
bootmode (ARM SPI-NOR BOOT). If the ‘reboot’ command is given, the SoC
will be rebooted using this new bootmode. This format is volatile,
meaning once power is removed, the bootmode at the next power up will be
determined by the DIP switch.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">bootmode</span> <span class="n">read</span>
</pre></div>
</div>
<p>This format reads the current value of the DIP switch, and changes the
current bootmode to this value. For example, if the board is booted with
DIP switch setting 1(OFF) 2(OFF) 3(OFF) 4(ON) then the bootmode would be
1 - DSP NO-BOOT. If the DIP switch is changed to 1(OFF) 2(OFF) 3(ON)
4(OFF) and then the command ‘bootmode read’ is given, the board will
change to bootmode 2 - ARM SPI-NOR BOOT. If the ‘reboot command is then
given, the SoC will be rebooted using this new bootmode.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>bootmode [#]x hi_value lo_value title
</pre></div>
</div>
<p>This bootmode is used to alter User-Defined bootmodes (bootmodes 8 -
15). x is the index of the bootmode to be set, as such its appropriate
value range is 8 - 15, any other value will return an error. hi_value
is not currently used, and should always be set to 0. lo_value is a 32
bit hex value whose bits are representative of the table above. title is
a given string that is displayed by the bootmode command to help better
understand what the bootmode does, it has no purpose within the actual
booting of the board. The option ‘#’ is used to determine whether the
bootmode will be saved. If # is used, the bootmode will be saved to
flash, meaning the new value is tied to the DIP switch, and will remain
even if power is removed from the board. If # is not given, then the
change will be lost as soon as power is removed. Some examples with
descriptions are given below:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">bootmode</span> <span class="mi">8</span> <span class="mi">0</span> <span class="mi">112005</span> <span class="n">ARM_SPI</span>
</pre></div>
</div>
<p>bootmode 8 will be set to 112005 and given the title ARM_SPI. To boot
into this bootmode, the command ‘bootmode #8’ followed by ‘reboot’ would
be given (or changing the DIP switch to 1(ON) 2(OFF) 3(OFF) 4(OFF)
without removing power, then entering ‘bootmode read’ followed by
‘reboot’). Once power is removed, this change is lost.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>bootmode #10 0 12cba1 RANDOM_BOOT
</pre></div>
</div>
<p>bootmode 10 will be set to 12cba1 and given the title RANDOM_BOOT. This
is now the permanent value of bootmode 10; the change will persist even
if power is removed.</p>
</div>
</div>
<div class="section" id="connect-to-evmk2h-using-ccs">
<h3>10.3.7.4. Connect to EVMK2H using CCS<a class="headerlink" href="#connect-to-evmk2h-using-ccs" title="Permalink to this headline">¶</a></h3>
<p><strong>Step 1:</strong> Configure the EVM hardware</p>
<ul class="simple">
<li><p>Setup the EVM to DSP no boot using SW1 as described in the section <a class="reference internal" href="#bootmodeconfiguration">BootModeConfiguration</a></p></li>
<li><p>Connect mini USB cable to the XDS2xx MIPI adapter card marked J1 or
connect external emulator to the MIPI connector on J3</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For newer versions of CCS, a XDS200 firmware update is recommended which user can perform using instruction on the article</p>
</div>
<p>below:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://dev.ti.com/tirex/explore/node?node=AADzJ8Y-La4f7Bi5Ga0TcA__FUz-xrs__LATEST">Updating XDS2xx
Firmware</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For newer versions of CCS, a XDS200 firmware update is recommended which user can perform using instruction on</p>
</div>
<p><cite>Updating_the_XDS200_firmware &lt;http://dev.ti.com/tirex/explore/node?node=AADzJ8Y-La4f7Bi5Ga0TcA__FUz-xrs__LATEST&gt;__</cite></p>
<p><strong>Step 2:</strong> Create CCS Target configuration</p>
<p>Launch CCS on your host machine. Select View Tab and select the “Target
configuration”</p>
<img alt="../_images/New_TargetConfig.png" src="../_images/New_TargetConfig.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Create New Target configuration in CCS by selecting appropriate
emulator. For Default on board emulator select “Texas instruments XDS2xx
Debug Probe” and select the target device as 66AK2H12.</p>
<img alt="../_images/K2H_TargetConfig.png" src="../_images/K2H_TargetConfig.png" />
<p>Go to the Advanced Tab where you will see all the cores on the SOC
listed. In order to initialize the clocks and external DDR memory on the
device, users are required to use a initialization Gel scripts. To
populate the Gel Select A15_0 and then hit Browse and locate the GEL in
the CCS installation under the following path:
CCS_INSTALL/ccs_base/emulation/boards/xtcievmk2x/gel</p>
<img alt="../_images/ARM_GEL.png" src="../_images/ARM_GEL.png" />
<p>DSP developers, can also select C66x_0 and populate the DSP GEL file
that is found in the same location.</p>
<img alt="../_images/DSP_GEL.png" src="../_images/DSP_GEL.png" />
<p>Going back to the Basic Tab, Save the configuration. For additional
sanity check, you can also test connection.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Step 3:</strong> Connect to the cores</p>
<p>Right click on the target configuration and Select “Launch Target
configuration”. Wait for CCS debug View to launch and display the eight
C66x cores and 4 A15 cores.</p>
<img alt="../_images/Launch_TargetConfig.png" src="../_images/Launch_TargetConfig.png" />
<img alt="../_images/Connect_A15.png" src="../_images/Connect_A15.png" />
<p>Start by connecting to A15_0 and C66x_0. when you connect to the
cores, you will see the GEL script logs in the console window, which
indicates that device clocks, PSC and external DDR memory has been
initialized. The GEL log from target connect is provided below for
reference.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entering</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entered</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>
</pre></div>
</div>
<p>Connecting Target…</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entering</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entered</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">TCI6638K2K</span> <span class="n">GEL</span> <span class="n">file</span> <span class="n">Ver</span> <span class="n">is</span> <span class="mf">1.89999998</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entering</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entered</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Detected</span> <span class="n">PLL</span> <span class="n">bypass</span> <span class="nl">disabled</span><span class="p">:</span> <span class="n">SECCTL</span><span class="p">[</span><span class="n">BYPASS</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="n">a</span><span class="p">)</span> <span class="n">PLLCTL</span> <span class="o">=</span> <span class="mh">0x00000040</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="n">b</span><span class="p">)</span> <span class="n">PLLCTL</span> <span class="o">=</span> <span class="mh">0x00000040</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="n">c</span><span class="p">)</span> <span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">PLLM</span><span class="p">[</span><span class="n">PLLM</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0000000F</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">MAINPLLCTL0</span> <span class="o">=</span> <span class="mh">0x07000000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="n">MAINPLLCTL0</span> <span class="o">=</span> <span class="mh">0x07000000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="n">MAINPLLCTL1</span> <span class="o">=</span> <span class="mh">0x00000040</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="n">MAINPLLCTL0</span> <span class="o">=</span> <span class="mh">0x07000000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="n">SECCTL</span> <span class="o">=</span> <span class="mh">0x00090000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="n">a</span><span class="p">)</span> <span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL1_DIV3</span> <span class="o">=</span> <span class="mh">0x00008002</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL1_DIV4</span> <span class="o">=</span> <span class="mh">0x00008004</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL1_DIV7</span> <span class="o">=</span> <span class="mh">0x00000000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="n">d</span><span class="o">/</span><span class="n">e</span><span class="p">)</span> <span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="n">SECCTL</span> <span class="o">=</span> <span class="mh">0x00090000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="n">Delay</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="n">PLLCTL</span> <span class="o">=</span> <span class="mh">0x00000041</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="n">CLKIN</span> <span class="o">*</span> <span class="n">PLLM</span> <span class="o">/</span> <span class="n">PLLD</span> <span class="o">/</span> <span class="n">PLLOD</span> <span class="o">=</span> <span class="n">PLLOUT</span><span class="p">)</span><span class="o">:</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">122.879997</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">16</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">=</span> <span class="mf">983.039978</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Switching</span> <span class="n">on</span> <span class="n">ARM</span> <span class="n">Core</span> <span class="mi">0</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Switching</span> <span class="n">on</span> <span class="n">ARM</span> <span class="n">Core</span> <span class="mi">1</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Switching</span> <span class="n">on</span> <span class="n">ARM</span> <span class="n">Core</span> <span class="mi">2</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Switching</span> <span class="n">on</span> <span class="n">ARM</span> <span class="n">Core</span> <span class="mi">3</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">ARM</span> <span class="n">PLL</span> <span class="n">has</span> <span class="n">been</span> <span class="n">configured</span> <span class="p">(</span><span class="mf">125.0</span> <span class="n">MHz</span> <span class="o">*</span> <span class="mi">16</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">=</span> <span class="mf">1000.0</span> <span class="n">MHz</span><span class="p">)</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span>  <span class="n">DISABLESTAT</span> <span class="o">---&gt;</span> <span class="mh">0x00000000</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">on</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">modules</span> <span class="n">and</span> <span class="n">DSP</span> <span class="n">domains</span><span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Power</span> <span class="n">on</span> <span class="n">all</span> <span class="n">PSC</span> <span class="n">modules</span> <span class="n">and</span> <span class="n">DSP</span> <span class="n">domains</span><span class="p">...</span> <span class="n">Done</span><span class="p">.</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="nl">WARNING</span><span class="p">:</span> <span class="n">SYSCLK</span> <span class="n">is</span> <span class="n">the</span> <span class="n">input</span> <span class="n">to</span> <span class="n">the</span> <span class="n">PA</span> <span class="n">PLL</span><span class="p">.</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Completed</span> <span class="n">PA</span> <span class="n">PLL</span> <span class="n">Setup</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PAPLLCTL0</span> <span class="o">-</span> <span class="nl">before</span><span class="p">:</span> <span class="mh">0x0</span><span class="n">x09080500</span>  <span class="nl">after</span><span class="p">:</span> <span class="mh">0x0</span><span class="n">x09080500</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PAPLLCTL1</span> <span class="o">-</span> <span class="nl">before</span><span class="p">:</span> <span class="mh">0x0</span><span class="n">x00002040</span>  <span class="nl">after</span><span class="p">:</span> <span class="mh">0x0</span><span class="n">x00002040</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">begin</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">XMC</span> <span class="n">setup</span> <span class="n">complete</span><span class="p">.</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="p">(</span><span class="n">PLL2</span><span class="p">)</span> <span class="n">Setup</span> <span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="n">complete</span><span class="p">,</span> <span class="n">DDR3A</span> <span class="n">clock</span> <span class="n">now</span> <span class="n">running</span> <span class="n">at</span> <span class="mi">666</span> <span class="n">MHz</span><span class="p">.</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3A</span> <span class="n">initialization</span> <span class="n">complete</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="p">...</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3</span> <span class="n">PLL</span> <span class="n">Setup</span> <span class="n">complete</span><span class="p">,</span> <span class="n">DDR3B</span> <span class="n">clock</span> <span class="n">now</span> <span class="n">running</span> <span class="n">at</span> <span class="mi">800</span><span class="n">MHz</span><span class="p">.</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR3B</span> <span class="n">initialization</span> <span class="n">complete</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">done</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entering</span> <span class="n">A15</span> <span class="n">non</span> <span class="n">secure</span> <span class="n">mode</span> <span class="p">..</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">non</span><span class="o">-</span><span class="n">secure</span> <span class="n">access</span> <span class="n">to</span> <span class="n">cp10</span> <span class="n">and</span> <span class="n">cp11</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabling</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Enabled</span> <span class="n">SMP</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">ACTLR</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entering</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Entered</span> <span class="n">NonSecure</span> <span class="n">Mode</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">MMU</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Disabling</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Invalidate</span> <span class="n">Instruction</span> <span class="n">Caches</span>
<span class="nl">arm_A15_0</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">A15</span> <span class="n">non</span> <span class="n">secure</span> <span class="n">mode</span> <span class="n">entered</span>
</pre></div>
</div>
<p>Users can now load and run code on the cores by using Run -&gt; Load
Program. Happy Debugging !!</p>
</div>
</div>
<div class="section" id="tmdsevm6657l-evm-hardware-setup-guide">
<h2>10.3.8. TMDSEVM6657L EVM Hardware Setup Guide<a class="headerlink" href="#tmdsevm6657l-evm-hardware-setup-guide" title="Permalink to this headline">¶</a></h2>
<p>This page will walk you through setting up your
<a class="reference external" href="http://www.ti.com/tool/TMDSEVM6657">TMDSEVM6657L</a>
Evaluation Module (EVM). These guidelines also apply to the L and LE EVM
models.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the steps in this section have been updated from those used in the EVM <em>Quick Start Guide</em>.</p>
</div>
<div class="section" id="hardware-setup-overview">
<h3>10.3.8.1. Hardware Setup Overview<a class="headerlink" href="#hardware-setup-overview" title="Permalink to this headline">¶</a></h3>
<p>The picture below shows the TMDXEVM6657L EVM and the locations of
relevant switches and connectors.</p>
<img alt="../_images/TMDSEVM6657L-image.jpg" src="../_images/TMDSEVM6657L-image.jpg" />
</div>
<div class="section" id="hardware-setup-steps">
<h3>10.3.8.2. Hardware Setup Steps<a class="headerlink" href="#hardware-setup-steps" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The EVM board is sensitive to electrostatic discharges (ESD). Use a grounding strap or other device to prevent damaging the board. Be sure to connect communication cables before applying power to any equipment.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1. Attach the Ethernet cable</strong>
Using the Ethernet cable supplied, connect one end of the cable to the
Ethernet port on the EVM and the other end to your PC.</p>
<p><strong>2. Connect the JTAG interface</strong>
Use the USB to USB mini-B cable provided. Connect the USB mini-B
connector to the USB mini-B interface on the EVM and the USB connector
to your PC. This enables XDS-100 emulation and is directly useable by
CCS. If you are using a different JTAG, connect it now.</p>
<p><strong>3. Verify Endian mode in the SW3 settings</strong>
The Endian mode should be set to Little Endian. SW3 also contains the
boot device settings.</p>
<a class="reference internal image-reference" href="../_images/TMD6657LSW3.png"><img alt="../_images/TMD6657LSW3.png" src="../_images/TMD6657LSW3.png" style="width: 424.8px; height: 129.6px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>4. Verify boot mode in the SW3 and SW5 settings</strong>
The boot mode settings below enable NOR boot by loading the boot loader
from EEPROM address 0x51.</p>
<a class="reference internal image-reference" href="../_images/TMD6657LSW3-6.png"><img alt="../_images/TMD6657LSW3-6.png" src="../_images/TMD6657LSW3-6.png" style="width: 480.59999999999997px; height: 287.4px;" /></a>
<p><strong>5. Set User Switch for the demo application</strong>
The application needs an IP address. It can use either a static IP
address (pre-configured) or it can request one using DHCP. This is
controlled by setting dip switch 2 of SW9.</p>
<div class="line-block">
<div class="line">User Switch 2 ON : DHCP</div>
<div class="line-block">
<div class="line">User Switch 2 OFF: Static IP</div>
</div>
</div>
<a class="reference internal image-reference" href="../_images/TMD6678LSW9.png"><img alt="../_images/TMD6678LSW9.png" src="../_images/TMD6678LSW9.png" style="width: 135.0px; height: 241.2px;" /></a>
<p><strong>6. Attach the serial port cable</strong>
This EVM can use either a USB serial port or the standard DB-9 (use the
cable shipped with the platform). By default the shunts which control
this on the platforms are set to use the USB by default. We recommend
changing them to use the DB-9 as there are no known issues with this
approach.</p>
<a class="reference internal image-reference" href="../_images/TMDXEVM6657L-shunts.jpg"><img alt="../_images/TMDXEVM6657L-shunts.jpg" src="../_images/TMDXEVM6657L-shunts.jpg" style="width: 125.3px; height: 85.39999999999999px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference internal image-reference" href="../_images/TMDXEVM6657LCOMSEL.png"><img alt="../_images/TMDXEVM6657LCOMSEL.png" src="../_images/TMDXEVM6657LCOMSEL.png" style="width: 129.5px; height: 81.19999999999999px;" /></a>
<p>COM_SEL1: Select UART over 3-Pin Header</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the USB serial port output does not work, ensure that the cable is connected directly to a USB port on the PC/laptop rather than going through an extender or USB hub.</p>
</div>
<p><strong>7. Connect the power cable</strong></p>
<p>Connect the power cable to the EVM power jack on the board. To be ESD
safe, plug in the other end of the power cable only after you have
connected the power cord to the board. Then turn on the board.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="boot-mode-dip-switch-settings">
<h3>10.3.8.3. Boot Mode Dip Switch Settings<a class="headerlink" href="#boot-mode-dip-switch-settings" title="Permalink to this headline">¶</a></h3>
<p>The EVM supports booting image from various devices (EEPROM, NAND or
NOR) via IBL (at I2C address 0x51), I2C EEPROM (at I2C address 0x50),
and ROM Boot modes (such as Ethernet, SRIO, PCIe, SPI etc.) which
address the boot source directly from the ROM code. Below is the table
showing the boot mode dip switch settings for different boot mode that
the EVM supports:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>DIP SW3</p>
<p>(Pin1, 2, 3, 4, 5, 6, 7,
8)</p>
</th>
<th class="head"><p>DIP SW5</p>
<p>(Pin1, 2, 3, 4, 5, 6, 7,
8)</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IBL NOR boot on image 0
(default)</p></td>
<td><p>(off, off, on, off, on,
on, on,
on)<sup>1,2,3</sup></p></td>
<td><p>(on, on, on, off, on,
on, on, on)<sup>4</sup></p></td>
</tr>
<tr class="row-odd"><td><p>IBL NAND boot on image 0</p></td>
<td><p>(off, off, on, off, on,
off, on, on)</p></td>
<td><p>(on, on, on, off, on,
on, on, on)</p></td>
</tr>
<tr class="row-even"><td><p>IBL NAND boot on image 1</p></td>
<td><p>(off, off, on, off, off,
off, on, on)</p></td>
<td><p>(on, on, on, off, on,
on, on, on)</p></td>
</tr>
<tr class="row-odd"><td><p>IBL TFTP boot</p></td>
<td><p>(off, off, on, off, on,
on, off, on)</p></td>
<td><p>(on, on, on, off, on,
on, on, on)</p></td>
</tr>
<tr class="row-even"><td><p>I2C POST boot</p></td>
<td><p>(off, off, on, off, on,
on, on, on)</p></td>
<td><p>(on, on, on, on, on, on,
on, on)</p></td>
</tr>
<tr class="row-odd"><td><p>ROM SPI Boot<sup>8</sup></p></td>
<td><p>(off, on, off, off, on,
on, on, on)</p></td>
<td><p>(on, on, off, on, on,
on, on, on)</p></td>
</tr>
<tr class="row-even"><td><p>ROM SRIO Boot<sup>5</sup></p></td>
<td><p>(off, off, on, on, on,
on, off, on)</p></td>
<td><p>(off, on, on, off, off,
on, on, on)</p></td>
</tr>
<tr class="row-odd"><td><p>ROM Ethernet
Boot<sup>6</sup></p></td>
<td><p>(off, on, off, on, on,
on, on, off)</p></td>
<td><p>(on, off, on, off, off,
on, on, on)</p></td>
</tr>
<tr class="row-even"><td><p>ROM PCIE Boot<sup>7</sup></p></td>
<td><p>(off, on, on, off, on,
on, on, on)</p></td>
<td><p>(on, on, on, off, off,
on, on, on)</p></td>
</tr>
<tr class="row-odd"><td><p>No boot</p></td>
<td><p>(off, on, on, on, on,
on, on, on)</p></td>
<td><p>(on, on, on, on, on, on,
on, on)</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><strong>Note:</strong> C6657 currently does not support Image 1 for NOR boot.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>Footnotes:</strong></p>
<div class="line-block">
<div class="line">1. Pin 1 of SW3 is the endian pin, by default, it is set to off (Little Endian)</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">2. Pin 2-4 of SW3 are the boot mode pins, by default it is set to I2C boot mode (off, on, off)</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">3. Pin 5-8 of SW3 and pin 1-2 of SW5 are the boot parameter index pins for I2C boot (paramter index 0/1 for NOR boot image 0/1, parameter index 2/3 for NAND boot image 0/1, parameter index 4 for TFTP boot). By default, image 0 is programmed to offset byte address 0x0 on NOR, and 0x20000 (block 1 start address) on NAND, image 1 is programmed to offset byte address 0x4000000 on NAND.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">4. Pin 4 of SW5 is the I2C address pin (off: 0x51, on: 0x50)  for I2C boot mode</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">5. This will set the board to boot from SRIO boot mode, with reference clock at 250 MHz, data rate at 3.125 GBs, and lane setup 4-1x ports and DSP System PLL at 100 MHz.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">6. This will set the board to boot from Ethernet boot mode, with SerDes clock multiplier x 4, core PLL clock at 100 MHz.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">7. This will set the board to boot form PCIE boot mode, with PCIE in end point mode and DSP System PLL at 100 MHz.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">8. This will set the board to boot from SPI NOR via the ROM code, with boot-table contents expected in the NOR. 24bit addressing has been set.</div>
<div class="line"><br /></div>
</div>
<p>Please refer to <em>Technical_Reference_Manual</em> for the boot mode
switch settings on the board.</p>
</div>
</div>
<div class="section" id="tmdxevm6670l-evm-hardware-setup">
<h2>10.3.9. TMDXEVM6670L EVM Hardware Setup<a class="headerlink" href="#tmdxevm6670l-evm-hardware-setup" title="Permalink to this headline">¶</a></h2>
<p>This page will walk you through setting up your
<a class="reference external" href="http://www.ti.com/tool/tmdsevm6670">TMDSEVM6670L</a>
Evaluation Module (EVM). These guidelines also apply to the LE and LXE
EVM models.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the steps in this section have been updated from those used in the EVM <em>Quick Start Guide</em>.</p>
</div>
<div class="section" id="id68">
<h3>10.3.9.1. Hardware Setup Overview<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<p>The picture below shows the TMDXEVM6670L EVM and the locations of
relevant switches and connectors.</p>
<img alt="../_images/TMD6670L.jpg" src="../_images/TMD6670L.jpg" />
</div>
<div class="section" id="id69">
<h3>10.3.9.2. Hardware Setup Steps<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The EVM board is sensitive to electrostatic discharges (ESD). Use a grounding strap or other device to prevent damaging the board. Be sure to connect communication cables before applying power to any equipment.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>1. Attach the Ethernet cable</strong></div>
<div class="line">Using the Ethernet cable supplied, connect one end of the cable to the Ethernet port on the EVM and the other end to your PC.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>2. Connect the JTAG interface</strong></div>
<div class="line">Use the USB to USB mini-B cable provided. Connect the USB mini-B connector to the USB mini-B interface on the EVM and the USB connector to your PC. This enables XDS-100 emulation and is directly useable by CCS. If you are using a different JTAG, connect it now.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>3. Verify Endian mode in the SW3 settings</strong></div>
<div class="line">The Endian mode should be set to Little Endian. SW3 also contains the boot device settings.</div>
</div>
<a class="reference internal image-reference" href="../_images/TMD6678LSW3.png"><img alt="../_images/TMD6678LSW3.png" src="../_images/TMD6678LSW3.png" style="width: 330.8px; height: 165.20000000000002px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>4. Verify boot mode in the SW3 - SW6 settings</strong></div>
<div class="line">The boot mode settings below enable NOR boot by loading the boot loader from EEPROM address 0x51.</div>
</div>
<a class="reference internal image-reference" href="../_images/TMD6678LSW3-6.png"><img alt="../_images/TMD6678LSW3-6.png" src="../_images/TMD6678LSW3-6.png" style="width: 682.8000000000001px; height: 360.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>5. Set User Switch 2 for the demo application</strong></div>
<div class="line">The application needs an IP address. It can use either a static IP address (pre-configured) or it can request one using DHCP. This is controlled by setting User Switch 2 to ON for DHCP and OFF for Static.  See SW9.</div>
</div>
<img alt="../_images/TMD6670LSW9.png" src="../_images/TMD6670LSW9.png" />
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>6. Attach the serial port cable</strong></div>
<div class="line">This EVM can use either a USB serial port or the standard DB-9 (use the cable shipped with the platform). By default the shunts which control this on the platforms are set to use the USB by default. We recommend changing them to use the DB-9 as there are no known issues with this approach.</div>
</div>
<div class="line-block">
<div class="line">To change the shunts refer to the picture below.</div>
</div>
<img alt="../_images/TMD6670LShunts.jpg" src="../_images/TMD6670LShunts.jpg" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the USB serial port output does not work, ensure that the cable is connected directly to a USB port on the PC/laptop rather than going through an extender or USB hub.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>7. Connect the power cable</strong></div>
<div class="line">Connect the power cable to the EVM power jack on the board. To be ESD safe, plug in the other end of the power cable only after you have connected the power cord to the board. Then turn on the board.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id70">
<h3>10.3.9.3. Boot Mode Dip Switch Settings<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<p>The EVM supports booting image from various devices (EEPROM, NAND or
NOR) via IBL, it also supports ROM Boot modes, such as Ethernet, SRIO,
PCIe, etc. Below is the table showing the boot mode dip switch settings
for different boot mode that the EVM supports:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>DIP SW3</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
<th class="head"><p>DIP SW4</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
<th class="head"><p>DIP SW5</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
<th class="head"><p>DIP SW6</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IBL NOR boot
on image 0
(default)</p></td>
<td><p>(off, off, on,
off)<sup>1,
2</sup></p></td>
<td><p>(on, on, on,
on)<sup>3</sup></p></td>
<td><p>(on, on, on,
off)<sup>4</sup></p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>IBL NOR boot
on image 1</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(off, on, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>IBL NAND boot
on image 0</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(on, off, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>IBL NAND boot
on image 1</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(off, off, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>IBL TFTP boot</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(on, on, off,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>I2C POST boot</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>ROM SPI
Boot<sup>8</sup></p></td>
<td><p>(off, on, off,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, off,
on)</p></td>
<td><p>(off, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>ROM SRIO
Boot<sup>5</sup></p></td>
<td><p>(off, off, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, off, on,
off)</p></td>
<td><p>(off, off, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>ROM Ethernet
Boot<sup>6</sup></p></td>
<td><p>(off, on, off,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, off, on,
off)</p></td>
<td><p>(off, off, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>ROM PCIE
Boot<sup>7</sup></p></td>
<td><p>(off, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(off, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>No boot</p></td>
<td><p>(off, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Footnotes:</strong></p>
<div class="line-block">
<div class="line">1. Pin 1 of SW3 is the endian pin, by default, it is set to off (Little Endian)</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">2. Pin 2-4 of SW3 are the boot mode pins, by default it is set to I2C boot mode (off, on, off)</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">3. Pin 1-4 of SW4 and pin 1-2 of SW5 are the boot parameter index pins for I2C boot (paramter index 0/1 for NOR boot image 0/1, parameter index 2/3 for NAND boot image 0/1, parameter index 4 for TFTP boot). By default, image 0 is programmed to offset byte address 0x0 on NOR, and 0x4000 (block 1 start address) on NAND, image 1 is programmed to offset byte address 0xA00000 on NOR, and 0x2000000 on NAND.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">4. Pin 4 of SW5 is the I2C address pin (off: 0x51, on: 0x50)  for I2C boot mode</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">5. This will set the board to boot from SRIO boot mode, with reference clock at 250 MHz, data rate at 3.125 GBs, and lane setup 4-1x ports and DSP System PLL at 122.88 MHz.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">6. This will set the board to boot from Ethernet boot mode, with SerDes clock multiplier x 5, DSP System PLL clock at 122.88 MHz.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">7. This will set the board to boot form PCIE boot mode, with PCIE in end point mode and DSP System PLL at 100 MHz.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">8. This will set the board to boot from SPI NOR via the ROM code, with boot-table contents expected in the NOR. 24bit addressing has been set.</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p>Please refer to
<a class="reference external" href="http://www.advantech.com/Support/TI-EVM/6670le_sd.aspx">Technical_Reference_Manual</a>
for the boot mode switch settings on the board.</p>
</div>
</div>
<div class="section" id="tmdxevm6678l-evm-hardware-setup-guide">
<h2>10.3.10. TMDXEVM6678L EVM Hardware Setup Guide<a class="headerlink" href="#tmdxevm6678l-evm-hardware-setup-guide" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This page will walk you through setting up your <a class="reference external" href="http://www.ti.com/tool/TMDSEVM6678">TMDXEVM6678L</a>
Evaluation Module (EVM). These guidelines also apply to the LE and LXE EVM models.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the steps in this section have been updated from those used in the EVM <em>Quick Start Guide</em>.</p>
</div>
<div class="section" id="id71">
<h3>10.3.10.1. Hardware Setup Overview<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<p>The picture below shows the TMDXEVM6678L EVM and the locations of
relevant switches and connectors.</p>
<a class="reference internal image-reference" href="../_images/TMDXEVM6678L-image.jpg"><img alt="../_images/TMDXEVM6678L-image.jpg" src="../_images/TMDXEVM6678L-image.jpg" style="width: 564.6px; height: 343.2px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the following picture for the alpha/beta Lite EVM boards.</p>
</div>
<img alt="../_images/TMD6678L.jpg" src="../_images/TMD6678L.jpg" />
</div>
<div class="section" id="id72">
<h3>10.3.10.2. Hardware Setup Steps<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<p><strong>Warning</strong>: The EVM board is sensitive to electrostatic
discharges (ESD). Use a grounding strap or other device to prevent
damaging the board. Be sure to connect communication cables before
applying power to any equipment.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>1. Attach the Ethernet cable</strong></div>
</div>
<p>Using the Ethernet cable supplied, connect one end of the cable to the
Ethernet port on the EVM and the other end to your PC.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>2. Connect the JTAG interface</strong></div>
</div>
<p>Use the USB to USB mini-B cable provided. Connect the USB mini-B
connector to the USB mini-B interface on the EVM and the USB connector
to your PC. This enables XDS-100 emulation and is directly useable by
CCS. If you are using a different JTAG, connect it now.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>3. Verify Endian mode in the SW3 settings</strong></div>
</div>
<p>The Endian mode should be set to Little Endian. SW3 also contains the
boot device settings.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference internal image-reference" href="../_images/TMD6678LSW3.png"><img alt="../_images/TMD6678LSW3.png" src="../_images/TMD6678LSW3.png" style="width: 330.8px; height: 165.20000000000002px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>4. Verify boot mode in the SW3 - SW6 settings</strong></div>
</div>
<p>The boot mode settings below enable NOR boot by loading the boot loader
from EEPROM address 0x51.</p>
<a class="reference internal image-reference" href="../_images/TMD6678LSW3-6.png"><img alt="../_images/TMD6678LSW3-6.png" src="../_images/TMD6678LSW3-6.png" style="width: 682.8000000000001px; height: 360.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>5. Set User Switch for the demo application</strong></div>
</div>
<p>The application needs an IP address. It can use either a static IP
address (pre-configured) or it can request one using DHCP. This is
controlled by setting dip switch 2 of SW9.</p>
<div class="line-block">
<div class="line">User Switch 2 ON : DHCP</div>
<div class="line">User Switch 2 OFF: Static IP</div>
</div>
<a class="reference internal image-reference" href="../_images/TMD6678LSW9.png"><img alt="../_images/TMD6678LSW9.png" src="../_images/TMD6678LSW9.png" style="width: 112.5px; height: 201.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>6. Attach the serial port cable</strong></div>
</div>
<p>This EVM can use either a USB serial port or the standard DB-9 (use the
cable shipped with the platform). By default the shunts which control
this on the platforms are set to use the USB by default. We recommend
changing them to use the DB-9 as there are no known issues with this
approach.</p>
<img alt="../_images/TMDXEVM6678L-shunts.jpg" src="../_images/TMDXEVM6678L-shunts.jpg" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the USB serial port output does not work, ensure that the cable is connected directly to a USB port on the PC/laptop rather than going through an extender or USB hub.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the shunts on the alpha/beta Lite EVM, please refer to the picture below for the setting</p>
</div>
<img alt="../_images/TMD6678LShunts.jpg" src="../_images/TMD6678LShunts.jpg" />
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>7. Connect the power cable</strong></div>
</div>
<p>Connect the power cable to the EVM power jack on the board. To be ESD
safe, plug in the other end of the power cable only after you have
connected the power cord to the board. Then turn on the board.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id73">
<h3>10.3.10.3. Boot Mode Dip Switch Settings<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<p>The EVM supports booting image from various devices (EEPROM, NAND or
NOR) via IBL (at I2C address 0x51), I2C EEPROM (at I2C address 0x50),
and ROM Boot modes (such as Ethernet, SRIO, PCIe, SPI etc.) which
address the boot source directly from the ROM code. Below is the table
showing the boot mode dip switch settings for different boot mode that
the EVM supports:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>DIP SW3</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
<th class="head"><p>DIP SW4</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
<th class="head"><p>DIP SW5</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
<th class="head"><p>DIP SW6</p>
<p>(Pin1, 2, 3,
4)</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IBL NOR boot
on image 0
(default)</p></td>
<td><p>(off, off, on,
off)<sup>1,
2</sup></p></td>
<td><p>(on, on, on,
on)<sup>3</sup></p></td>
<td><p>(on, on, on,
off)<sup>4</sup></p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>IBL NOR boot
on image 1</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(off, on, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>IBL NAND boot
on image 0</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(on, off, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>IBL NAND boot
on image 1</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(off, off, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>IBL TFTP boot</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(on, on, off,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>I2C POST boot</p></td>
<td><p>(off, off, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>ROM SPI
Boot<sup>8</sup></p></td>
<td><p>(off, on, off,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, off,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>ROM SRIO
Boot<sup>5</sup></p></td>
<td><p>(off, off, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, off, on,
off)</p></td>
<td><p>(off, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>ROM Ethernet
Boot<sup>6</sup></p></td>
<td><p>(off, on, off,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(on, on, off,
off)</p></td>
<td><p>(off, on, on,
on)</p></td>
</tr>
<tr class="row-odd"><td><p>ROM PCIE
Boot<sup>7</sup></p></td>
<td><p>(off, on, on,
off)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
off)</p></td>
<td><p>(off, on, on,
on)</p></td>
</tr>
<tr class="row-even"><td><p>No boot</p></td>
<td><p>(off, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
<td><p>(on, on, on,
on)</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><strong>Footnotes:</strong></div>
</div>
<p>1. Pin 1 of SW3 is the endian pin, by default, it is set to off (Little
Endian)</p>
<p>2. Pin 2-4 of SW3 are the boot mode pins, by default it is set to I2C
boot mode (off, on, off)</p>
<p>3. Pin 1-4 of SW4 and pin 1-2 of SW5 are the boot parameter index pins
for I2C boot (paramter index 0/1 for NOR boot image 0/1, parameter index
2/3 for NAND boot image 0/1, parameter index 4 for TFTP boot). By
default, image 0 is programmed to offset byte address 0x0 on NOR, and
0x4000 (block 1 start address) on NAND, image 1 is programmed to offset
byte address 0xA00000 on NOR, and 0x2000000 on NAND.</p>
<p>4. Pin 4 of SW5 is the I2C address pin (off: 0x51, on: 0x50)  for I2C
boot mode</p>
<p>5. This will set the board to boot from SRIO boot mode, with reference
clock at 312.5 MHz, data rate at 3.125 GBs, and lane setup 4-1x ports
and DSP System PLL at 100 MHz.</p>
<p>6. This will set the board to boot from Ethernet boot mode, with SerDes
clock multiplier x 4, core PLL clock at 100 MHz.</p>
<p>7. This will set the board to boot form PCIE boot mode, with PCIE in end
point mode and DSP System PLL at 100 MHz.</p>
<p>8. This will set the board to boot from SPI NOR via the ROM code, with
boot-table contents expected in the NOR. 24bit addressing has been set.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Please refer to <a class="reference external" href="http://www.advantech.com/Support/TI-EVM/6678le_sd.aspx">Technical Reference Manual</a>
for the boot mode switch settings on the board.</p>
</div>
</div>
<div class="section" id="omap-l138-c6748-lcdk-hardware-setup">
<h2>10.3.11. OMAP-L138/C6748 LCDK Hardware Setup<a class="headerlink" href="#omap-l138-c6748-lcdk-hardware-setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id74">
<h3>10.3.11.1. Overview<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<p>The OMAP-L138/C6748 low-cost development kit (LCDK) enables fast and easy software and hardware development of everyday applications that require real-time signal processing
and control functional, including industrial control, medical diagnostics and communications.</p>
<div class="section" id="id75">
<h4>10.3.11.1.1. Hardware<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<p>Information on the LCDK hardware, including DIP switches, LEDs, and user bottons, can be found in the LCDK User’s Guide at the following link.</p>
<p><a class="reference external" href="http://www.ti.com/lit/ug/spruil2/spruil2.pdf">OMAP-L138/C6748 Low-Cost Development Kit User’s Guide</a></p>
</div>
<div class="section" id="powering-the-lcdk">
<h4>10.3.11.1.2. Powering the LCDK<a class="headerlink" href="#powering-the-lcdk" title="Permalink to this headline">¶</a></h4>
<p>The board can be powered with 5V input through the J1 barrel connector.</p>
</div>
<div class="section" id="id76">
<h4>10.3.11.1.3. UART Connection<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p>Connect a mini-USB cable between UART port (J3) of the EVM and the host PC. Open a serial console (e.g. Tera Term) on the host PC and configure the serial port as follows.</p>
<blockquote>
<div><ul class="simple">
<li><p>Baud rate - 115200</p></li>
<li><p>Data length - 8 bit</p></li>
<li><p>Parity - None</p></li>
<li><p>Stop bits - 1</p></li>
<li><p>Flow control - None</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="linux-quick-start-guide">
<h3>10.3.11.2. Linux Quick Start Guide<a class="headerlink" href="#linux-quick-start-guide" title="Permalink to this headline">¶</a></h3>
<p>The quick start guide for booting Linux on the Arm core can be found at the following link.</p>
<p><a class="reference external" href="http://www.ti.com/lit/ml/sprw268a/sprw268a.pdf">OMAP-L138 DSP+ARM9™ Development Kit (LCDK) Quick Start Guide</a></p>
</div>
<div class="section" id="connecting-the-lcdk-to-code-composer-studio">
<h3>10.3.11.3. Connecting the LCDK to Code Composer Studio<a class="headerlink" href="#connecting-the-lcdk-to-code-composer-studio" title="Permalink to this headline">¶</a></h3>
<p>The following section describes how to connect to the LCDK and load code via CCS for application development and debug.</p>
<div class="section" id="id77">
<h4>10.3.11.3.1. Hardware Setup<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Set the SW1 DIP switches to UART boot mode as shown in the <a href="#id89"><span class="problematic" id="id90">`DIP Switches`_</span></a> section.</p></li>
<li><p>Connect an external emulator to the J6 header.</p></li>
<li><p>Power on the LCDK using the J1 barrel connector.</p></li>
</ul>
</div>
<div class="section" id="software-setup">
<h4>10.3.11.3.2. Software Setup<a class="headerlink" href="#software-setup" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Code Composer Studio IDE - <a class="reference external" href="http://www.ti.com/tool/CCSTUDIO">Download</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CCS versions 9.0 and later are 64-bit applications. Due to this, 32-bit emulators like the Spectrum Digital XDS510USB emulator are not supported with CCS versions 9.0 and later.</p>
</div>
<ul class="simple">
<li><p>Processor SDK RTOS for OMAP-L138/C6748 - <a class="reference external" href="http://www.ti.com/tool/PROCESSOR-SDK-OMAPL138">Download</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please check the <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_release_specific.html#release-notes">Processor SDK Release Notes</a> for the recommended CCS version.</p>
</div>
<ul>
<li><p>Setup the software environment as described in the “Download and install software” section of the <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_overview.html#download-and-install-software">Processor SDK RTOS Getting Started Guide</a></p></li>
<li><p>Build an example. Below are some suggested examples to get started with.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_examples_demos.html#id53">No OS (Bare Metal) Example</a></p></li>
<li><p><a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_examples_demos.html#dsp-c674x">TI-RTOS Kernel Example</a></p></li>
<li><p><a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_device_drv.html#id22">GPIO LED Blink Example</a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="creating-a-target-configuration-file">
<h4>10.3.11.3.3. Creating a Target Configuration File<a class="headerlink" href="#creating-a-target-configuration-file" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>In CCS, navigate to View -&gt; Target Configurations.</p></li>
<li><p>In the Target Configurations window, right-click and select “New Target Configuration.”</p></li>
<li><p>For Connection, select your external emulator.</p></li>
<li><p>For Board or Device, select LCDKC6748 or LCDKOMAPL138 as shown in the following image, and click Save.</p></li>
</ul>
<img alt="../_images/lcdk_targetConfig.png" src="../_images/lcdk_targetConfig.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Navigate to the Advanced tab and ensure the GEL file is loaded for the ARM9_0 core (OMAP-L138) or C674X_0 core (C6748).</p></li>
</ul>
<p><strong>OMAP-L138 LCDK GEL File:</strong></p>
<a class="reference internal image-reference" href="../_images/lcdk_omapl138_gel.png"><img alt="../_images/lcdk_omapl138_gel.png" src="../_images/lcdk_omapl138_gel.png" style="width: 1131.0px; height: 551.0px;" /></a>
<p><strong>C6748 LCDK GEL File:</strong></p>
<a class="reference internal image-reference" href="../_images/lcdk_c6748_gel.png"><img alt="../_images/lcdk_c6748_gel.png" src="../_images/lcdk_c6748_gel.png" style="width: 1137.0px; height: 548.0px;" /></a>
</div>
<div class="section" id="connecting-to-target-and-loading-running-program">
<h4>10.3.11.3.4. Connecting to Target and Loading/Running Program<a class="headerlink" href="#connecting-to-target-and-loading-running-program" title="Permalink to this headline">¶</a></h4>
<p><strong>Connecting to Target</strong></p>
<ul class="simple">
<li><p>In CCS, navigate to the Target Configurations window.</p></li>
<li><p>Right-click on the newly created target configuration and select “Launch Selected Configuration.”</p></li>
<li><p>Right-click on the ARM9_0 core for OMAP-L138 or C674X_0 core for C6748, and click “Connect Target.”</p></li>
</ul>
<p>The following GEL outputs should appear in the CCS Console view.</p>
<p><strong>OMAP-L138 LCDK:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">Target</span> <span class="n">Connected</span><span class="p">.</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="o">---------------------------------------------</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">Memory</span> <span class="n">Map</span> <span class="n">Cleared</span><span class="p">.</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="o">---------------------------------------------</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">Memory</span> <span class="n">Map</span> <span class="n">Setup</span> <span class="n">Complete</span><span class="p">.</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="o">---------------------------------------------</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">PSC</span> <span class="n">Enable</span> <span class="n">Complete</span><span class="p">.</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="o">---------------------------------------------</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">PLL0</span> <span class="n">init</span> <span class="n">done</span> <span class="k">for</span> <span class="nl">Core</span><span class="p">:</span><span class="mi">300</span><span class="n">MHz</span><span class="p">,</span> <span class="nl">EMIFA</span><span class="p">:</span><span class="mi">25</span><span class="n">MHz</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">DDR</span> <span class="n">initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">....</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">PLL1</span> <span class="n">init</span> <span class="n">done</span> <span class="k">for</span> <span class="nl">DDR</span><span class="p">:</span><span class="mi">150</span><span class="n">MHz</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">Using</span> <span class="n">DDR2</span> <span class="n">settings</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">DDR2</span> <span class="n">init</span> <span class="k">for</span> <span class="mi">150</span> <span class="n">MHz</span> <span class="n">is</span> <span class="n">done</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="o">---------------------------------------------</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="n">DSP</span> <span class="n">Wake</span> <span class="n">Complete</span><span class="p">.</span>
<span class="nl">ARM9_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>         <span class="o">---------------------------------------------</span>
</pre></div>
</div>
<p><strong>C6748 LCDK:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Target</span> <span class="n">Connected</span><span class="p">.</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="o">---------------------------------------------</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Memory</span> <span class="n">Map</span> <span class="n">Cleared</span><span class="p">.</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="o">---------------------------------------------</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Memory</span> <span class="n">Map</span> <span class="n">Setup</span> <span class="n">Complete</span><span class="p">.</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="o">---------------------------------------------</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">PSC</span> <span class="n">Enable</span> <span class="n">Complete</span><span class="p">.</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="o">---------------------------------------------</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">PLL0</span> <span class="n">init</span> <span class="n">done</span> <span class="k">for</span> <span class="nl">Core</span><span class="p">:</span><span class="mi">300</span><span class="n">MHz</span><span class="p">,</span> <span class="nl">EMIFA</span><span class="p">:</span><span class="mi">25</span><span class="n">MHz</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">DDR</span> <span class="n">initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">....</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">PLL1</span> <span class="n">init</span> <span class="n">done</span> <span class="k">for</span> <span class="nl">DDR</span><span class="p">:</span><span class="mi">150</span><span class="n">MHz</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">Using</span> <span class="n">DDR2</span> <span class="n">settings</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="n">DDR2</span> <span class="n">init</span> <span class="k">for</span> <span class="mi">150</span> <span class="n">MHz</span> <span class="n">is</span> <span class="n">done</span>
<span class="nl">C674X_0</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span>        <span class="o">---------------------------------------------</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Loading Program</strong></p>
<ul class="simple">
<li><p>Select the desired core (ARM9_0 or C674X_0).</p></li>
<li><p>Go to “Run -&gt; Load -&gt; Load Program.”</p></li>
<li><p>Click “Browse” to choose a prebuilt .out or click “Browse project..” to choose a .out from an open project.</p></li>
<li><p>Select the desired .out and click OK.</p></li>
</ul>
<p><strong>Running Program</strong></p>
<ul class="simple">
<li><p>Go to “Run -&gt; Resume”</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="omap-l137-c6747-evm-hardware-setup-guide">
<h2>10.3.12. OMAP-L137/C6747 EVM Hardware Setup Guide<a class="headerlink" href="#omap-l137-c6747-evm-hardware-setup-guide" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-the-hardware">
<h3>10.3.12.1. Setting up the Hardware<a class="headerlink" href="#setting-up-the-hardware" title="Permalink to this headline">¶</a></h3>
<p>Follow the steps below to setup the hardware and enable communication
with the EVM.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The EVM is sensitive to static discharges. Use a grounding strap or other device to prevent damaging the board. Be sure to connect communication cables before applying power to any equipment.</p>
</div>
<ul class="simple">
<li><p>Verify that the EVM board’s SW2 (Boot) switch is correctly set. The
setting to boot from SPI0 Flash are:</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Pin #</strong></p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
<th class="head"><p>3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Position</strong></p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All boot switch modes can be found in the EVM Technical Reference Manual at the link provided under the Additional Resources section.</p>
</div>
<ul class="simple">
<li><p>If you want to use networking, connect the Ethernet cable to one of
the Ethernet ports on the EVM board and to an Ethernet network port.</p></li>
<li><p>Connect the USB cable provided in the kit to the on-board emulation
USB port on the board (EMBED USB). Connect the other end to a
computer with CCS installed.</p></li>
<li><p>If you plan to use UART port for a console window, connect the RS-232
null modem cable to the EVM UART port and to the COM port of your
host workstation.</p></li>
<li><p>Connect the power cable to the EVM power jack on the board. To be ESD
safe, plug in the other end of the power cable only after you have
connected the power cord to the board.</p></li>
</ul>
</div>
<div class="section" id="connecting-to-a-console-window">
<h3>10.3.12.2. Connecting to a Console Window<a class="headerlink" href="#connecting-to-a-console-window" title="Permalink to this headline">¶</a></h3>
<p>You can open a console window that allows you to watch boot and serial
console messages by following these steps:</p>
<ol class="arabic simple">
<li><p>Connect a serial cable between the serial port on the EVM and the
serial port (for example COM1) on a PC.</p></li>
<li><p>Run a terminal session (such as Minicom on Linux or TeraTerm on
Windows) on the workstation and configure it to connect to that
serial port with the following characteristics:</p>
<ul class="simple">
<li><p>Bits per Second: 115200</p></li>
<li><p>Data Bits: 8</p></li>
<li><p>Parity: None</p></li>
<li><p>Stop Bits: 1</p></li>
<li><p>Flow Control: None</p></li>
<li><p>Transmit delay: 0 msec/char, 100 msec/line</p></li>
</ul>
</li>
</ol>
<p><strong>For Linux</strong></p>
<ol class="arabic simple" start="3">
<li><p>When you power on the EVM, you will see boot sequence messages (If
you have a boot loader in flash). You can press a key to interrupt the boot sequence and type
commands in the U-Boot command shell.</p></li>
</ol>
</div>
<div class="section" id="connecting-to-ccs">
<h3>10.3.12.3. Connecting to CCS<a class="headerlink" href="#connecting-to-ccs" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CCS versions 9.0 and later are 64-bit applications. Due to this, the on-board Spectrum Digital XDS510USB emulator is not supported. The alternatives are to either stay with CCS 8.3 or earlier, or use an external emulator with CCS 9.0. For example, the low cost XDS110 emulator for $99 (<a class="reference external" href="http://www.ti.com/tool/TMDSEMU110-U">http://www.ti.com/tool/TMDSEMU110-U</a>).</p>
</div>
<div class="section" id="id78">
<h4>10.3.12.3.1. Target Configuration<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Open CCS and select New-&gt;Target Configuration File.</p></li>
<li><p>Specify a file name or use default.</p></li>
<li><p>Select “Spectrum Digital XDS510USB Emulator” as Connection. <strong>If using CCS 9.0 or later, you will need an external emulator as noted above.</strong></p></li>
</ul>
<img alt="../_images/OMAPL137_targetConfig.png" src="../_images/OMAPL137_targetConfig.png" />
<ul class="simple">
<li><p>Check “OMAPL137” or “C6747” as Device and save.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you don’t see “OMAPL137”, ensure that you have installed CCS and selected Single Core DSP devices in the installation.</p>
</div>
<ul class="simple">
<li><p>Open Target Configuration view in CCS by selecting “Window -&gt; Show
View -&gt; Target Configurations” from menu.</p></li>
<li><p>Select newly created configuration, right-click on it and set it as
default.</p></li>
<li><p>Launch Target configuration file</p></li>
</ul>
</div>
<div class="section" id="connect-target-and-load-run-program">
<h4>10.3.12.3.2. Connect Target and Load/Run Program<a class="headerlink" href="#connect-target-and-load-run-program" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Connecting Target</p>
<ul>
<li><p>Select “View -&gt; Debug” from menu to start a debug session.</p></li>
<li><p>CCS will switch to Debug perspective with devices DSP and ARM.</p></li>
<li><p>Select device to connect and then go to “Run -&gt; Connect Target”
from menu.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OMAPL137 is a DSP boot master device. Hence to connect to the ARM, you need to connect the DSP first (even if you do not load anything to DSP), then connect ARM (Reason: DSP’s GEL file enables and wakes up the ARM).</p>
</div>
<ul class="simple">
<li><p>Loading Program</p>
<ul>
<li><p>Choose desired device (DSP or ARM).</p></li>
<li><p>Go to “Run -&gt; Load -&gt; Load Program” from menu.</p></li>
<li><p>Click “Browse” to choose a prebuilt *.out or click “Browse project..” to choose *.out of the open projects.</p></li>
<li><p>Choose desired *.out and click OK.</p></li>
</ul>
</li>
<li><p>Running Program</p>
<ul>
<li><p>Go to “Run -&gt; Resume”</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="additional-references">
<h4>10.3.12.3.3. Additional References<a class="headerlink" href="#additional-references" title="Permalink to this headline">¶</a></h4>
<p>EVM Design and Support Files: <a class="reference external" href="http://support.spectrumdigital.com/boards/evmomapl137/revg/">http://support.spectrumdigital.com/boards/evmomapl137/revg/</a></p>
</div>
</div>
</div>
<div class="section" id="am335x-ice-evm-hardware-setup">
<h2>10.3.13. AM335x ICE EVM Hardware Setup<a class="headerlink" href="#am335x-ice-evm-hardware-setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id79">
<h3>10.3.13.1. Description<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<p>The low-cost ICE EVM can be used for evaluation and development of
industrial communication type applications. It has been equipped with a
TI AM3359 processor and a defined set of features to allow the user to
experience specifically industrial communication solutions using serial
or Ethernet based interfaces. It is not intended as a generic
development platform as some of the features and interfaces supplied by
the AM335x are not accessible from the ICE board. Using standard
interfaces, the ICE board may interface to other processors or systems
and act as a communication gateway in this case. In addition it can
directly operate as a standard remote I/O system or simple sensor
connected to an industrial communication network. The embedded emulation
logic allows emulation and debug using standard development tools such
as TI’s Code Composer Studio by just using the supplied USB cable.</p>
</div>
<div class="section" id="id80">
<h3>10.3.13.2. EVM Layout and Key Components<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/ICE_V2_marked.png"><img alt="../_images/ICE_V2_marked.png" src="../_images/ICE_V2_marked.png" style="width: 415.0px; height: 261.0px;" /></a>
</div>
<div class="section" id="id81">
<h3>10.3.13.3. Quick Start Guide<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<p>This section details how to quickly setup the AM3359 ICE.</p>
<p>1. Unbox the board and identify the various components and connectors
shown above.</p>
<p>2. Connect the power cable to the power jack on the board and plug it
into an AC power source.</p>
<a class="reference internal image-reference" href="../_images/ICE335924V.png"><img alt="../_images/ICE335924V.png" src="../_images/ICE335924V.png" style="width: 320.5px; height: 214.0px;" /></a>
<p>Once powered on, the POWER ON LED (D16) and Industrial Output LEDs
(D6-D10, D12, D14, and D15) will turn on.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When powering the AM335x ICE, always use the supplied power supply (CUI/V-Infinity Part Number EMSA240075) or equivalent model having output voltage of +24VDC and output current max 0.75 Amps and that complies with applicable regional safety standards such as (by example) UL, CSA, VDE, CCC, PSE, etc.</p>
</div>
<p>3. Connect the microUSB cable to the USB JTAG/Console port on the ICE board and connect to the USB on the host. Connect an Ethernet cable to
ETH0 if network connectivity is required.</p>
<a class="reference internal image-reference" href="../_images/ICE3359USB.png"><img alt="../_images/ICE3359USB.png" src="../_images/ICE3359USB.png" style="width: 320.0px; height: 214.0px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The serial port will not show up on the host PC until the board is powered on.</p>
</div>
<p>4. Users can now connect to UART and the on-board XDS100v2 emulator from
the host machine. For UART port connections, set the serial terminal
software baud rate to 115200 to view the log messages. Connecting to the
target using the on-board emulator is discussed in the section below.</p>
<a class="reference internal image-reference" href="../_images/Serial_connect.jpg"><img alt="../_images/Serial_connect.jpg" src="../_images/Serial_connect.jpg" style="width: 310.0px; height: 186.0px;" /></a>
<a class="reference internal image-reference" href="../_images/Baudrate.jpg"><img alt="../_images/Baudrate.jpg" src="../_images/Baudrate.jpg" style="width: 243.0px; height: 206.5px;" /></a>
</div>
<div class="section" id="boot-configuration">
<h3>10.3.13.4. Boot Configuration<a class="headerlink" href="#boot-configuration" title="Permalink to this headline">¶</a></h3>
<p>The various boot configurations are discussed in the <a class="reference external" href="http://www.ti.com/lit/spruip3">Hardware User
Guide.</a></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="connecting-the-am3359-ice-to-code-composer-studio">
<h3>10.3.13.5. Connecting the AM3359 ICE to Code Composer Studio<a class="headerlink" href="#connecting-the-am3359-ice-to-code-composer-studio" title="Permalink to this headline">¶</a></h3>
<p>1. Download Code Composer Studio and the AM335x Sitara Device Support
package as described in the <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_overview.html#code-composer-studio">Processor SDK RTOS Getting Started
Guide.</a></p>
<p>2. Connect the AM3359 ICE as described above in the
Quick Start Guide.</p>
<p>3. Launch CCS and create a new target configuration file
(File-&gt;New-&gt;Target Configuration File) as shown below. Select the Texas
Instruments XDS100v2 USB Debug Probe and the ICE_AM3359 as shown below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the ICE_AM3359 target is not listed, make sure the latest Sitara Device Support package is installed by going to Help-&gt;Check for Updates.</p>
</div>
<a class="reference internal image-reference" href="../_images/ICE3359TargetConfig.png"><img alt="../_images/ICE3359TargetConfig.png" src="../_images/ICE3359TargetConfig.png" style="width: 770.5px; height: 385.5px;" /></a>
<p>4. Click Save to save the target configuration. Then press Test
Connection to test the connection. If successful, a message should be
seen similar to the one below.</p>
<a class="reference internal image-reference" href="../_images/ICE3359Test.png"><img alt="../_images/ICE3359Test.png" src="../_images/ICE3359Test.png" style="width: 236.0px; height: 55.0px;" /></a>
<p>5. Launch the target configuration and connect
to the ARM Cortex-A8.</p>
<p>The complete GEL log from the Cortex A8 is provided below.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AM3359_ICE</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">..........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AM335x</span> <span class="n">ALL</span> <span class="n">PLL</span> <span class="n">Config</span> <span class="k">for</span> <span class="n">OPP</span> <span class="o">==</span> <span class="n">OPP100</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Input</span> <span class="n">Clock</span> <span class="n">Read</span> <span class="n">from</span> <span class="n">SYSBOOT</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">14</span><span class="p">]</span><span class="o">:</span>  <span class="mi">24</span><span class="n">MHz</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Going</span> <span class="n">to</span> <span class="n">Bypass</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Bypassed</span><span class="p">,</span> <span class="n">changing</span> <span class="n">values</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Locking</span> <span class="n">ARM</span> <span class="n">PLL</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Core</span> <span class="n">Bypassed</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Now</span> <span class="n">locking</span> <span class="n">Core</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Core</span> <span class="n">locked</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">Bypassed</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">Locked</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">Bypassed</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">Locked</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DISP</span> <span class="n">PLL</span> <span class="n">Config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">..........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DISP</span> <span class="n">PLL</span> <span class="n">Config</span> <span class="n">is</span> <span class="n">DONE</span> <span class="p">..........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AM335x</span> <span class="n">ALL</span> <span class="n">ADPLL</span> <span class="n">Config</span> <span class="k">for</span> <span class="n">OPP</span> <span class="o">==</span> <span class="n">OPP100</span> <span class="n">is</span> <span class="n">Done</span> <span class="p">.........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AM335x</span> <span class="n">DDR3</span> <span class="n">EMIF</span> <span class="n">and</span> <span class="n">PHY</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">PRCM</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">PRCM</span> <span class="n">Done</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">Configuration</span> <span class="n">in</span> <span class="n">progress</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Waiting</span> <span class="k">for</span> <span class="n">VTP</span> <span class="n">Ready</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">VTP</span> <span class="n">is</span> <span class="n">Ready</span><span class="o">!</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">CMD0</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">CMD1</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">CMD2</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">DATA0</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">DATA1</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">IO</span> <span class="n">control</span> <span class="n">registers</span><span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">Timing</span> <span class="k">register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">Timing</span> <span class="k">register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">done</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PHY</span> <span class="n">is</span> <span class="n">READY</span><span class="o">!!</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">Configuration</span> <span class="n">done</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Turning</span> <span class="n">on</span> <span class="n">EDMA</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EDMA</span> <span class="n">is</span> <span class="n">turned</span> <span class="n">on</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AM3359_ICE</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">Done</span> <span class="o">******************</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="running-board-diagnostics">
<h3>10.3.13.6. Running Board Diagnostics<a class="headerlink" href="#running-board-diagnostics" title="Permalink to this headline">¶</a></h3>
<p>The Processor SDK RTOS Diagnostic package is designed to be a set of
baremetal tests to run on a given board to provide data path continuity
testing on peripherals.</p>
<p>To run diagnostics on the AM335x ICE, follow the procedure given in the
<a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_board.html#running-the-diagnostic-examples">RTOS Software Developer
Guide</a></p>
</div>
</div>
<div class="section" id="amic110-ice-evm-hardware-setup">
<h2>10.3.14. AMIC110 ICE EVM Hardware Setup<a class="headerlink" href="#amic110-ice-evm-hardware-setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id82">
<h3>10.3.14.1. Description<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<p>The AMIC110 ICE is a high-performance, low-power platform that enables
users to evaluate and develop industrial communications applications for
the Sitara AMIC110 ARM Cortex-A8 processor SoC from Texas Instruments.™</p>
</div>
<div class="section" id="id83">
<h3>10.3.14.2. EVM Layout and Key Components<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/ICEAMIC110TopLayout.PNG"><img alt="../_images/ICEAMIC110TopLayout.PNG" src="../_images/ICEAMIC110TopLayout.PNG" style="width: 627.5px; height: 417.0px;" /></a>
<a class="reference internal image-reference" href="../_images/ICEAMIC110BottomLayout.PNG"><img alt="../_images/ICEAMIC110BottomLayout.PNG" src="../_images/ICEAMIC110BottomLayout.PNG" style="width: 624.0px; height: 450.0px;" /></a>
</div>
<div class="section" id="id84">
<h3>10.3.14.3. Quick Start Guide<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h3>
<p>This quick start guide can be found in the <a class="reference external" href="http://www.ti.com/lit/spruie6a">Hardware User’s
Guide</a>.</p>
<p>1. Unbox the board and identify the various components
and connectors shown above.</p>
<p>2. To download a bootable image into the onboard SPI Flash, connect a 20-pin JTAG emulator to J1 on the ICE board. For example, the XDS110
or the XDS200 emulators may be used for this purpose and can be purchased from
the TI store: <a class="reference external" href="https://store.ti.com/TMDSEMU200-U-XDS200-USB-Debug-Probe-P4281.aspx">XDS200</a> and <a class="reference external" href="https://store.ti.com/TMDSEMU110-U-XDS110-JTAG-Debug-Probe-P51766.aspx">XDS110</a>.</p>
<a class="reference internal image-reference" href="../_images/ICEAMIC110JTAG.PNG"><img alt="../_images/ICEAMIC110JTAG.PNG" src="../_images/ICEAMIC110JTAG.PNG" style="width: 386.5px; height: 304.5px;" /></a>
<p>3. Connect the pin header connector of the included TTL-232R-3V3 serial cable to J3 on the ICE board. Ensure that pin 1 of the serial cable (black wire, marked with a triangle) is connected to pin 1 of J3, which is indicated by a dot on the silk screen. Connect the
USB connector of the serial cable to a PC host port. The datasheet for this cable can found at <a class="reference external" href="http://www.ftdichip.com/Support/Documents/DataSheets/Cables/DS_TTL-232R_CABLES.pdf">http://www.ftdichip.com/Support/Documents/DataSheets/Cables/DS_TTL-232R_CABLES.pdf</a></p>
<a class="reference internal image-reference" href="../_images/ICEAMIC110TTL.PNG"><img alt="../_images/ICEAMIC110TTL.PNG" src="../_images/ICEAMIC110TTL.PNG" style="width: 336.5px; height: 306.5px;" /></a>
<p>4. Connect a CAT5 Ethernet cable from a PC running TwinCAT software to ECAT IN/PHY1 (J6) of the ICE board. If you have multiple ICE boards in a
chain, please connect another CAT5 Ethernet cable from ECAT OUT/PHY2 (J7) to PHY1 of the next ICE board. PHY2 of the last ICE board in the chain is left open.</p>
<a class="reference internal image-reference" href="../_images/ICEAMIC110ETHERNET.PNG"><img alt="../_images/ICEAMIC110ETHERNET.PNG" src="../_images/ICEAMIC110ETHERNET.PNG" style="width: 464.5px; height: 306.0px;" /></a>
<p>5. Connect the recommended power supply (CUI Inc. SMI18-5-V-P5, procurable at: <a class="reference external" href="http://www.digikey.com/product-detail/en/cui-inc/SMI18-5-V-P5/102-3571-ND/5415042">http://www.digikey.com/product-detail/en/cui-inc/SMI18-5-V-P5/102-3571-ND/5415042</a>) or equivalent (Output voltage/current: 5 Volts DC +/- 10% &#64; 1.2 Amps; Output connector: 2.1-mm ID, 5.5-mm OD barrel plug, center positive) power supply to J8 on the ICE board.
Apply power to the power supply to power up the ICE board. Do not hot plug the 5-V supply into the ICE board.</p>
<a class="reference internal image-reference" href="../_images/ICEAMIC1105V.PNG"><img alt="../_images/ICEAMIC1105V.PNG" src="../_images/ICEAMIC1105V.PNG" style="width: 464.5px; height: 306.0px;" /></a>
<p>Once the ICE board is powered on, the ON LED (D15) and LED4 (D19) will
turn on.</p>
<p>6. The AMIC110 ICE can now be connected to from the host machine via
UART. The serial port should be setup as shown below.</p>
<a class="reference internal image-reference" href="../_images/Baudrate.jpg"><img alt="../_images/Baudrate.jpg" src="../_images/Baudrate.jpg" style="width: 243.0px; height: 206.5px;" /></a>
</div>
<div class="section" id="id85">
<h3>10.3.14.4. Boot Configuration<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<p>The various boot configurations are discussed in the <a class="reference external" href="http://www.ti.com/lit/spruip3">Hardware User
Guide.</a></p>
</div>
<div class="section" id="connecting-the-amic110-ice-to-code-composer-studio">
<h3>10.3.14.5. Connecting the AMIC110 ICE to Code Composer Studio<a class="headerlink" href="#connecting-the-amic110-ice-to-code-composer-studio" title="Permalink to this headline">¶</a></h3>
<p>1. Download Code Composer Studio and the AMIC110 Sitara Device Support package as
described in the <a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/Overview.html#processor-sdk-rtos-getting-started-guide">Processor SDK RTOS Getting Started Guide</a>.</p>
<p>2. Connect the AMIC110 ICE as described in the
Quick Start Guide.</p>
<p>3. Launch CCS and create a new target configuration file (File-&gt;New-&gt;Target Configuration File) as shown below. Select
the appropriate emulator and the ICE_AMIC110 as the target as shown below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the ICE_AMIC110 target is not listed, make sure the Sitara Device Support package v1.3.6 or greater is installed.</p>
</div>
<a class="reference internal image-reference" href="../_images/ICEAMIC110TargetConfig.PNG"><img alt="../_images/ICEAMIC110TargetConfig.PNG" src="../_images/ICEAMIC110TargetConfig.PNG" style="width: 765.0px; height: 375.5px;" /></a>
<p>4. Click Save to save the target configuration. Then press Test Connection to test the connection. If successful, a message should be
seen similar to the one below.</p>
<a class="reference internal image-reference" href="../_images/ICEAMIC110Test.PNG"><img alt="../_images/ICEAMIC110Test.PNG" src="../_images/ICEAMIC110Test.PNG" style="width: 348.5px; height: 56.0px;" /></a>
<p>5. Launch the target configuration and
connect to the ARM Cortex-A8.</p>
<p>The complete GEL log from the Cortex A8 is provided below.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AMIC110_ICE</span> <span class="o">&amp;</span> <span class="n">BoosterPack</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AMIC110</span> <span class="o">&amp;</span> <span class="n">Booster</span> <span class="n">Pack</span> <span class="n">ALL</span> <span class="n">PLL</span> <span class="n">Config</span> <span class="k">for</span> <span class="n">OPP</span> <span class="o">==</span> <span class="n">OPP100</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Input</span> <span class="n">Clock</span> <span class="n">Read</span> <span class="n">from</span> <span class="n">SYSBOOT</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">14</span><span class="p">]</span><span class="o">:</span>  <span class="mi">25</span><span class="n">MHz</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Going</span> <span class="n">to</span> <span class="n">Bypass</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Bypassed</span><span class="p">,</span> <span class="n">changing</span> <span class="n">values</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Locking</span> <span class="n">ARM</span> <span class="n">PLL</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Core</span> <span class="n">Bypassed</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Now</span> <span class="n">locking</span> <span class="n">Core</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">Core</span> <span class="n">locked</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">Bypassed</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DDR</span> <span class="n">DPLL</span> <span class="n">Locked</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">Bypassed</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">PER</span> <span class="n">DPLL</span> <span class="n">Locked</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DISP</span> <span class="n">PLL</span> <span class="n">Config</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">..........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">DISP</span> <span class="n">PLL</span> <span class="n">Config</span> <span class="n">is</span> <span class="n">DONE</span> <span class="p">..........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AMIC110</span> <span class="n">BoosterPack</span> <span class="n">ALL</span> <span class="n">ADPLL</span> <span class="n">Config</span> <span class="k">for</span> <span class="mi">25</span> <span class="n">MHz</span> <span class="n">OPP</span> <span class="o">==</span> <span class="n">OPP100</span> <span class="mi">25</span><span class="n">MHz</span> <span class="n">is</span> <span class="n">Done</span> <span class="p">.........</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AMIC110</span> <span class="n">DDR3</span> <span class="n">EMIF</span> <span class="n">and</span> <span class="n">PHY</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">PRCM</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">PRCM</span> <span class="n">Done</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">Configuration</span> <span class="n">in</span> <span class="n">progress</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Waiting</span> <span class="k">for</span> <span class="n">VTP</span> <span class="n">Ready</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">VTP</span> <span class="n">is</span> <span class="n">Ready</span><span class="o">!</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">CMD0</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">CMD1</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">CMD2</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">DATA0</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">DATA1</span> <span class="n">Register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">IO</span> <span class="n">control</span> <span class="n">registers</span><span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">Timing</span> <span class="k">register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">in</span> <span class="n">progress</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EMIF</span> <span class="n">Timing</span> <span class="k">register</span> <span class="n">configuration</span> <span class="n">is</span> <span class="n">done</span> <span class="p">.......</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">PHY</span> <span class="n">is</span> <span class="n">READY</span><span class="o">!!</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">DDR</span> <span class="n">PHY</span> <span class="n">Configuration</span> <span class="n">done</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">Turning</span> <span class="n">on</span> <span class="n">EDMA</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="n">GEL</span> <span class="nl">Output</span><span class="p">:</span> <span class="n">EDMA</span> <span class="n">is</span> <span class="n">turned</span> <span class="n">on</span><span class="p">...</span>
<span class="nl">CortxA8</span><span class="p">:</span> <span class="nl">Output</span><span class="p">:</span> <span class="o">****</span>  <span class="n">AMIC110_ICE</span> <span class="n">Initialization</span> <span class="n">is</span> <span class="n">Done</span> <span class="o">******************</span>
</pre></div>
</div>
</div>
<div class="section" id="id86">
<h3>10.3.14.6. Running Board Diagnostics<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<p>The Processor SDK RTOS Diagnostic package is designed to be a set of
baremetal tests to run on a given board to provide data path continuity
testing on peripherals.</p>
<p>To run diagnostics on the AMIC110 ICE, follow the procedure given in the
<a class="reference external" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_board.html#diagnostics">RTOS Software Developer
Guide</a></p>
</div>
</div>
<div class="section" id="ak2g-audio-dc-addon">
<h2>10.3.15. 66AK2G Audio DC AddOn<a class="headerlink" href="#ak2g-audio-dc-addon" title="Permalink to this headline">¶</a></h2>
<p>Please refer to <a class="reference external" href="index_examples_demos.html#k2g-audio-dc-addon">K2G Audio DC AddOn</a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="FAQ.html" class="btn btn-neutral float-right" title="11. Frequently Asked Questions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="How_to_Guides.html" class="btn btn-neutral" title="10. How to Guides" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2019</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'06_01_00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>