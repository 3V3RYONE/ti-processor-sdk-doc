

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.1. Dual EMAC and Switch &mdash; Processor SDK RTOS Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Processor SDK RTOS Documentation" href="../index.html"/>
        <link rel="up" title="7. PRU-ICSS Firmware" href="PRU_ICSS.html"/>
        <link rel="next" title="8. Compilers" href="Compilers.html"/>
        <link rel="prev" title="7. PRU-ICSS Firmware" href="PRU_ICSS.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Processor SDK RTOS
          

          
          </a>

          
            
            
              <div class="version">
                06_01_00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Release_Specific.html">2. Release Specific</a></li>
<li class="toctree-l1"><a class="reference internal" href="Board_EVM_Abstration.html">3. Board/EVM Abstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Foundational_Components.html">4. Foundational Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="DSP_Software.html">5. DSP Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="Device_Drivers.html">6. Device Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="PRU_ICSS.html">7. PRU-ICSS Firmware</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">7.1. Dual EMAC and Switch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">7.1.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dual-emac">7.1.2. DUAL_EMAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#switch">7.1.3. SWITCH</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-organization">7.1.4. Code Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#firmware-build-instruction">7.1.5. Firmware Build Instruction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#build-instruction-from-processor-sdk-release-package">7.1.5.1. Build instruction from Processor SDK Release package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-instruction-from-git">7.1.5.2. Build instruction from GIT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supported-evms">7.1.6. Supported EVMs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-icss-emac-firmwares-example">7.1.7. Running ICSS-EMAC FIRMWARES Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#icss-g-dual-emac">7.2. ICSS-G Dual EMAC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">7.2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">7.2.2. DUAL_EMAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#firmware-code-location-and-build-instruction">7.2.3. Firmware Code Location and Build Instruction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pru-icss-sorte">7.3. PRU-ICSS SORTE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">7.3.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protocol-overview">7.3.2. Protocol Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">7.3.3. Code Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-the-examples">7.3.4. Building the Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">7.3.4.1. Pre-requisites to Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-the-pruss-sorte-firmware">7.3.4.2. Compiling the PRUSS SORTE Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-the-pruss-sorte-application">7.3.4.3. Compiling the PRUSS SORTE Application</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">7.3.5. Supported EVMs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-pruss-sorte-example">7.3.6. Running the PRUSS SORTE Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-reference">7.3.7. Additional Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pru-icss-i2c">7.4. PRU-ICSS I2C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">7.4.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#firmware-features">7.4.2. FIRMWARE FEATURES</a></li>
<li class="toctree-l3"><a class="reference internal" href="#firmware-organization">7.4.3. Firmware Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">7.4.4. Firmware Build Instruction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">7.4.4.1. Build instruction from Processor SDK Release package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-instruction-for-git">7.4.4.2. Build instruction for GIT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">7.4.5. Supported EVMs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-firmware-example">7.4.6. I2C FIRMWARE Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pru-icss-iolink">7.5. PRU-ICSS IOLINK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">7.5.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">7.5.2. FIRMWARE FEATURES</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">7.5.3. Firmware Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">7.5.4. Firmware Build Instruction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id17">7.5.4.1. Build instruction from Processor SDK Release package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">7.5.4.2. Build instruction for GIT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id20">7.5.5. Supported EVMs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="PRU_ICSS.html#pru-icss-espi">7.6. PRU-ICSS ESPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="PRU_ICSS.html#pru-icss-uart">7.7. PRU-ICSS UART</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Compilers.html">8. Compilers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples_and_Demonstrations.html">9. Examples and Demonstrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="How_to_Guides.html">10. How to Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">11. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation_Tarball.html">12. Documentation Tarball</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Processor SDK RTOS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="PRU_ICSS.html">7. PRU-ICSS Firmware</a> &raquo;</li>
      
    <li>7.1. Dual EMAC and Switch</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dual-emac-and-switch">
<h1>7.1. Dual EMAC and Switch<a class="headerlink" href="#dual-emac-and-switch" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>7.1.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">The ICSS FIRMWARES serves as example to implement various network
functionalities. Package includes source release for Dual_emac and
basic switch firmwares.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="dual-emac">
<h2>7.1.2. DUAL_EMAC<a class="headerlink" href="#dual-emac" title="Permalink to this headline">¶</a></h2>
<p>ICSS DUAL EMAC FIRMWARE is a single port Ethernet MAC (Media Access
Control) i.e. Layer 2 of OSI Model. It implements a 2 port ethernet mac
supporting 10/100 Mbps. DUAL EMAC FIRMWARE is standardized to IEEE 802.1
Ethernet Standards. Primary use case of the protocol is to demonstrate
basic ethernet functionality via both PRU cores on 10/100 Mbit Ethernet
cable. ICSS DUAL EMAC FIRMWARE can be used independently on two PRU’s to
implement two independent MAC’s with two different MAC addresses and two
different IP addresses. To provide an analogy, this is somewhat similar
to a two port Ethernet PCIe NIC card on a PC.Ethernet interface in this
case is available along with Host processor on a single SoC. Following
are high level features:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Requirements</strong></p></td>
<td><p><strong>Remarks</strong></p></td>
</tr>
<tr class="row-even"><td><p>1 ms buffering per port</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Host IRQ</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Ethernet QoS</p></td>
<td><p>With 2 queues instead of 8. So,
it is not a standard Ethernet QoS
implementation.</p></td>
</tr>
<tr class="row-odd"><td><p>Statistics</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Storm Prevention</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Promiscuous Mode</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>TTS (Time Triggered Send)</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Error Handling</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Multicast filtering</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>VLAN filtering</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>PTP Handling</p></td>
<td><p>Supported</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="switch">
<h2>7.1.3. SWITCH<a class="headerlink" href="#switch" title="Permalink to this headline">¶</a></h2>
<p>ICSS SWITCH FIRMWARE is a three port learning Ethernet switch i.e. Layer
2 of OSI Model. It implements a 2 port cut through ethernet switch
supporting at 100 Mbps. SWITCH FIRMWARE is standardized to IEEE 802.1
Ethernet Standards. The primary use case of the protocol is to use
Ethernet to automate applications which require short cut-through
latency and low hardware costs. ICSS SWITCH FIRMWARE uses two PRU to
implement three port Ethernet switch with one single MAC and IP address.
To provide an analogy, this is somewhat standard network switch only
here the network functionality is available to the host core within the
single SOC. The following are the high level features it supports.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Requirements</strong></p></td>
<td><p><strong>Remarks</strong></p></td>
</tr>
<tr class="row-even"><td><p>Cut-Through</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Store and Forward</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>1 ms buffering per port</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Host IRQ</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Ethernet QoS</p></td>
<td><p>With 4 queues instead of 8. So,
it is not a standard Ethernet QoS
implementation.</p></td>
</tr>
<tr class="row-odd"><td><p>802.1 learning switch</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Statistics</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Queue-Contention Handling on each
port</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Three-Port Switch</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Storm Prevention</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Error Handling</p></td>
<td><p>Supported</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="code-organization">
<h2>7.1.4. Code Organization<a class="headerlink" href="#code-organization" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 43%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Requirements</strong></p></td>
<td><p><strong>Location in SDK</strong></p></td>
<td><p><strong>Remarks</strong></p></td>
</tr>
<tr class="row-even"><td><p>Common baseline code</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv
/icss_emac/firmware/icss_dualemac</p></td>
<td><p>common code for
dual_emac and switch</p></td>
</tr>
<tr class="row-odd"><td><p>DUAL_EMAC</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv
/icss_emac/firmware/icss_dualemac</p></td>
<td><p>dual_emac firmware
specific code</p></td>
</tr>
<tr class="row-even"><td><p>SWITCH</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv
/icss_emac/firmware/icss_switch</p></td>
<td><p>switch firmware
specific code</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="firmware-build-instruction">
<h2>7.1.5. Firmware Build Instruction<a class="headerlink" href="#firmware-build-instruction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="build-instruction-from-processor-sdk-release-package">
<h3>7.1.5.1. Build instruction from Processor SDK Release package<a class="headerlink" href="#build-instruction-from-processor-sdk-release-package" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="pre-requisites-to-building">Pre-requisites to Building</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Processor</span> <span class="n">SDK</span> <span class="n">RTOS</span> <span class="n">Building</span> <span class="n">page</span> <span class="k">for</span> <span class="n">information</span> <span class="n">on</span> <span class="n">setting</span> <span class="n">up</span> <span class="n">build</span> <span class="n">environment</span><span class="p">.</span>
</pre></div>
</div>
<p class="rubric" id="compiling-icss-emac-firmwares">Compiling ICSS-EMAC FIRMWARES</p>
<ul class="simple">
<li><p>cd &lt;PDK&gt;/packages/ti/drv/icss_emac</p></li>
<li><p>make firm</p></li>
</ul>
<p>Firmware binaries at the end of the build will be located at:</p>
<ul class="simple">
<li><p>&lt;PDK&gt;/packages/ti/drv/icss_emac/firmware/&lt;FIRMWARE_TYPE&gt;/bin/&lt;SOC&gt;/&lt;HOST_CORE&gt;/&lt;REVISION&gt;</p></li>
<li><p>&lt;FIRMWARE_TYPE&gt; indicates the firmware type i.e. icss_dualemac for
DUAL_EMAC or icss_switch for SWITCH</p></li>
<li><p>&lt;SOC&gt; indicates the SOC type.</p></li>
<li><p>&lt;HOST_CORE&gt; indicates the Host core type on which the built binary
can be loaded.</p></li>
<li><p>&lt;REVISION&gt; indicates the revision of the firmware binary based on
core. (There are 2 revision of PRU ICSS core)</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="build-instruction-from-git">
<h3>7.1.5.2. Build instruction from GIT<a class="headerlink" href="#build-instruction-from-git" title="Permalink to this headline">¶</a></h3>
<p>Following are the steps for building firmware from any external
environment outside PROC SDK RTOS.</p>
<ul class="simple">
<li><p>Creation of directories</p>
<ul>
<li><p>Create a working directory e.g. &lt;WORK_DIR&gt;</p></li>
<li><p>Create a new directory named ti inside working directory. i.e.
&lt;WORK_DIR/ti&gt;</p></li>
<li><p>Create a new directory called drv inside ti. i.e.
&lt;WORK_DIR/ti/drv&gt;</p></li>
</ul>
</li>
<li><p>Clone of Repos</p>
<ul>
<li><p>Git clone pdk build repo into ti directory. i.e.
&lt;WORK_DIR/ti/build&gt;</p></li>
<li><p>Git clone icss_emac repo into ti/drv directory. i.e.
&lt;WORK_DIR/ti/drv/icss_emac&gt;</p></li>
</ul>
</li>
<li><p>Setting Environment Variables</p>
<ul>
<li><p>Export CLPRU install path. i.e. export CL_PRU_INSTALL_PATH=clpru
toolchain directory</p></li>
<li><p>Export pdk install path. i.e. export PDK_INSTALL_PATH=&lt;WORK_DIR&gt;</p></li>
<li><p>Export LIMIT_SOCS Variable i.e. LIMIT_SOCS=&lt;SOC&gt; [Optional for
limiting to some SOCs]</p></li>
</ul>
</li>
<li><p>Build command</p>
<ul>
<li><p>Run make firm/firm_clean to build/clean firmware from icss_emac
directory i.e. &lt;WORK_DIR/ti/drv/icss_emac&gt;</p></li>
</ul>
</li>
<li><p>Generated binaries</p>
<ul>
<li><p>the firmware binaries which will be located in
&lt;WORK_DIR/ti/drv/icss_emac/firmware/&lt;FIRMWARE_TYPE&gt;/bin/&lt;SOC&gt;/&lt;HOST_CORE&gt;/&lt;REVISION&gt;&gt;</p></li>
</ul>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="supported-evms">
<h2>7.1.6. Supported EVMs<a class="headerlink" href="#supported-evms" title="Permalink to this headline">¶</a></h2>
<p>The following is a list of EVMS supported and the PRU-ICSS ethernet
ports to be used:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>EVM Name</p></td>
<td><p>PRU-ICSS Instance</p></td>
<td><p>Supported PRU ICSS
core revision</p></td>
</tr>
<tr class="row-even"><td><p>icev2AM335x</p></td>
<td><p>PRU-ICSS instance 1</p></td>
<td><p>REV1</p></td>
</tr>
<tr class="row-odd"><td><p>idkAM437x</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>REV1</p></td>
</tr>
<tr class="row-even"><td><p>idkAM571x</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>REV2</p></td>
</tr>
<tr class="row-odd"><td><p>idkAM572x</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>REV1 &amp; REV2 (Earlier
version of AM572x soc
had REV1 pru cores
while later had REV2
pru cores)</p></td>
</tr>
<tr class="row-even"><td><p>iceK2G</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>REV2</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="running-icss-emac-firmwares-example">
<h2>7.1.7. Running ICSS-EMAC FIRMWARES Example<a class="headerlink" href="#running-icss-emac-firmwares-example" title="Permalink to this headline">¶</a></h2>
<p>Please go through the following page for example demonstrating the use
of the firmware via icss-emac driver.
<a class="reference external" href="index_device_drv.html#icss-emac">[1]</a></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="firmware-design-guide">Firmware Design Guide</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Document</strong></p></td>
<td><p><strong>Location</strong></p></td>
</tr>
<tr class="row-even"><td><p>ICSS DUAL EMAC FIRMWARE Design
Guide</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/icss_emac/f
irmware/icss_dualemac/docs/ICSS_D
UAL_EMAC_Firmware_Design_Guide.pd
f</p></td>
</tr>
<tr class="row-odd"><td><p>ICSS SWITCH FIRMWARE Design Guide</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/icss_emac/f
irmware/icss_switch/docs/ICSS_SWI
TCH_Firmware_Design_Guide.pdf</p></td>
</tr>
</tbody>
</table>
<p><strong>NOTE: For normal use case, there is no need to refer this document.
Unless you wish to go through the internal working for firmware and/or
wanted to modify it.</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="icss-g-dual-emac">
<h1>7.2. ICSS-G Dual EMAC<a class="headerlink" href="#icss-g-dual-emac" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>7.2.1. Introduction<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">The ICSS-G FIRMWARE serves as example to implement various network
functionalities. Package includes source release for DUAL EMAC</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id2">
<h2>7.2.2. DUAL_EMAC<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>ICSS DUAL EMAC FIRMWARE is a single port Ethernet MAC (Media Access
Control) i.e. Layer 2 of OSI Model. It implements a 2 port Ethernet
mac supporting 100Mbps and 1Gbps. DUAL MAC FIRMWARE is standardized
to IEEE 802.1 Ethernet Standards. Primary use case of the protocol
is to demonstrate basic Ethernet functionality via both PRU/RTU cores.
ICSS-G DUAL EMAC FIRMWARE can be used independently on two PRUs to
implement two independent MACs with two different MAC addresses
and two different IP addresses.</p>
<p>Following are high level features:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Requirements</strong></p></td>
<td><p><strong>Remarks</strong></p></td>
</tr>
<tr class="row-even"><td><p>4 egress DMA threads per port</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>4 ingress “buckets” per port</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Statistics</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Storm Prevention</p></td>
<td><p>Future</p></td>
</tr>
<tr class="row-even"><td><p>Promiscuous Mode</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>TTS (Time Triggered Send)</p></td>
<td><p>Future</p></td>
</tr>
<tr class="row-even"><td><p>Error Handling</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Multicast filtering</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>VLAN filtering</p></td>
<td><p>Future</p></td>
</tr>
<tr class="row-odd"><td><p>PTP Handling</p></td>
<td><p>Supported</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="firmware-code-location-and-build-instruction">
<h2>7.2.3. Firmware Code Location and Build Instruction<a class="headerlink" href="#firmware-code-location-and-build-instruction" title="Permalink to this headline">¶</a></h2>
<p>Firmware is located at &lt;PDK&gt;packages/ti/drv/emac/firmware/icss_eth/src directory.</p>
<p>The CLPRU toolchain has to be used to build the firmware. The toolchain can be
downloaded from &lt;<a class="reference external" href="http://software-dl.ti.com/codegen/esd/cgt_public_sw/PRU/2.2.1/ti_cgt_pru_2.2.1_linux_installer_x86.bin">http://software-dl.ti.com/codegen/esd/cgt_public_sw/PRU/2.2.1/ti_cgt_pru_2.2.1_linux_installer_x86.bin</a>&gt;</p>
<p>To build the firmware:</p>
<ul class="simple">
<li><p>cd to &lt;PDK&gt;packages/ti/drv/emac/firmware/icss_eth/src directory</p></li>
<li><p>make CLPRU_INSTALL_PATH=&lt;dir_where_the_toolchain_installed&gt;.</p></li>
</ul>
<p>The firmware will be located in the &lt;PDK&gt;packages/ti/drv/emac/firmware/icss_eth/src/dm directory.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="pru-icss-sorte">
<h1>7.3. PRU-ICSS SORTE<a class="headerlink" href="#pru-icss-sorte" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id3">
<h2>7.3.1. Introduction<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">The Simple Open Real-time Ethernet protocol (SORTE) serves as an
example for Texas Instruments programmable approach to real-time
communication for input/output (IO) networks with a maximum of 254
devices. This protocol is fully documented and released in source
code. It is open to customers to learn, adapt and enhance the protocol
for their application requirements. SORTE is not bound to a given
communication standard and breaks some of the limits of existing
standards such as minimum Ethernet frame size, addressing and error
detection. The primary use case of the protocol is to connect
different end-equipment using Ethernet physical layer devices and 100
Mbit Ethernet cable.</div>
</div>
</div>
<div class="section" id="protocol-overview">
<h2>7.3.2. Protocol Overview<a class="headerlink" href="#protocol-overview" title="Permalink to this headline">¶</a></h2>
<p>The SORTE protocol is a TI-developed industrial Ethernet protocol that
supports 4-µs cycle time. The SORTE protocol operates on the PRU-ICSS,
which is an industrial peripheral within Sitara and KeyStone processors
from Texas Instruments. SORTE protocol operates exclusively on the
PRU-ICSS; therefore, the ARM Cortex-A8, A9 or A15 processors – depending
on the device family – are available for industrial applications. The
SORTE protocol differentiate between two network components: the master
and one or more slave devices. For in depth details of the protocol
please refer to the the design documents as listed in the References
section below.</p>
</div>
<div class="section" id="id4">
<h2>7.3.3. Code Organization<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>THE SORTE ARM application and firmware sources can be found under the
following directory :</p>
<p><strong>&lt;PDK&gt;/packages/ti/drv/pruss/example/apps/sorte/</strong></p>
<p>Refer to the README.txt in this directory for details of directory
layout.</p>
<p>In addition, there is a README.txt which provides high-level over of how
the protocol is implmented for master and slave device network
compoments which can be found at:</p>
<p><strong>&lt;PDK&gt;/packages/ti/drv/pruss/example/apps/sorte/firmware/src/master/README.txt</strong></p>
<p><strong>&lt;PDK&gt;/packages/ti/drv/pruss/example/apps/sorte/firmware/src/slave/README.txt</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="building-the-examples">
<h2>7.3.4. Building the Examples<a class="headerlink" href="#building-the-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>7.3.4.1. Pre-requisites to Building<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Set your environment using pdksetupenv.sh. Building the Firmware
binaries and ARM application uses the same environment variables as
the pruss driver library build. Refer to the <a class="reference external" href="index_overview.html#building-the-sdk">Processor SDK RTOS
Building</a> page for
information on setting up your build environment.</p></li>
</ol>
</div>
<div class="section" id="compiling-the-pruss-sorte-firmware">
<h3>7.3.4.2. Compiling the PRUSS SORTE Firmware<a class="headerlink" href="#compiling-the-pruss-sorte-firmware" title="Permalink to this headline">¶</a></h3>
<p>To build the SORTE firmware binaries:</p>
<ol class="arabic simple">
<li><p><strong>cd &lt;PDK&gt;/packages/ti/drv/pruss</strong></p></li>
<li><p><strong>make firm</strong></p></li>
</ol>
<p>This will make the firmware binaries which will be located in:</p>
<p><strong>&lt;PDK&gt;/packages/ti/drv/pruss/example/apps/sorte/firmware/bin/&lt;BOARD&gt;</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="compiling-the-pruss-sorte-application">
<h3>7.3.4.3. Compiling the PRUSS SORTE Application<a class="headerlink" href="#compiling-the-pruss-sorte-application" title="Permalink to this headline">¶</a></h3>
<p>To build the SORTE ARM applications:</p>
<ol class="arabic simple">
<li><p><strong>cd &lt;PDK&gt;/packages/ti/drv/pruss</strong></p></li>
<li><p><strong>make apps</strong></p></li>
</ol>
<p>This will make the ARM applications for both master and slave device
which will be located in:</p>
<p><strong>&lt;PDK&gt;/packages/ti/drv/pruss/example/apps/sorte/slave&lt;BOARD&gt;</strong></p>
<p><strong>&lt;PDK&gt;/packages/ti/drv/pruss/example/apps/sorte/master&lt;BOARD&gt;</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id6">
<h2>7.3.5. Supported EVMs<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>The following is a list of EVMS supported and the PRU-ICSS ethernet
ports to be used:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 39%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>EVM Name</strong></p></td>
<td><p><strong>PRU-ICSS Instance</strong></p></td>
<td><p><strong>Port0</strong></p></td>
<td><p><strong>Port1</strong></p></td>
</tr>
<tr class="row-even"><td><p>icev2AM335x</p></td>
<td><p>PRU-ICSS instance 1</p></td>
<td><p>J1</p></td>
<td><p>J2</p></td>
</tr>
<tr class="row-odd"><td><p>idkAM437x</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>J6</p></td>
<td><p>J9</p></td>
</tr>
<tr class="row-even"><td><p>idkAM571x</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>J6</p></td>
<td><p>J8</p></td>
</tr>
<tr class="row-odd"><td><p>idkAM572x</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>J6</p></td>
<td><p>J8</p></td>
</tr>
<tr class="row-even"><td><p>iceK2G</p></td>
<td><p>PRU-ICSS instance 2</p></td>
<td><p>J8A</p></td>
<td><p>J8B</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="running-the-pruss-sorte-example">
<h2>7.3.6. Running the PRUSS SORTE Example<a class="headerlink" href="#running-the-pruss-sorte-example" title="Permalink to this headline">¶</a></h2>
<p>In order to run the SORTE applications, you will require 1 EVM running
as master and 2 EVMs running as slave(slave1/slave2). Use CCS to load
and run the master and slave applications respectively.</p>
<p>Prior to running the applications its best to connect the EVMS as
follows:</p>
<p>Connect master Port0 to slave1 Port0. Connect slave1 Port1 to slave2
Port0.</p>
<p>After loading the application binaries from CCS, run the master first,
then run the slave2, finally run the slave1 with Port0 connecting to the
the master Port 0.</p>
<p>Note that the master device will wait until it discovers 2 slave devices
in the network. UART console on the master will print the following
until 2 slave devices are detected:</p>
<p><strong>sorte master: waiting for atleast 2 SLAVE devices connected</strong></p>
<p>Once 2 slave devices are detected by the master, the following print
will be seen on UART console and master will continue with state machine
and protocol processing:</p>
<p><strong>sorte master: 2 SLAVE devices connected</strong></p>
<p>The slave device via the UART console will continuosly display the
number of packets its received during input output exchange state of the
protocol until pass criteria is reached as follows(as an example):</p>
<p><strong>sorte slave: test in progress: current receive packet count: 35000</strong></p>
<p><strong>sorte slave: test in progress: current receive packet count: 40000</strong></p>
<p>Once pass criteria number of packets have been received, the following
print will be displayed on UART console:</p>
<p><strong>All tests have passed</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="additional-reference">
<h2>7.3.7. Additional Reference<a class="headerlink" href="#additional-reference" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Document</strong></p></td>
<td><p><strong>Location</strong></p></td>
</tr>
<tr class="row-even"><td><p>SORTE Master with PRU-ICSS
Reference Design</p></td>
<td><p><a class="reference external" href="http://www.ti.com/tool/TIDEP-0085">http://www.ti.com/tool/TIDEP-0085</a></p></td>
</tr>
<tr class="row-odd"><td><p>SORTE Slave Device with PRU-ICSS
Reference Design</p></td>
<td><p><a class="reference external" href="http://www.ti.com/tool/TIDEP-0086">http://www.ti.com/tool/TIDEP-0086</a></p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="pru-icss-i2c">
<h1>7.4. PRU-ICSS I2C<a class="headerlink" href="#pru-icss-i2c" title="Permalink to this headline">¶</a></h1>
<span class="target" id="pru-icss-i2c-firmware-label"></span><div class="section" id="id7">
<h2>7.4.1. Introduction<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">PRU-ICSS I2C serves as an example for firmware-based I2C peripheral
support. The I2C firmware (I2C FW) allows additional I2C instances for SOCs
beyond those supported by SOC hardware. The Processor SDK package includes
full source code for I2C FW.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="firmware-features">
<h2>7.4.2. FIRMWARE FEATURES<a class="headerlink" href="#firmware-features" title="Permalink to this headline">¶</a></h2>
<p>I2C FW supports the standard two pin I2C interface through three GPIO pins
from the PRU-ICSS module. The I2C SCL pin is implemented using a single
GPIO configured in GPO mode. The I2C SDA pin is implemented using two GPIO
pins: one pin configured in GPI mode for sampling SDA, and a second pin
configured in GPO mode for driving the SDA. Depending on the I2C clock
speed, I2C FW can emulate multiple I2C instances from a single PRU core.
Following are high-level I2C FW features:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Feature</strong></p></td>
<td><p><strong>Remarks</strong></p></td>
</tr>
<tr class="row-even"><td><p>No. of instances</p></td>
<td><p>4 (Standard mode)</p>
<p>1 (Fast mode)</p>
</td>
</tr>
<tr class="row-odd"><td><p>SMBus support</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Addressing modes</p></td>
<td><p>7/10-bit</p></td>
</tr>
<tr class="row-odd"><td><p>Master mode</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>I2C data transfer rate from
100 kbps up to 400 kbps</p></td>
<td><p>100 kHz / 400 kHz</p></td>
</tr>
<tr class="row-odd"><td><p>Bit format transfer</p></td>
<td><p>8 bit</p></td>
</tr>
<tr class="row-even"><td><p>Number of host interrupts</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Peripheral enable/disable
capability</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Start/Restart/Stop</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Built-in configurable FIFOs (8,
16, 32, 64 bytes) for buffered
read/write</p></td>
<td><p>8/16/32/64/128/256</p></td>
</tr>
<tr class="row-even"><td><p>8-bit-wide data access</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Slave reset feature</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Internal loopback feature</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Slave mode</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-even"><td><p>Combined Master-Slave
mode/transaction</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-odd"><td><p>DMA support</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-even"><td><p>Programmable clock generation</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Implement Auto Idle mechanism
(SOC specific feature)</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-even"><td><p>Implement Idle Request/Idle
Acknowledge handshake mechanism
(SOC specific feature)</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Support for asynchronous wakeup
mechanism</p></td>
<td><p>Not Supported</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="firmware-organization">
<h2>7.4.3. Firmware Organization<a class="headerlink" href="#firmware-organization" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>FW Item</strong></p></td>
<td><p><strong>Directory</strong></p></td>
</tr>
<tr class="row-even"><td><p>Source code</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/i2c/firmware/icss_i2c/src</p></td>
</tr>
<tr class="row-odd"><td><p>Design Guide</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/i2c/firmware/icss_i2c/docs</p></td>
</tr>
<tr class="row-even"><td><p>Firmware binaries</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/i2c/firmware/icss_i2c/bin</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id8">
<h2>7.4.4. Firmware Build Instruction<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>7.4.4.1. Build instruction from Processor SDK Release package<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="id10">Pre-requisites to Building</p>
<p>Refer to the Processor SDK RTOS Building page for information on setting up the build environment.</p>
<p class="rubric" id="compiling-i2c-firmware">Compiling I2C FIRMWARE</p>
<ul class="simple">
<li><p>cd &lt;PDK&gt;/packages/ti/drv/i2c</p></li>
<li><p>make firm</p></li>
</ul>
<p>Firmware binaries at the end of the build will be located at:</p>
<ul class="simple">
<li><p>&lt;PDK&gt;/packages/ti/drv/i2c/firmware/&lt;FIRMWARE_TYPE&gt;/bin/&lt;SOC&gt;/&lt;HOST_CORE&gt;/&lt;REVISION&gt;</p></li>
<li><p>&lt;FIRMWARE_TYPE&gt; indicates the firmware type i.e. icss_i2c</p></li>
<li><p>&lt;SOC&gt; indicates the SOC type, e.g. am437x</p></li>
<li><p>&lt;HOST_CORE&gt; indicates the Host core type on which the built binary
can be loaded, e.g. a9host</p></li>
<li><p>&lt;REVISION&gt; indicates the revision of the firmware binary based on
core (there are 2 revision of PRU-ICSS core), e.g. REV1.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="build-instruction-for-git">
<h3>7.4.4.2. Build instruction for GIT<a class="headerlink" href="#build-instruction-for-git" title="Permalink to this headline">¶</a></h3>
<p>Following are the steps for building firmware from any external
environment outside Processor SDK RTOS package.</p>
<ul class="simple">
<li><p>Creation of directories</p>
<ul>
<li><p>Create a working directory e.g. &lt;WORK_DIR&gt;</p></li>
<li><p>Create a new directory named ti inside working directory. i.e.
&lt;WORK_DIR/ti&gt;</p></li>
<li><p>Create a new directory called drv inside ti. i.e.
&lt;WORK_DIR/ti/drv&gt;</p></li>
</ul>
</li>
<li><p>Clone of Repos</p>
<ul>
<li><p>Git clone pdk build repo into ti directory. i.e.
&lt;WORK_DIR/ti/build&gt;</p></li>
<li><p>Git clone i2c repo into ti/drv directory. i.e.
&lt;WORK_DIR/ti/drv/i2c&gt;</p></li>
</ul>
</li>
<li><p>Setting Environment Variables</p>
<ul>
<li><p>Export CLPRU install path. i.e. export CL_PRU_INSTALL_PATH=clpru
toolchain directory</p></li>
<li><p>Export pdk install path. i.e. export PDK_INSTALL_PATH=&lt;WORK_DIR&gt;</p></li>
<li><p>Export LIMIT_SOCS Variable i.e. LIMIT_SOCS=&lt;SOC&gt; [Optional for
limiting to some SOCs]</p></li>
</ul>
</li>
<li><p>Build command</p>
<ul>
<li><p>Run make firm_clean/firm to clean/build firmware from i2c
directory i.e. &lt;WORK_DIR/ti/drv/i2c&gt;</p></li>
</ul>
</li>
<li><p>Generated binaries</p>
<ul>
<li><p>the firmware binaries which will be located in
&lt;WORK_DIR/ti/drv/i2c/firmware/&lt;FIRMWARE_TYPE&gt;/bin/&lt;SOC&gt;/&lt;HOST_CORE&gt;/&lt;REVISION&gt;&gt;</p></li>
</ul>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id11">
<h2>7.4.5. Supported EVMs<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>Supported EVMs and pin configurations for these EVMs are listed below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>EVM Name</p></th>
<th class="head"><p>PRU-ICSS Instances</p></th>
<th class="head"><p>PRU-ICSS Revision</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>icev2AM335x</p></td>
<td><p>1</p></td>
<td><p>REV1</p></td>
</tr>
<tr class="row-odd"><td><p>idkAM437x</p></td>
<td><p>2</p></td>
<td><p>REV1</p></td>
</tr>
<tr class="row-even"><td><p>idkAM574x</p></td>
<td><p>2</p></td>
<td><p>REV2</p></td>
</tr>
<tr class="row-odd"><td><p>idkAM572x</p></td>
<td><p>2</p></td>
<td><p>REV2</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="icev2am335x">icev2AM335x</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 18%" />
<col style="width: 28%" />
<col style="width: 11%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ICSS</p></th>
<th class="head"><p>PRU</p></th>
<th class="head"><p>Instance</p></th>
<th class="head"><p>Functional Pin</p></th>
<th class="head"><p>PRU GPIO Pins</p></th>
<th class="head"><p>EVM Port</p></th>
<th class="head"><p>EVM Pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="3"><p>ICSS1</p></td>
<td rowspan="3"><p>PRU0</p></td>
<td rowspan="3"><p>I2C0</p></td>
<td><p>SCL</p></td>
<td><p>pr1_pru0_pru_r30_1</p></td>
<td><p>J3</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>SDA</p></td>
<td><p>pr1_edio_data_out7</p></td>
<td><p>J4</p></td>
<td><p>21</p></td>
</tr>
<tr class="row-even"><td><p>pr1_pru0_pru_r31_0</p></td>
<td><p>J3</p></td>
<td><p>12</p></td>
</tr>
</tbody>
</table>
<p class="rubric" id="idkam437x">idkAM437x</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 18%" />
<col style="width: 28%" />
<col style="width: 11%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ICSS</p></th>
<th class="head"><p>PRU</p></th>
<th class="head"><p>Instance</p></th>
<th class="head"><p>Functional Pin</p></th>
<th class="head"><p>PRU GPIO Pins</p></th>
<th class="head"><p>EVM Port</p></th>
<th class="head"><p>EVM Pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="6"><p>ICSS1</p></td>
<td rowspan="6"><p>PRU0</p></td>
<td rowspan="3"><p>I2C0</p></td>
<td><p>SCL</p></td>
<td><p>pr1_pru0_pru_r30_8</p></td>
<td><p>J3</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>SDA</p></td>
<td><p>pr1_edio_data_out0</p></td>
<td><p>J3</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>pr1_pru0_pru_r31_9</p></td>
<td><p>J3</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>I2C1</p></td>
<td><p>SCL</p></td>
<td><p>pr1_pru0_pru_r30_10</p></td>
<td><p>J16</p></td>
<td><p>46</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>SDA</p></td>
<td><p>pr1_edio_data_out1</p></td>
<td><p>J3</p></td>
<td><p>7</p></td>
</tr>
<tr class="row-odd"><td><p>pr1_pru0_pru_r31_11</p></td>
<td><p>J16</p></td>
<td><p>48</p></td>
</tr>
<tr class="row-even"><td rowspan="6"><p>ICSS0</p></td>
<td rowspan="6"><p>PRU0</p></td>
<td rowspan="3"><p>I2C0</p></td>
<td><p>SCL</p></td>
<td><p>pr0_pru0_pru_r30_8</p></td>
<td><p>J16</p></td>
<td><p>56</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>SDA</p></td>
<td><p>pr1_edio_data_out0</p></td>
<td><p>J3</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>pr0_pru0_pru_r31_9</p></td>
<td><p>J16</p></td>
<td><p>37</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>I2C1</p></td>
<td><p>SCL</p></td>
<td><p>pr0_pru0_pru_r30_10</p></td>
<td><p>J16</p></td>
<td><p>38</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>SDA</p></td>
<td><p>pr1_edio_data_out1</p></td>
<td><p>J3</p></td>
<td><p>7</p></td>
</tr>
<tr class="row-odd"><td><p>pr0_pru0_pru_r31_11</p></td>
<td><p>J16</p></td>
<td><p>58</p></td>
</tr>
</tbody>
</table>
<p class="rubric" id="idkam572x-idkam574x">idkAM572x/idkAM574x</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 18%" />
<col style="width: 28%" />
<col style="width: 11%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ICSS</p></th>
<th class="head"><p>PRU</p></th>
<th class="head"><p>Instance</p></th>
<th class="head"><p>Functional Pin</p></th>
<th class="head"><p>PRU GPIO Pins</p></th>
<th class="head"><p>EVM Port</p></th>
<th class="head"><p>EVM Pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="3"><p>ICSS1</p></td>
<td rowspan="3"><p>PRU0</p></td>
<td rowspan="3"><p>I2C0</p></td>
<td><p>SCL</p></td>
<td><p>pr1_pru1_gpo1</p></td>
<td><p>J21</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>SDA</p></td>
<td><p>pr1_edio_data_out1</p></td>
<td><p>J46</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>pr1_pru1_gpi0</p></td>
<td><p>J21</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="i2c-firmware-example">
<h2>7.4.6. I2C FIRMWARE Example<a class="headerlink" href="#i2c-firmware-example" title="Permalink to this headline">¶</a></h2>
<p>Sample code for I2C transaction:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Refer to I2C FW Example for details */</span>
<span class="p">...</span>

<span class="cm">/* Initialize the I2C FW configuration */</span>
<span class="n">I2C_socInitFwCfg</span><span class="p">();</span>

<span class="cm">/* Get the default I2C init configuration */</span>
<span class="n">I2C_socGetFwCfg</span><span class="p">(</span><span class="n">I2C_TEST_INSTANCE1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2c_cfg</span><span class="p">);</span>

<span class="cm">/* Modify the default I2C configurations if necessary */</span>

<span class="cm">/* Set the default I2C init configurations */</span>
<span class="n">I2C_socSetFwCfg</span><span class="p">(</span><span class="n">I2C_TEST_INSTANCE1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2c_cfg</span><span class="p">);</span>
<span class="p">...</span>

<span class="n">Board_init</span><span class="p">(</span><span class="n">boardCfg</span><span class="p">);</span>
<span class="p">...</span>

<span class="n">I2C_init</span><span class="p">();</span>

<span class="n">handle</span> <span class="o">=</span> <span class="n">I2C_open</span><span class="p">(</span><span class="n">I2C_TEST_INSTANCE1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2cParams</span><span class="p">);</span>
<span class="p">...</span>

<span class="cm">/* Initiate I2C transfers */</span>
<span class="n">I2C_transactionInit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2cTransaction</span><span class="p">);</span>
<span class="n">i2cTransaction</span><span class="p">.</span><span class="n">slaveAddress</span> <span class="o">=</span> <span class="n">I2C_EEPROM_ADDR</span><span class="p">;</span>
<span class="p">...</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">I2C_transfer</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2cTransaction</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">status</span><span class="o">!=</span> <span class="n">I2C_STS_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* I2C transaction failed */</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample code for SMBus transaction:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Refer to I2C FW Test for details */</span>
<span class="p">...</span>

<span class="n">testCmd</span><span class="p">.</span><span class="n">transferCmd</span> <span class="o">=</span> <span class="n">SMBUS_WRITE_BYTE_CMD</span><span class="p">;</span>
<span class="n">testCmd</span><span class="p">.</span><span class="n">cmdCode</span> <span class="o">=</span> <span class="n">WRITE_SMBUS_COMMAND_CODE</span><span class="p">;</span>
<span class="n">controlStatus</span> <span class="o">=</span> <span class="n">I2C_control</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">I2C_CMD_SMBUS_TYPE</span><span class="p">,</span> <span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">testCmd</span><span class="p">));</span>
<span class="n">I2C_transactionInit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2cTransaction</span><span class="p">);</span>
<span class="p">...</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">I2C_transfer</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2cTransaction</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">status</span> <span class="o">!=</span> <span class="n">I2C_STS_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* I2C transaction failed */</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="examples-list">Examples List</p>
<p>Refer to the Release Notes for details concerning I2C support across different EVMs.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Expected Results</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>I2C_FwExample</p></td>
<td><p>Driver Firmware
example application
for I2C FW instances</p></td>
<td><p>Status messages will
be displayed on
console based based
on pass/fail criteria:</p>
<p><strong>Pass criteria:</strong></p>
<p>I2C Test: Instance:
Baud Rate 100KHz:</p>
<p>All tests have
passed.</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="id12">Firmware Design Guide</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Document</strong></p></td>
<td><p><strong>Location</strong></p></td>
</tr>
<tr class="row-even"><td><p>I2C FIRMWARE Design Guide</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/i2c/firmware/icss_i2c/docs/I2C_FW_DESIGN_GUIDE.pdf</p></td>
</tr>
</tbody>
</table>
<p><strong>NOTE: For normal use of I2C FW, there is no need to refer to the design guide.
This document can be cosulted in case of interest in details of internal firmware
operation, or a desire to modify the firmware.</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="pru-icss-iolink">
<h1>7.5. PRU-ICSS IOLINK<a class="headerlink" href="#pru-icss-iolink" title="Permalink to this headline">¶</a></h1>
<span class="target" id="pru-icss-iolink-firmware-label"></span><div class="section" id="id13">
<h2>7.5.1. Introduction<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">PRU-ICSS IOLINK serves as an example for firmware-based IOLINK Master
Frame Handler support. The Processor SDK package includes
full source code for IOLINK FW.</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id14">
<h2>7.5.2. FIRMWARE FEATURES<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<p>IOLINK FW supports 8 channels per IO-Link instance in a single PRU core.
Each channel uses three GPI/O pins from the PRU-ICSS module. The IOLINK
TXD and TX_EN pins are implemented using two GPO pins, the IOLINK RXD
pin is implemented using a single GPI pin.</p>
<p>Following are high-level IOLINK FW features:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Feature</strong></p></td>
<td><p><strong>Remarks</strong></p></td>
</tr>
<tr class="row-even"><td><p>No. of instances</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>No. of channels per instance</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td><p>Baud Rate</p></td>
<td><p>COM1/COM2/COM3</p></td>
</tr>
<tr class="row-odd"><td><p>Minumum Cycle Time</p></td>
<td><p>400 µs</p></td>
</tr>
<tr class="row-even"><td><p>Maximum Cycle Time</p></td>
<td><p>132 ms</p></td>
</tr>
<tr class="row-odd"><td><p>Channel Independent Cycle Time</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Receive Buffer</p></td>
<td><p>1 buffer of 68 bytes</p></td>
</tr>
<tr class="row-odd"><td><p>Transmit Buffer</p></td>
<td><p>2 buffer of 68 bytes</p></td>
</tr>
<tr class="row-even"><td><p>Channel Independent Time Control
and Monitoring</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Receive Glitch Filter and 8x
Oversampling</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Receive Tolerance (per baud rate)</p></td>
<td><p>3%</p></td>
</tr>
<tr class="row-odd"><td><p>Programmable Max Response Time TA</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-even"><td><p>Start/Restart/Stop</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p>Start Bit</p></td>
<td><p>1-bit</p></td>
</tr>
<tr class="row-even"><td><p>Stop Bit</p></td>
<td><p>1-bit</p></td>
</tr>
<tr class="row-odd"><td><p>Data Length</p></td>
<td><p>8-bit</p></td>
</tr>
<tr class="row-even"><td><p>Parity Check</p></td>
<td><p>Even Parity</p></td>
</tr>
<tr class="row-odd"><td><p>Interrupts that the CPU can use</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id15">
<h2>7.5.3. Firmware Organization<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>FW Item</strong></p></td>
<td><p><strong>Directory</strong></p></td>
</tr>
<tr class="row-even"><td><p>Source code</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/iolink/firmware/icss_iolink/src</p></td>
</tr>
<tr class="row-odd"><td><p>Design Guide</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/iolink/docs</p></td>
</tr>
<tr class="row-even"><td><p>Firmware binaries</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/iolink/firmware/icss_iolink/bin</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id16">
<h2>7.5.4. Firmware Build Instruction<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id17">
<h3>7.5.4.1. Build instruction from Processor SDK Release package<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="id18">Pre-requisites to Building</p>
<p>Refer to the Processor SDK RTOS Building page for information on setting up the build environment.</p>
<p class="rubric" id="compiling-iolink-firmware">Compiling IOLINK FIRMWARE</p>
<ul class="simple">
<li><p>cd &lt;PDK&gt;/packages/ti/drv/iolink</p></li>
<li><p>make firm</p></li>
</ul>
<p>Firmware binaries at the end of the build will be located at:</p>
<ul class="simple">
<li><p>&lt;PDK&gt;/packages/ti/drv/iolink/firmware/&lt;FIRMWARE_TYPE&gt;/bin/&lt;SOC&gt;/&lt;HOST_CORE&gt;/&lt;REVISION&gt;</p></li>
<li><p>&lt;FIRMWARE_TYPE&gt; indicates the firmware type i.e. icss_iolink</p></li>
<li><p>&lt;SOC&gt; indicates the SOC type, e.g. am437x</p></li>
<li><p>&lt;HOST_CORE&gt; indicates the Host core type on which the built binary
can be loaded, e.g. a9host</p></li>
<li><p>&lt;REVISION&gt; indicates the revision of the firmware binary based on
core (there are 2 revision of PRU-ICSS core), e.g. REV1.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id19">
<h3>7.5.4.2. Build instruction for GIT<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>Following are the steps for building firmware from any external
environment outside Processor SDK RTOS package.</p>
<ul class="simple">
<li><p>Creation of directories</p>
<ul>
<li><p>Create a working directory e.g. &lt;WORK_DIR&gt;</p></li>
<li><p>Create a new directory named ti inside working directory. i.e.
&lt;WORK_DIR/ti&gt;</p></li>
<li><p>Create a new directory called drv inside ti. i.e.
&lt;WORK_DIR/ti/drv&gt;</p></li>
</ul>
</li>
<li><p>Clone of Repos</p>
<ul>
<li><p>Git clone pdk build repo into ti directory. i.e.
&lt;WORK_DIR/ti/build&gt;</p></li>
<li><p>Git clone iolink repo into ti/drv directory. i.e.
&lt;WORK_DIR/ti/drv/iolink&gt;</p></li>
</ul>
</li>
<li><p>Setting Environment Variables</p>
<ul>
<li><p>Export CLPRU install path. i.e. export CL_PRU_INSTALL_PATH=clpru
toolchain directory</p></li>
<li><p>Export pdk install path. i.e. export PDK_INSTALL_PATH=&lt;WORK_DIR&gt;</p></li>
<li><p>Export LIMIT_SOCS Variable i.e. LIMIT_SOCS=&lt;SOC&gt; [Optional for
limiting to some SOCs]</p></li>
</ul>
</li>
<li><p>Build command</p>
<ul>
<li><p>Run make firm_clean/firm to clean/build firmware from iolink
directory i.e. &lt;WORK_DIR/ti/drv/iolink&gt;</p></li>
</ul>
</li>
<li><p>Generated binaries</p>
<ul>
<li><p>the firmware binaries which will be located in
&lt;WORK_DIR/ti/drv/iolink/firmware/&lt;FIRMWARE_TYPE&gt;/bin/&lt;SOC&gt;/&lt;HOST_CORE&gt;/&lt;REVISION&gt;&gt;</p></li>
</ul>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="id20">
<h2>7.5.5. Supported EVMs<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<p>Supported EVMs are listed below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>EVM Name</p></th>
<th class="head"><p>PRU-ICSS Instances</p></th>
<th class="head"><p>PRU-ICSS Revision</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>idkAM437x</p></td>
<td><p>ICSS0</p></td>
<td><p>REV1</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="id21">Firmware Design Guide</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Document</strong></p></td>
<td><p><strong>Location</strong></p></td>
</tr>
<tr class="row-even"><td><p>IOLINK FIRMWARE Design Guide</p></td>
<td><p>&lt;PDK&gt;/packages/ti/drv/iolink/docs/IOLINK_FW_DESIGN_GUIDE.pdf</p></td>
</tr>
</tbody>
</table>
<p><strong>NOTE: For normal use of IOLINK FW, there is no need to refer to the design guide.
This document can be cosulted in case of interest in details of internal firmware
operation, or a desire to modify the firmware.</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Compilers.html" class="btn btn-neutral float-right" title="8. Compilers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="PRU_ICSS.html" class="btn btn-neutral" title="7. PRU-ICSS Firmware" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2019</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'06_01_00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>